  <!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" href="lib/onsenui/css/onsenui.css"/>
        <link rel="stylesheet" href="lib/onsenui/css/ionicons/css/ionicons.css"/>
        <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css"/>
        <link rel="stylesheet" href="lib/onsenui/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="lib/onsenui/css/jquery-ui.min.css"/>
        <link rel="stylesheet" href="lib/onsenui/css/lightslider.min.css"/>
        
        
        <!-- <script type="text/javascript" src="js/cordova_plugin.js"></script> -->
        <script type="text/javascript" src="lib/onsenui/js/onsenui.js"></script>
        <script type="text/javascript" src="lib/onsenui/js/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="lib/onsenui/js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="lib/onsenui/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="lib/onsenui/js/lightslider.min.js"></script>
        <script type="text/javascript" src="js/notify.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <!-- <script src="lib/onsenui/js/angular-onsenui.min.js"></script> -->
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <title>HOME | Revo</title>


    <script>
      $( function() {
        var spinner = $( "#spinner" ).spinner();
     } );
  </script>
  <script>

          var prev = function() {
            var carousel = document.getElementById('carousel');
            carousel.prev();            
          };

          var next = function() {
            var carousel = document.getElementById('carousel');
            carousel.next();            
          };

          var showDialog = function(id, customer, payment_method) {

            document.getElementById(id).show();

            console.log(customer);
            if(customer != "" && customer != null )
            {
              var checkout_button            = document.getElementById('checkout_button');

              if(payment_method == "veritrans")
              {
                checkout_button.setAttribute('onclick', "fn.load('checkout.html' , "+JSON.stringify(customer)+", 'veritrans')");
              }
              else
              {
                checkout_button.setAttribute('onclick', "fn.load('checkout.html' , "+JSON.stringify(customer)+")");
              }
            }

          };

          var hideDialog = function(id) {
            document.getElementById(id).hide();
          };

          var check_menu    = false;
          var check_produk  = false;
          var storage       = window.localStorage;
          var formattedtotal;

          ons.ready(function() {
            window.fn = {};

            window.fn.open = function() {

              // storage.clear();
              var menu = document.getElementById('menu');
              var result;

              var menu_daftar           = document.getElementById('menu_daftar');
              var menu_masuk            = document.getElementById('menu_masuk');
              var menu_profile          = document.getElementById('menu_profile');
              var menu_keluar           = document.getElementById('menu_keluar');

              if(storage.getItem("user") != null)
              {
                // console.log("user tidak null");
                var user                  = JSON.parse(storage.getItem("user"));
                console.log(user);
                var nama_user             = document.getElementById('nama_user');
                nama_user.innerHTML       = "<b>"+user["customer"]["username"]+"</b>";

                menu_daftar.setAttribute('style', 'display:none');
                menu_masuk.setAttribute('style', 'display:none');
                menu_profile.style.display = "";
                menu_profile.setAttribute('style', 'font-size:18px;');
                menu_keluar.style.display = "";
                menu_keluar.setAttribute('style', 'font-size:18px;');
              }
              else
              {
                // console.log("user null");
                var nama_user             = document.getElementById('nama_user');
                nama_user.innerHTML       = "<b>Guest</b>";

                menu_daftar.style.display = "";
                menu_daftar.setAttribute('style', 'font-size:18px;');

                menu_masuk.style.display  = "";
                menu_masuk.setAttribute('style', 'font-size:18px;');

                menu_profile.setAttribute('style', 'display:none');

                menu_keluar.setAttribute('style', 'display:none');
              }

              if(storage.getItem("menu") != null && !check_menu)
              {
                //kalau sudah login
                // console.log(storage.getItem("user"));


                var value                   = JSON.parse(storage.getItem("menu"));
                var categories              = value["menu_categories"];

                for (var i = 0; i < categories.length; i++) {
                  //PARENT CATEGORIES

                  //Buat header
                  var ons_header              = document.createElement('ons-list-header');
                  ons_header.style.fontSize   = "11px";
                  ons_header.setAttribute("tappable",'');
                  ons_header.setAttribute("class",'item-header list__header');

                  document.getElementsByTagName('ons-list')[0].appendChild(ons_header);

                  //Buat DIV
                  var div                     = document.createElement('div');
                  ons_header.appendChild(div);

                  //Buat a href biar bisa ditekan Xd LOL
                  var a                       = document.createElement('a');
                  a.setAttribute("class",'collapsed panel-title');
                  a.setAttribute("role",'button');
                  a.setAttribute("data-toggle",'collapse');
                  a.setAttribute("data-parent",'#accordions');
                  a.setAttribute("href",'#collapse'+i);
                  a.setAttribute("aria-expanded",'false');
                  a.setAttribute("aria-controls",'collapse'+i);
                  div.appendChild(a);

                  //Buat DIV baru
                  var div_categories          = document.createElement('div');
                  div_categories.setAttribute("id",'headings'+i);
                  div_categories.setAttribute("role",'tab');
                  div_categories.innerHTML    = categories[i]["name"];
                  a.appendChild(div_categories);

                  //CHILD CATEGORIES

                  //Buat DIV penampung
                  var div_subcategories       = document.createElement('div');
                  var div_child               = document.createElement('div');

                  div_subcategories.setAttribute("id",'collapse'+i);
                  div_subcategories.setAttribute("class",'panel-collapse collapses collapse');
                  div_subcategories.setAttribute("role",'tabpanel');
                  div_subcategories.setAttribute("aria-labelledby",'heading'+i);
                  div_subcategories.appendChild(div_child);

                  div.appendChild(div_subcategories);

                  subcategories = categories[i]["sub_categories"];

                  for (var j = 0; j < subcategories.length; j++) {
                    var arr = {slug:subcategories[j]["slug"], name:subcategories[j]["name"]};

                    var ons_list_item           = document.createElement('ons-list-item');
                    ons_list_item.setAttribute("onclick","fn.load('wanita.html','"+JSON.stringify(arr)+"','"+true+"')");
                    ons_list_item.setAttribute("tappable",'');
                    ons_list_item.setAttribute("class",'list-item list__item');
                    ons_list_item.innerHTML     = subcategories[j]["name"];

                    var div_anotherdiv          = document.createElement('div');
                    div_anotherdiv.setAttribute("class",'right ion-chevron-right');
                    ons_list_item.appendChild(div_anotherdiv);

                    div_subcategories.appendChild(ons_list_item);
                  }
                }
                check_menu = true;
              }
              menu.open();
              // storage.removeItem("proceed");
            };
             
            var carousel = document.addEventListener('postchange', function(event) {
                console.log('Changed to ' + event.activeIndex);
                document.querySelectorAll('.indicators')[event.lastActiveIndex].style.color = 'white';
                document.querySelectorAll('.indicators')[event.activeIndex].style.color = '#085078';
              });

            window.fn.load = function(page, newdata, cek) {
                var status = false;
                var result;
                // console.log(storage.getItem("menu"));

                if(page == "extra_page.html")
                {
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));

                  setTimeout(function() {
                    var extra_page_title          = document.getElementById('extra_page_title');
                    extra_page_title.innerHTML    = newdata;
                    var extra_page_main           = document.getElementById('extra_page_main');
                    extra_page_main.setAttribute('style', 'text-align:justify');

                    var extra_page_data           = JSON.parse(storage.getItem('extra_page'));
                    console.log(extra_page_data);

                    for (var i = 0; i < extra_page_data.length; i++) {
                      if(newdata == extra_page_data[i]["post_title"])
                      {
                        extra_page_main.innerHTML     = extra_page_data[i]["post_content"];
                        if(extra_page_data[i]["background"] != null)
                        {
                          console.log(extra_page_data[i]["background"]);
                          var div_page                    = document.getElementById('extra_page_background');
                          div_background                  = div_page.getElementsByClassName("page__background")[0];
                          div_page.getElementsByClassName("page__background")[0].style.background       = "url('"+extra_page_data[i]["background"]+"')";
                          div_page.getElementsByClassName("page__background")[0].style.backgroundRepeat = "no-repeat";
                          div_page.getElementsByClassName("page__background")[0].style.backgroundSize   = "100% 100%";
                          // div_page.page_background.setAttribute('style', "background :url('"+extra_page_data[i]["background"]+"');");
                        }
                        else{
                          var div_page                    = document.getElementById('extra_page_background');
                          div_background                  = div_page.getElementsByClassName("page__background")[0];
                          div_page.getElementsByClassName("page__background")[0].style.background       = "";
                          div_page.getElementsByClassName("page__background")[0].style.backgroundRepeat = "";
                          div_page.getElementsByClassName("page__background")[0].style.backgroundSize   = "";
                        }
                      }
                    }
                    
                  }, 10);
                }
                else if(page == "login.html")
                {
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));
                }
                else if(page == "logout.html")
                {
                  storage.removeItem('user');
                  fn.load('home.html');
                  hideDialog('dialog-3');
                  $.notify("Logout berhasil", {position :"bottom center", className: 'success'});
                }
                else if(page == "register.html")
                {
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));

                  setTimeout(function(){
                    var provinsi          = JSON.parse(storage.getItem("rajaongkir"));

                      var provinsi_register = document.getElementById('provinsi-register');
                      provinsi_register.setAttribute('onchange', "fn.shippingDropdownChange('provinsi', 'register')");

                      for (var j = 0; j < provinsi.length; j++) {
                        if(j == 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', "blank");
                          option.innerHTML        = "Choose one option";
                          provinsi_register.appendChild(option);
                        }

                        if(provinsi[j]["daftar_kota"].length != 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', provinsi[j]["province"]);
                          option.innerHTML        = provinsi[j]["province"];
                          provinsi_register.appendChild(option);
                        }

                      }

                      var kota_register = document.getElementById('kota-register');
                      kota_register.setAttribute('onchange', "fn.shippingDropdownChange('kota', 'register')");

                      if(provinsi_register.value == "blank")
                      {
                        var option              = document.createElement('option');
                        option.setAttribute('value', "blank");
                        option.innerHTML        = "Choose province first";
                        kota_register.appendChild(option);
                      }
                  }, 10);
                }
                else if(page == "home.html")
                {
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));

                  // console.log(storage.getItem("rajaongkir"));
                  // console.log(storage.getItem("store_location"));

                  setTimeout(function(){
                    if(storage.getItem("rajaongkir") == null || storage.getItem("store_location") == null)
                    {
                      // console.log("masuk");
                      loadData();
                    }

                    if(storage.getItem("menu") == null)
                    {
                      // console.log("adadada");
                      storage = window.localStorage;

                      var data = {
                        "action": "test1"
                      };

                      var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                      var xhr = new XMLHttpRequest();
                      if ("withCredentials" in xhr){
                        xhr.open("GET", url, true);
                      } else if (typeof XDomainRequest != "undefined"){
                        xhr = new XDomainRequest();
                        xhr.open(method, url);
                      } else {
                        xhr = null;
                      }

                      xhr.setRequestHeader(
                        'X-Requested-With', 'XMLHttpRequest');
                      xhr.send();

                      data = $(this).serialize() + "&" + $.param(data);
                      $.ajax
                      ({
                          url: url, //Relative or absolute path to response.php file
                          type: "GET",
                          crossDomain: true,
                          data: data,
                          dataType: "json", 
                          async: false,

                          success: function(data) {
                            if(data != "" && data != null)
                            {
                              console.log(data);
                                storage.setItem("menu", JSON.stringify(data));
                                status = true;
                            }
                          },
                          error: function( jqXhr, textStatus, errorThrown ) {
                              console.log( errorThrown );
                          } 
                      });
                    }

                    var cart = JSON.parse(storage.getItem("cart"));
                    if(cart != null)
                    {
                      var cart_length = cart.length;
                      storage.setItem("cart", JSON.stringify(cart));

                      var icon = document.getElementById("cart_icon3");
                      icon.innerHTML = cart_length;
                    }

                    var container = document.getElementById('home_container');

                    var carousel = document.createElement('div');
                    carousel.setAttribute('id','carousel-example-generic');
                    carousel.setAttribute('class', 'carousel slide');
                    carousel.setAttribute('data-ride','carousel');

                    var ol = document.createElement('ol');
                    ol.setAttribute('class','carousel-indicators');

                    for(i=0;i<3;i++)
                    {
                      var li = document.createElement('li');
                      li.setAttribute('data-target','#carousel-example-generic');
                      li.setAttribute('data-slide-to', i.toString());
                      if(i == 0)
                      {
                        li.setAttribute('class', 'active');
                      }
                      ol.appendChild(li);
                    }

                    var carousel_inner = document.createElement('div');
                    carousel_inner.setAttribute('class','carousel-inner');
                    carousel_inner.setAttribute('role','listbox');

                    for(j=0;j<3;j++)
                    {
                      var inner_div = document.createElement('div');
                      if(j==0)
                      {
                        inner_div.setAttribute('class','item active');
                      }
                      else{
                        inner_div.setAttribute('class','item');
                      }
                    
                      var img = document.createElement('img');
                      img.setAttribute('src', 'img/a1.jpg');
                      img.setAttribute('style', 'width: 100%;');

                      inner_div.appendChild(img);
                      carousel_inner.appendChild(inner_div);
                    }

                    var a1 = document.createElement('a');
                    a1.setAttribute('class','left carousel-control navi-carousel');
                    a1.setAttribute('href','#carousel-example-generic');
                    a1.setAttribute('role','button');
                    a1.setAttribute('data-slide','prev');

                    var span = document.createElement('span');
                    span.setAttribute('class','ion-arrow-left-b');
                    span.setAttribute('aria-hidden','true');

                    a1.appendChild(span);

                    var span0 = document.createElement('span');
                    span0.setAttribute('class','sr-only');
                    span0.innerHTML = "Previous";

                    a1.appendChild(span0);

                    var a2 = document.createElement('a');
                    a2.setAttribute('class','right carousel-control navi-carousel');
                    a2.setAttribute('href','#carousel-example-generic');
                    a2.setAttribute('role','button');
                    a2.setAttribute('data-slide','next');

                    var span1 = document.createElement('span');
                    span1.setAttribute('class','ion-arrow-right-b');
                    span1.setAttribute('aria-hidden','true');

                    a2.appendChild(span1);

                    var span2 = document.createElement('span');
                    span2.setAttribute('class','sr-only');
                    span2.innerHTML = "Next";

                    a2.appendChild(span2);

                    carousel.appendChild(ol);
                    carousel.appendChild(carousel_inner);
                    carousel.appendChild(a1);
                    carousel.appendChild(a2);

                    container.appendChild(carousel);

                    var beranda_kategori = document.createElement('div');
                    beranda_kategori.setAttribute('class','beranda-kategori');
                    beranda_kategori.innerHTML = "<p><b>Kategori</b></p>";

                    var hr = document.createElement('hr');
                    beranda_kategori.appendChild(hr);
                    container.appendChild(beranda_kategori);

                    var ons_carousel = document.createElement('ons-carousel');
                    ons_carousel.setAttribute('class','carou');
                    ons_carousel.setAttribute('style','height: 150px;');
                    ons_carousel.setAttribute('item-width','160px');
                    ons_carousel.setAttribute('swipeable','');
                    ons_carousel.setAttribute('overscrollable','');
                    ons_carousel.setAttribute('auto-scroll','');

                    var value = JSON.parse(storage.getItem("menu"));
                    var categories = value["menu_categories"];

                    for(k=0;k<categories.length-3;k++){
                      var arr = {slug:categories[k]["slug"], name:categories[k]["name"]};

                      var ons_carouselitem = document.createElement('ons-carousel-item');
                      ons_carouselitem.setAttribute('ng-repeat','i in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]');

                      var div_onsitem = document.createElement('div');
                      div_onsitem.setAttribute('style','background-color: #ccc; height: 160px; width:160px;');

                      var ons_button = document.createElement('ons-button');
                      ons_button.setAttribute('style', 'width:100%;background-color:transparent; padding:0px;');
                      ons_button.setAttribute('onclick',"fn.load('wanita.html','"+JSON.stringify(arr)+"','"+true+"')");

                      var img = categories[k]["image"];
  
                      var img_carou = document.createElement('img');
                      if(k==0)
                      {
                        img_carou.setAttribute('class','img-carousel-home');                  
                      }
                      img_carou.setAttribute("src",img);

                      ons_button.appendChild(img_carou);
                      div_onsitem.appendChild(ons_button);
                      ons_carouselitem.appendChild(div_onsitem);
                      ons_carousel.appendChild(ons_carouselitem)                     
                    }
                    home_container.appendChild(ons_carousel); 


                    var ons_row1 = document.createElement('ons-row');
                    var ons_col1 = document.createElement('ons-col');

                    var arr = {slug:categories[categories.length-3]["slug"], name:categories[categories.length-3]["name"]};


                    var ons_button2 = document.createElement('ons-button');
                    ons_button2.setAttribute('class','sub-category-home');
                    ons_button2.setAttribute('onclick',"fn.load('wanita.html','"+JSON.stringify(arr)+"','"+true+"')");

                    var img2 = document.createElement('img');
                    img2.setAttribute('style','width:100%;');
                    img2.setAttribute('src',categories[categories.length-3]["image"]);

                    ons_button2.appendChild(img2);
                    ons_col1.appendChild(ons_button2);
                    ons_row1.appendChild(ons_col1);

                    arr = {slug:categories[categories.length-2]["slug"], name:categories[categories.length-2]["name"]};

                    var ons_col2 = document.createElement('ons-col');

                    var ons_button3 = document.createElement('ons-button');
                    ons_button3.setAttribute('class','sub-category-home');
                    ons_button3.setAttribute('onclick',"fn.load('wanita.html','"+JSON.stringify(arr)+"','"+true+"')");

                    var img3 = document.createElement('img');
                    img3.setAttribute('style','width:100%;');
                    img3.setAttribute('src',categories[categories.length-2]["image"]);

                    ons_button3.appendChild(img3);
                    ons_col2.appendChild(ons_button3);
                    ons_row1.appendChild(ons_col2);

                    arr = {slug:categories[categories.length-1]["slug"], name:categories[categories.length-1]["name"]};

                    var ons_row2 = document.createElement('ons-row');
                    var ons_col3 = document.createElement('ons-col');

                    var ons_button4 = document.createElement('ons-button');
                    ons_button4.setAttribute('class','sub-category-home');
                    ons_button4.setAttribute('onclick',"fn.load('wanita.html','"+JSON.stringify(arr)+"','"+true+"')");

                    var img4 = document.createElement('img');
                    img4.setAttribute('style','width:100%;');
                    img4.setAttribute('src',categories[categories.length-1]["image"]);

                    ons_button4.appendChild(img4);
                    ons_col3.appendChild(ons_button4);
                    ons_row2.appendChild(ons_col3);

                    container.appendChild(ons_row1);
                    container.appendChild(ons_row2);


                  }, 10);

                }
                else if(page == "akun.html")
                {
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));

                    setTimeout(function(){
                      var user                    = JSON.parse(storage.getItem("user"))["customer"]; 

                      var username_profile        = document.getElementById('username_profile');
                      var nama_depan_profile      = document.getElementById('nama_depan_profile');
                      var nama_belakang_profile   = document.getElementById('nama_belakang_profile');
                      var nohp_profile            = document.getElementById('nohp_profile');
                      var email_profile           = document.getElementById('email_profile');
                      var alamat_profile          = document.getElementById('alamat_profile');
                      var perusahaan_profile      = document.getElementById('perusahaan_profile');
                      var kode_pos_profile        = document.getElementById('kode_pos_profile');

                      username_profile.value      = user["username"]; 
                      nama_depan_profile.value    = user["first_name"]; 
                      nama_belakang_profile.value = user["last_name"]; 
                      nohp_profile.value          = user["billing_address"]["phone"]; 
                      email_profile.value         = user["email"]; 
                      alamat_profile.value        = user["billing_address"]["address_1"]; 
                      perusahaan_profile.value    = user["billing_address"]["company"];

                      //Provinsi =======================================================================================
                      var provinsi                = JSON.parse(storage.getItem("rajaongkir"));

                      var provinsi_profile        = document.getElementById('provinsi_profile');
                      provinsi_profile.setAttribute('onchange', "fn.shippingDropdownChange('provinsi', 'profile')");

                      for (var j = 0; j < provinsi.length; j++) {
                        if(j == 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', "blank");
                          option.innerHTML        = "Choose one option";
                          provinsi_profile.appendChild(option);
                        }

                        if(provinsi[j]["daftar_kota"].length != 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', provinsi[j]["province"]);
                          option.innerHTML        = provinsi[j]["province"];
                          provinsi_profile.appendChild(option);
                        }
                      }

                      var kota_profile            = document.getElementById('kota_profile');
                      kota_profile.setAttribute('onchange', "fn.shippingDropdownChange('kota', 'profile')");

                      if(provinsi_profile.value == "blank")
                      {
                        var option                = document.createElement('option');
                        option.setAttribute('value', "blank");
                        option.innerHTML          = "Choose province first";
                        kota_profile.appendChild(option);
                      }

                      var cek = false;

                      for (var i = 0; i < provinsi_profile.options.length; i++) {
                        var temp    = provinsi_profile.options[i].innerHTML.toLowerCase().replace(/\s+/g, '');
                        var temp2   = user["billing_address"]["state"].toLowerCase().replace(/\s+/g, '');

                        if(temp == temp2)
                        {
                          provinsi_profile.value  = user["billing_address"]["state"];
                          cek = true;

                          //LOAD KOTA
                          fn.shippingDropdownChange('provinsi', 'profile');
                        }
                      }

                      if(!cek)
                      {
                        provinsi_profile.value    = "";
                      }

                      for (var i = 0; i < provinsi.length; i++) {
                        var temp    = provinsi[i]["province"].toLowerCase().replace(/\s+/g, '');
                        var temp2   = provinsi_profile.value.toLowerCase().replace(/\s+/g, '');

                        if(temp == temp2)
                        {
                          for (var j = 0; j < provinsi[i]["daftar_kota"].length; j++) {
                            var temp_kota    = kota_profile.options[j+1].innerHTML.toLowerCase().replace(/\s+/g, '');
                            var temp2_kota   = user["billing_address"]["city"].toLowerCase().replace(/\s+/g, '');

                            if(temp_kota == temp2_kota)
                            {
                              kota_profile.value  = user["billing_address"]["city"];
                              cek = true;
                            }
                          }
                        }
                      }

                      //Kode Pos

                      if(kota_profile.value == "blank")
                      {
                        kode_pos_profile.value  = "";
                      }
                      else
                      {
                        kode_pos_profile.value      = user["billing_address"]["postcode"]; 
                      }
                    }, 10);

                }
                else if(page == "proceed.html")
                {
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));

                  setTimeout(function(){
                      var provinsi            = JSON.parse(storage.getItem("rajaongkir"));

                      var provinsi_data_diri  = document.getElementById('provinsi_data_diri');
                      provinsi_data_diri.setAttribute('onchange', "fn.shippingDropdownChange('provinsi', 'data_diri')");

                      for (var j = 0; j < provinsi.length; j++) {
                        if(j == 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', "blank");
                          option.innerHTML        = "Choose one option";
                          provinsi_data_diri.appendChild(option);
                        }

                        if(provinsi[j]["daftar_kota"].length != 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', provinsi[j]["province"]);
                          option.innerHTML        = provinsi[j]["province"];
                          provinsi_data_diri.appendChild(option);
                        }

                      }

                      var kota_data_diri = document.getElementById('kota_data_diri');
                      kota_data_diri.setAttribute('onchange', "fn.shippingDropdownChange('kota', 'data_diri')");

                      if(provinsi_data_diri.value == "blank")
                      {
                        var option              = document.createElement('option');
                        option.setAttribute('value', "blank");
                        option.innerHTML        = "Choose province first";
                        kota_data_diri.appendChild(option);
                      }

                  }, 20);

                  //Data dari akun user diambil
                  if(storage.getItem("user") != null)
                  {
                    setTimeout(function(){
                      var user                    = JSON.parse(storage.getItem("user"))["customer"]; 

                      var nama_depan_data_diri      = document.getElementById('nama_depan');
                      var nama_belakang_data_diri   = document.getElementById('nama_belakang');
                      var nohp_data_diri            = document.getElementById('nomor_telepon');
                      var email_data_diri           = document.getElementById('email');
                      var alamat_data_diri          = document.getElementById('alamat_pengiriman');
                      var perusahaan_data_diri      = document.getElementById('perusahaan');
                      var kode_pos_data_diri        = document.getElementById('kode_pos_data_diri');

                      nama_depan_data_diri.value    = user["first_name"]; 
                      nama_belakang_data_diri.value = user["last_name"]; 
                      nohp_data_diri.value          = user["billing_address"]["phone"]; 
                      email_data_diri.value         = user["email"]; 
                      alamat_data_diri.value        = user["billing_address"]["address_1"]; 
                      perusahaan_data_diri.value    = user["billing_address"]["company"];

                      //Provinsi =======================================================================================
                      var provinsi                  = JSON.parse(storage.getItem("rajaongkir"));

                      var provinsi_data_diri        = document.getElementById('provinsi_data_diri');
                      provinsi_data_diri.setAttribute('onchange', "fn.shippingDropdownChange('provinsi', 'data_diri')");

                      for (var j = 0; j < provinsi.length; j++) {
                        if(j == 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', "blank");
                          option.innerHTML        = "Choose one option";
                          provinsi_data_diri.appendChild(option);
                        }

                        if(provinsi[j]["daftar_kota"].length != 0)
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', provinsi[j]["province"]);
                          option.innerHTML        = provinsi[j]["province"];
                          provinsi_data_diri.appendChild(option);
                        }
                      }

                      var kota_data_diri            = document.getElementById('kota_data_diri');
                      kota_data_diri.setAttribute('onchange', "fn.shippingDropdownChange('kota', 'data_diri')");

                      if(provinsi_data_diri.value == "blank")
                      {
                        var option                = document.createElement('option');
                        option.setAttribute('value', "blank");
                        option.innerHTML          = "Choose province first";
                        kota_data_diri.appendChild(option);
                      }

                      var cek = false;

                      for (var i = 0; i < provinsi_data_diri.options.length; i++) {
                        var temp    = provinsi_data_diri.options[i].innerHTML.toLowerCase().replace(/\s+/g, '');
                        var temp2   = user["billing_address"]["state"].toLowerCase().replace(/\s+/g, '');

                        if(temp == temp2)
                        {
                          provinsi_data_diri.value  = user["billing_address"]["state"];
                          cek = true;

                          //LOAD KOTA
                          fn.shippingDropdownChange('provinsi', 'data_diri');
                        }
                      }

                      if(!cek)
                      {
                        provinsi_data_diri.value    = "";
                      }

                      for (var i = 0; i < provinsi.length; i++) {
                        var temp    = provinsi[i]["province"].toLowerCase().replace(/\s+/g, '');
                        var temp2   = provinsi_data_diri.value.toLowerCase().replace(/\s+/g, '');

                        if(temp == temp2)
                        {
                          for (var j = 0; j < provinsi[i]["daftar_kota"].length; j++) {
                            var temp_kota    = kota_data_diri.options[j+1].innerHTML.toLowerCase().replace(/\s+/g, '');
                            var temp2_kota   = user["billing_address"]["city"].toLowerCase().replace(/\s+/g, '');

                            if(temp_kota == temp2_kota)
                            {
                              kota_data_diri.value  = user["billing_address"]["city"];
                              cek = true;
                            }
                          }
                        }
                      }

                      //Kode Pos

                      if(kota_data_diri.value == "blank")
                      {
                        kode_pos_data_diri.value  = "";
                      }
                      else
                      {
                        kode_pos_data_diri.value      = user["billing_address"]["postcode"]; 
                      }
                    }, 25);
                  }
                }
                else if(page == "wanita.html")
                {
                  if(cek == "true")
                  {
                    storage.removeItem("all_produk");
                  }
                  if(storage.getItem("all_produk") == null)
                  {
                    ActivityIndicator.show("Loading data...");

                    var data = {
                      "action": "single_produk",
                      "slug"  : JSON.parse(newdata)["slug"],
                    };

                    var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                    var xhr = new XMLHttpRequest();
                    if ("withCredentials" in xhr){
                      xhr.open("GET", url, true);
                    } else if (typeof XDomainRequest != "undefined"){
                      xhr = new XDomainRequest();
                      xhr.open(method, url);
                    } else {
                      xhr = null;
                    }

                    xhr.setRequestHeader(
                      'X-Requested-With', 'XMLHttpRequest');
                    xhr.send();

                    data = $(this).serialize() + "&" + $.param(data);
                    $.ajax
                    ({
                        url: url, //Relative or absolute path to response.php file
                        type: "GET",
                        crossDomain: true,
                        data: data,
                        dataType: "json", 
                        async: false,

                        success: function(data) {
                          if(data != "" && data != null)
                          {
                            storage.setItem("all_produk", JSON.stringify(data));
                            // console.log(storage.getItem("all_produk"));
                            result = data;
                            status = true;
                          }
                        },
                        error: function( jqXhr, textStatus, errorThrown ) {
                            console.log( errorThrown );
                            ActivityIndicator.hide();
                        } 
                    });
                  }
                  else
                  {
                    ActivityIndicator.hide();
                    status     = true;
                    result     = JSON.parse(storage.getItem("all_produk"));
                  }
                  if(status)
                  {
                    var content = document.getElementById('content');
                    var menu = document.getElementById('menu');
                    content.load(page)
                      .then(menu.close.bind(menu));

                    ActivityIndicator.hide();

                    setTimeout(function() {

                        document.getElementById('title').innerHTML = JSON.parse(newdata)["name"];

                        var div               = document.getElementById('product');

                        while(div.firstChild){
                          div.removeChild(div.firstChild);
                        }

                        // console.log(Object.keys(result["produk"]).length);
                        for (var i = 0; i < Object.keys(result["produk"]).length; i++) {
                          var produk = JSON.parse(JSON.stringify(result["produk"][i]));

                          var div_produk        = document.createElement('div');
                          div_produk.setAttribute("class",'col-xs-6');
                          div_produk.setAttribute("style",'padding:0px;');

                          var ons_button        = document.createElement('ons-button');
                          ons_button.setAttribute("class",'item-set button');
                          ons_button.setAttribute("onclick","fn.buttonClick("+JSON.stringify(produk)+","+newdata+")");

                          var div_image         = document.createElement('div');
                          div_image.setAttribute("class",'sub-item-image');

                          var image             = document.createElement('img');
                          image.setAttribute("style",'width:100%;');
                          image.setAttribute("src",produk["gambar_produk"][0]["src"]);
                          div_image.appendChild(image);

                          var div_detail        = document.createElement('div');
                          div_detail.setAttribute("class",'sub-item-detail');

                          var p1                = document.createElement('p');
                          p1.innerHTML          = produk["nama_produk"];
                          var p3                = document.createElement('p');
                          p3.setAttribute("class",'ion-pricetag');
                          moneyFormat(produk["harga"]);
                          p3.innerHTML          = "<bold> "+formattedtotal+",-</bold>";

                          div_detail.appendChild(p1);
                          div_detail.appendChild(p3);

                          ons_button.appendChild(div_image);
                          ons_button.appendChild(div_detail);
                          div_produk.appendChild(ons_button);
                          div.appendChild(div_produk);

                          var cart              = JSON.parse(storage.getItem('cart'));
                          if(cart != null)
                          {
                            var cart_length     = cart.length;
                            storage.setItem("cart", JSON.stringify(cart));

                            var icon            = document.getElementById('cart_icon');
                            icon.innerHTML      = cart_length;
                          }
                        }
                    }, 10);
                  }
                  setTimeout(function(){
                    var cart = JSON.parse(storage.getItem("cart"));
                    if(cart != null)
                    {
                      var cart_length = cart.length;
                      storage.setItem("cart", JSON.stringify(cart));

                      var icon = document.getElementById("cart_icon");
                      icon.innerHTML = cart_length;
                    }
                  }, 10);
                }
                else if(page == "detail.html")
                {
                  storage.removeItem("variasi");
                  var content                   = document.getElementById('content');
                  var menu                      = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));

                    setTimeout(function() {

                      var produk = JSON.parse(storage.getItem("produk"));

                      var ons_carousel                      = document.getElementById('carousel');

                      for (var i = 0; i < produk["gambar_produk"].length; i++) {
                        var ons_carousel_item               = document.createElement('ons-carousel-item');
                        ons_carousel_item.style.position    = "absolute";
                        ons_carousel_item.style.visibility  = "visible";
                        ons_carousel_item.style.left        = (i*100)+"%";

                        var image                           = document.createElement('img');
                        image.setAttribute('class', 'detail-item-image');
                        image.setAttribute('src', produk["gambar_produk"][i]["src"]);

                        ons_carousel_item.appendChild(image);
                        ons_carousel.appendChild(ons_carousel_item);
                      }
                      var ons_carousel_cover                = document.createElement('ons-carousel-cover');
                      var div_cover_label                   = document.createElement('div');
                      div_cover_label.setAttribute('class', 'cover-label');

                      for (var i = 0; i < produk["gambar_produk"].length; i++) {
                        var span                    = document.createElement('span');
                        span.setAttribute('class','indicators ion-record');
                        div_cover_label.appendChild(span);
                      }
                      ons_carousel_cover.appendChild(div_cover_label);

                      ons_carousel.appendChild(ons_carousel_cover);

                      var div                       = document.getElementsByClassName('detail-item col-xs-12')[0];
                      var ons_toolbar               = document.getElementById('back_button');
                      ons_toolbar.setAttribute("onclick","fn.load('wanita.html','"+newdata+"')");
                      

                      var div_separated             = document.createElement('div');
                      div_separated.setAttribute("class",'separated');

                      var div_detail                = document.createElement('div');
                      div_detail.setAttribute("class",'detail-sub-item-detail panel panel-default');

                      var judul                     = document.createElement('h4');
                      judul.innerHTML               = "Deskripsi Produk";

                      var garis                     = document.createElement('hr');

                      var nama_produk               = document.createElement('p');
                      nama_produk.innerHTML         = produk["nama_produk"];

                      var jenis_produk              = document.createElement('p');
                      jenis_produk.innerHTML        = "Leopard Print T-Shirt";

                      var harga_produk              = document.createElement('p');
                      harga_produk.setAttribute("id","harga_produk");
                      moneyFormat(produk["harga"]);
                      harga_produk.innerHTML        = "<b>"+formattedtotal+",-</b>";

                      var enter                     = document.createElement('br');

                      var deskripsi_produk          = document.createElement('p');
                      deskripsi_produk.innerHTML    = produk["deskripsi"];


                      //VARIASI + CART BUTTON
                      var div_cart                  = document.createElement('div');
                      div_cart.setAttribute("class",'detail-sub-item-cart panel panel-default');

                      if(produk["atribut"] != null)
                      {
                        for (var i = 0; i < produk["atribut"].length; i++) {
                          var ons_row                 = document.createElement('ons-row');
                          ons_row.setAttribute('style','margin-bottom:1em;');
                          var ons_col                 = document.createElement('ons-col');
                          ons_col.setAttribute('width', '30%');
                          ons_col.setAttribute('style', 'display:block; margin:0 auto;');

                          var variation               = document.createElement('p');
                          variation.setAttribute('style', 'margin-bottom:0;');
                          variation.innerHTML         = "<b>"+produk["atribut"][i]+"</b>:";

                          var ons_col_dropdown        = document.createElement('ons-col');
                          ons_col.setAttribute('width', '70%');

                          var div_dropdown            = document.createElement('div');
                          div_dropdown.setAttribute('class', 'dropdown');

                          var select                  = document.createElement('select');
                          select.setAttribute('id', 'dropdown'+i);
                          select.setAttribute('class', 'form-control');
                          select.setAttribute('onchange', "fn.dropdownChange('"+i+"')");

                          for (var j = 0; j < produk[produk["atribut"][i]].length; j++) {

                            if(j == 0)
                            {
                              var option              = document.createElement('option');
                              option.setAttribute('value', "blank");
                              option.innerHTML        = "Choose one option";
                              select.appendChild(option);
                            }
                            var option                = document.createElement('option');
                            var cek                   = false;
                          
                            option.setAttribute('value', produk[produk["atribut"][i]][j]["pilihan_variasi"]);
                            option.innerHTML          = produk[produk["atribut"][i]][j]["pilihan_variasi"].toUpperCase();
                            select.appendChild(option);
                          }
                          div_dropdown.appendChild(select);
                          ons_col.appendChild(div_dropdown);
                          ons_col_dropdown.appendChild(variation);
                          ons_row.appendChild(ons_col_dropdown);
                          ons_row.appendChild(ons_col);


                          div_cart.appendChild(ons_row);
                        }
                      }

                        //BUTTON CART

                        var ons_row_button          = document.createElement('ons-row');
                        ons_row_button.setAttribute('style','margin-top:1em;');
                        var ons_col_button_cart     = document.createElement('ons-col');
                        ons_col_button_cart.setAttribute('class','tombol-center');
                        var div_button_cart         = document.createElement('div');
                        div_button_cart.setAttribute('class','tombol-center');
                        var button_cart             = document.createElement('ons-button');
                        button_cart.setAttribute('class','tombol ion-ios-cart-outline button button--tappable');
                        button_cart.setAttribute('id','button_add_to_cart');
                        button_cart.setAttribute('ng-click','alert(true)');
                        button_cart.setAttribute('modifier','tappable');
                        if(produk["atribut"] != null)
                        {
                          button_cart.disabled        = true;
                        }
                        button_cart.innerHTML       = " Add To Cart";

                        var divxxxxx                = document.createElement('div');
                        divxxxxx.setAttribute('id','xx');
                        divxxxxx.setAttribute('style', 'width:100%');

                        div_button_cart.appendChild(button_cart);
                        ons_col_button_cart.appendChild(div_button_cart);

                        //BUTTON PROCEED

                        var ons_col_button_proceed  = document.createElement('ons-col');
                        var div_button_proceed      = document.createElement('div');
                        div_button_proceed.setAttribute('class','tombol-center');
                        var button_proceed          = document.createElement('ons-button');
                        button_proceed.setAttribute('class','tombol ion-bag button');

                        button_proceed.setAttribute('onclick',"fn.load('proceed.html')");
                        // button_proceed.setAttribute('onclick',"fn.load('proceed.html','','"+true+"')");
                        // ons_list_item.setAttribute("onclick","fn.load('wanita.html','"+JSON.stringify(arr)+"','"+true+"')");
                        button_proceed.setAttribute('id','button_proceed');
                        if(produk["atribut"] != null)
                        {
                          button_proceed.disabled        = true;
                        }
                        button_proceed.innerHTML    = " Proceed";

                        div_button_proceed.appendChild(button_proceed);
                        ons_col_button_proceed.appendChild(div_button_proceed);

                        ons_row_button.appendChild(ons_col_button_cart);
                        ons_row_button.appendChild(ons_col_button_proceed);
                        ons_row_button.appendChild(divxxxxx);

                        div_cart.appendChild(ons_row_button);

                      div_detail.appendChild(judul);
                      div_detail.appendChild(garis);
                      div_detail.appendChild(nama_produk);
                      // div_detail.appendChild(jenis_produk);
                      div_detail.appendChild(harga_produk);
                      div_detail.appendChild(enter);
                      div_detail.appendChild(deskripsi_produk);

                      div.appendChild(div_separated);
                      div.appendChild(div_detail);
                      div.appendChild(div_cart);

                      // button_cart.setAttribute('onclick',"fn.load('cart.html')");

                      var cart = JSON.parse(storage.getItem('cart'));
                      if(cart != null)
                      {
                        var cart_length = cart.length;
                        storage.setItem("cart", JSON.stringify(cart));

                        var icon = document.getElementById('cart_icon2');
                        icon.innerHTML = cart_length;
                      }

                      var id          = produk["id_produk"];
                      var harga       = document.getElementById('harga_produk').innerHTML;
                      var quantity    = 1;
                      var arrProduk   = new Array();

                      arrProduk[0]    = id;
                      arrProduk[1]    = parseInt(harga.replace(/\D/g,''));
                      arrProduk[2]    = quantity;
                      arrProduk[3]    = produk["gambar_produk"][0]["src"];
                      arrProduk[4]    = produk["nama_produk"];

                      button_cart.setAttribute('onclick',"fn.addToCart('"+JSON.stringify(arrProduk)+"')");

                      button_proceed.setAttribute('onclick',"fn.proceed('"+JSON.stringify(arrProduk)+"')");

                    }, 10);
                }

                else if(page == "cart.html"){

                  // console.log(JSON.parse(storage.getItem("cart")));
                  var content = document.getElementById('content');
                  var menu = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));
                    
                    setTimeout(function() {
                      var cart_main = document.getElementById('cart_main');
                      var totalvalue = 0;

                      arrCart = JSON.parse(storage.getItem("cart"));

                      var counter = 1;
                    if(arrCart != null)
                    {
                      if(arrCart.length != 0)
                      {
                      for( i = 0; i < arrCart.length; i++){
                        var id_div1       = 'hidden_div';
                        var id_div2       = counter.toString();
                        var id_div        = id_div1.concat(id_div2);

                        var div_produk    = document.createElement('div');
                        div_produk.setAttribute("class",'sub-cart-item panel panel-default');
                        div_produk.setAttribute("id", id_div);    

                        var ons_row       = document.createElement('ons-row');

                        //Image

                        var ons_image     = document.createElement('ons-col');
                        ons_image.setAttribute("class", 'sub-cart-item-img');
                        ons_image.setAttribute("width", '35%');

                        var image         = document.createElement('img');
                        image.setAttribute("src", arrCart[i][3]);

                        //Quantity

                        var ons_quantity  = document.createElement('ons-col');
                        ons_quantity.setAttribute("class", 'quantity');
                        ons_quantity.setAttribute("width", '20%');


                        var id_jumlah1    = 'jumlah';
                        var id_jumlah2    = counter.toString();
                        var id_jumlah     = id_jumlah1.concat(id_jumlah2);

                        var input_number  = document.createElement('input');
                        input_number.setAttribute("id", id_jumlah2);
                        // console.log(counter);
                        input_number.setAttribute("value", arrCart[i][2]);
                        input_number.setAttribute("type", 'number');
                        input_number.setAttribute("class", 'form-control');
                        input_number.setAttribute("min", 1);

                        input_number.addEventListener("keypress", function (evt) {
                            if (evt.which < 48 || evt.which > 57)
                            {
                                evt.preventDefault();
                            }
                        });

                      
                        input_number.addEventListener("change", function(e) {
                          var index       = parseInt(this.id)-1;


                          var arrCart;
                          if(JSON.parse(storage.getItem("cart")) == null){
                           arrCart = new Array();
                          }
                          else{
                           arrCart = JSON.parse(storage.getItem("cart"));
                          }
                          var arrProduk;
                          if(JSON.parse(storage.getItem("cart")) != null){
                            arrProduk = arrCart[index];
                            console.log(this.id);
                             
                            var arrInput      = new Array();
                            console.log(this.id);
                            console.log(arrCart[index]);

                            var idInput       = arrProduk[0];
                            var hargaInput    = arrProduk[1];
                            var quantityInput = parseInt(document.getElementById(this.id).value);
                            console.log(document.getElementById(this.id).value);

                            if(isNaN(quantityInput)  || quantityInput == 0)
                            {
                              quantityInput = 1;
                              document.getElementById(this.id).value = 1;
                            }

                            arrInput[0]    = idInput;
                            arrInput[1]    = hargaInput
                            arrInput[2]    = quantityInput;
                            arrInput[3]    = arrProduk[3];
                            arrInput[4]    = arrProduk[4];

                            if(arrProduk[5] != null)
                            {
                              arrInput[5]    = arrProduk[5];
                              arrInput[6]    = arrProduk[6];
                              arrInput[7]    = arrProduk[7];
                            }

                            arrCart.splice(index , 1, arrInput);
                                   
                            storage.setItem("cart", JSON.stringify(arrCart));
                            console.log(JSON.parse(storage.getItem("cart")));

                            var cart_main         = document.getElementById('cart_main');
                            var child             = document.getElementById('div_process');
                            cart_main.removeChild(child);

                            var div_process       = document.createElement('div');
                            div_process.setAttribute("class", 'process-item');
                            div_process.setAttribute("id", 'div_process');

                            var ons_rowitem       = document.createElement('ons-row');

                            var ons_processitem   = document.createElement('ons-col');
                            ons_processitem.setAttribute("class", 'sub-process-item');
                            var processbutton     = document.createElement('ons-button');
                            processbutton.setAttribute("id", 'proceed');
                            processbutton.setAttribute("class", 'tombol-proceed ion-ios-cart-outline button button--tappable');
                            processbutton.setAttribute("onclick", "fn.load('proceed.html')");
                            var proceed           = document.createTextNode('Proceed');
                        
                            var ons_processdetail = document.createElement('ons-col');
                            ons_processdetail.setAttribute("class", 'sub-process-detail');

                            totalvalue=0;

                            for(i = 0; i<arrCart.length; i++){
                              totalvalue+=arrCart[i][2]*arrCart[i][1]
                            }

                            moneyFormat(totalvalue);

                            var total       = document.createElement('p');
                            total.innerHTML =  " Total: <b>"+formattedtotal+",-</b>";

                            //Append Process
                            processbutton.appendChild(proceed);

                            ons_processitem.appendChild(processbutton);
                            ons_processdetail.appendChild(total);

                            ons_rowitem.appendChild(ons_processitem);
                            ons_rowitem.appendChild(ons_processdetail);

                            div_process.appendChild(ons_rowitem);

                            cart_main.appendChild(div_process);
                          }
                        }, false);

                        var labelquantity         = document.createElement('label');
                        labelquantity.htmlFor     = 'number';
                        labelquantity.innerHTML   = 'Quantity';

                        //Detail

                        var ons_detail            = document.createElement('ons-col');
                        ons_detail.setAttribute("class", 'sub-cart-item-detail');

                        var harga_produk          = document.createElement('p');
                        moneyFormat(arrCart[i][1]);
                        harga_produk.innerHTML    = "<b>"+formattedtotal+",-</b>";
                        var nama_produk           = document.createElement('p');
                        nama_produk.innerHTML     = "<b>"+arrCart[i][4]+"</b>";


                        var br            = document.createElement('br');

                        var button        = document.createElement('button');
                        button.setAttribute("class", 'tombol-remove');
                        button.setAttribute("onclick", "fn.deleteItem('"+JSON.stringify(arrCart[i])+"','"+id_div+"')");

                        var remove        = document.createElement('p');
                        remove.setAttribute("class", 'trash ion-trash-b');
                        remove.innerHTML  = " Remove";

                        //Append Lvl 1

                        ons_image.appendChild(image);

                        ons_quantity.appendChild(labelquantity);
                        ons_quantity.appendChild(input_number);
                       
                        ons_detail.appendChild(nama_produk);
                        ons_detail.appendChild(harga_produk);

                        if(arrCart[i][6] != null)
                        {
                          for (var k = 0; k < arrCart[i][6].length; k++) {
                            var variasi_produk              = document.createElement('p');
                            variasi_produk.innerHTML        = "<b>"+arrCart[i][6][k]+" : "+arrCart[i][7][k]+"</b>";
                            ons_detail.appendChild(variasi_produk);
                          }
                        }

                        ons_detail.appendChild(br);
                        button.appendChild(remove);
                        ons_detail.appendChild(button);

                        //Append Lvl 2
                        ons_row.appendChild(ons_image);
                        ons_row.appendChild(ons_quantity);
                        ons_row.appendChild(ons_detail);

                        //Append Lvl 3
                        div_produk.appendChild(ons_row);

                        //Append Lvl 4
                        cart_main.appendChild(div_produk);
                        counter++;
                      }
                      // Process
                      var div_process       = document.createElement('div');
                      div_process.setAttribute("class", 'process-item');
                      div_process.setAttribute("id", 'div_process');

                      var ons_rowitem       = document.createElement('ons-row');

                      var ons_processitem   = document.createElement('ons-col');
                      ons_processitem.setAttribute("class", 'sub-process-item');
                      var processbutton     = document.createElement('ons-button');
                      processbutton.setAttribute("id", 'proceed');
                      processbutton.setAttribute("class", 'tombol-proceed ion-ios-cart-outline button button--tappable');
                      processbutton.setAttribute("onclick", "fn.load('proceed.html')");
                      var proceed           = document.createTextNode(' Proceed');
                  

                      var ons_processdetail = document.createElement('ons-col');
                      ons_processdetail.setAttribute("class", 'sub-process-detail');

                      totalvalue = 0;

                      for(i = 0; i<arrCart.length; i++){
                        totalvalue+=arrCart[i][2]*arrCart[i][1]
                      }

                      moneyFormat(totalvalue);

                      var total       = document.createElement('p');
                      total.innerHTML =  " Total: <b>"+formattedtotal+",-</b>";

                      //Append Process
                      processbutton.appendChild(proceed);

                      ons_processitem.appendChild(processbutton);
                      ons_processdetail.appendChild(total);

                      ons_rowitem.appendChild(ons_processitem);
                      ons_rowitem.appendChild(ons_processdetail);

                      div_process.appendChild(ons_rowitem);

                      cart_main.appendChild(div_process);
                    }
                    else
                    {
                      var div_empty           = document.createElement('div');
                      div_empty.setAttribute('class', "panel-confirmation");

                      var div_emptycontent    = document.createElement('div');
                      div_emptycontent.setAttribute('class', 'ion-ios-cart');
                      div_emptycontent.setAttribute('style', 'font-size: 90px; color:gray;');

                      var text                = document.createElement('p');
                      text.setAttribute('style', 'font-size: 17px;');
                      text.innerHTML          = "Tidak Ada Item di Cart Anda";

                      div_emptycontent.appendChild(text);
                      div_empty.appendChild(div_emptycontent);
                      cart_main.appendChild(div_empty);
                    }
                  }
                  else
                  {
                    var div_empty           = document.createElement('div');
                    div_empty.setAttribute('class', "panel-confirmation");

                    var div_emptycontent    = document.createElement('div');
                    div_emptycontent.setAttribute('class', 'ion-ios-cart');
                    div_emptycontent.setAttribute('style', 'font-size: 90px; color:gray;');

                    var text                = document.createElement('p');
                    text.setAttribute('style', 'font-size: 17px;');
                    text.innerHTML          = "Tidak Ada Item di Cart Anda";

                    div_emptycontent.appendChild(text);
                    div_empty.appendChild(div_emptycontent);
                    cart_main.appendChild(div_empty);
                  }
                  }
                )
              }
              else if(page == "shipping.html")
              {
                  var store_location    = JSON.parse(storage.getItem('store_location'));
                  storage.removeItem("service");
                  
                  var content = document.getElementById('content');
                  var menu    = document.getElementById('menu');
                  content.load(page)
                    .then(menu.close.bind(menu));


                  setTimeout(function(){
                      if(store_location.length == 1)
                      {
                        var shipping_origin = document.getElementById('shipping_origin');
                        shipping_origin.remove();
                      }

                      var provinsi          = JSON.parse(storage.getItem("rajaongkir"));

                      var kurir_dropdown = document.getElementById('kurir_shipping');
                      console.log(newdata);
                      kurir_dropdown.setAttribute('onchange', "fn.shippingDropdownChange('kurir', '', "+JSON.stringify(newdata)+")");

                      if(store_location.length > 1)
                      {
                        var provinsi_dropdown_origin = document.getElementById('provinsi_shipping_origin');
                        provinsi_dropdown_origin.setAttribute('onchange', "fn.shippingDropdownChange('provinsi', 'origin', "+JSON.stringify(newdata)+")");
                      }
                      
                      var provinsi_dropdown_destination = document.getElementById('provinsi_shipping_destination');
                      provinsi_dropdown_destination.setAttribute('onchange', "fn.shippingDropdownChange('provinsi', 'destination', "+JSON.stringify(newdata)+")");

                      for (var j = 0; j < provinsi.length; j++) {
                        if(j == 0)
                        {
                          if(store_location.length > 1)
                          {
                            var option              = document.createElement('option');
                            option.setAttribute('value', "blank");
                            option.innerHTML        = "Choose one option";
                            provinsi_dropdown_origin.appendChild(option);
                          }

                          var option              = document.createElement('option');
                          option.setAttribute('value', "blank");
                          option.innerHTML        = "Choose one option";
                          provinsi_dropdown_destination.appendChild(option);
                        }

                        // console.log(store_location.length);
                        if(provinsi[j]["daftar_kota"].length != 0)
                        {
                          // console.log("masuk");
                          // var option              = document.createElement('option');
                          // option.setAttribute('value', provinsi[j]["province_id"]);
                          // option.innerHTML        = provinsi[j]["province"];
                          // provinsi_dropdown_origin.appendChild(option);

                          var option              = document.createElement('option');
                          option.setAttribute('value', provinsi[j]["province_id"]);
                          option.innerHTML        = provinsi[j]["province"];
                          provinsi_dropdown_destination.appendChild(option);
                        }
                      }

                      console.log(store_location);
                      if(store_location.length > 1)
                      {
                        for (var i = 0; i < store_location.length; i++) {
                          var option              = document.createElement('option');
                          option.setAttribute('value', store_location[i]["province_id"]);
                          option.innerHTML        = store_location[i]["province"];
                          provinsi_dropdown_origin.appendChild(option);
                        }

                        var kota_dropdown_origin = document.getElementById('kota_shipping_origin');
                        kota_dropdown_origin.setAttribute('onchange', "fn.shippingDropdownChange('kota', 'origin', "+JSON.stringify(newdata)+")");
                      }

                      var kota_dropdown_destination = document.getElementById('kota_shipping_destination');
                      kota_dropdown_destination.setAttribute('onchange', "fn.shippingDropdownChange('kota', 'destination', "+JSON.stringify(newdata)+")");

                      if(store_location.length > 1)
                      {
                        if(provinsi_dropdown_origin.value == "blank")
                        {
                          var option              = document.createElement('option');
                          option.setAttribute('value', "blank");
                          option.innerHTML        = "Choose province first";
                          kota_dropdown_origin.appendChild(option);
                        }
                      }
                      if(provinsi_dropdown_destination.value == "blank")
                      {
                        var option              = document.createElement('option');
                        option.setAttribute('value', "blank");
                        option.innerHTML        = "Choose province first";
                        kota_dropdown_destination.appendChild(option);
                      }

                  }, 10);
              }
              else if(page == "shipping2.html")
              {
                var content = document.getElementById('content');
                var menu    = document.getElementById('menu');
                content.load(page)
                  .then(menu.close.bind(menu));

                setTimeout(function(){

                  if(storage.getItem("service") != null)
                  {
                    var back_button_shipping = document.getElementById('back_button_shipping');
                    back_button_shipping.setAttribute('onclick', "fn.load('shipping.html', "+JSON.stringify(JSON.parse(storage.getItem("service"))["customer_data"])+")");

                    var data      = JSON.parse(storage.getItem("service"))["service"];
                  }
                  else
                  {
                    console.log(newdata);
                    var back_button_shipping = document.getElementById('back_button_shipping');
                    back_button_shipping.setAttribute('onclick', "fn.load('shipping.html', "+JSON.stringify(JSON.parse(newdata)["customer_data"])+")");

                    var data        = JSON.parse(newdata)["service"];
                  }

                  var service       = document.getElementById('shipping_service');

                  var h4            = document.createElement('h4');
                  h4.innerHTML      = "Pilih Jasa";

                  var hr            = document.createElement('hr');

                  service.appendChild(h4);
                  service.appendChild(hr);

                  // console.log(data.length);
                  // console.log(data);

                    for (var i = 0; i < data.length; i++) {

                      var nama_service        = document.createElement('p');
                      nama_service.innerHTML  = "<b>"+data[i]["name"]+"</b>";
                      nama_service.innerHTML  += "<br>";

                      service.appendChild(nama_service);

                      // service.innerHTML = "<b>"+data[i]["name"]+"</b>";
                      // service.innerHTML += "<br>";
                      // service.innerHTML += "<br>";
                      if(data[i]["costs"].length != 0)
                      {
                        for (var j = 0; j < data[i]["costs"].length; j++) { 

                          var div                 = document.createElement('div');
                          div.setAttribute('class', 'col-lg-6');

                          var div2                = document.createElement('div');
                          div2.setAttribute('class', 'input-group kurir'); 

                          var span                = document.createElement('span');
                          span.setAttribute('class', 'input-group-addon'); 

                          var input               = document.createElement('input');
                          input.setAttribute('type', 'radio');
                          input.setAttribute('name', 'optradio');

                          // console.log(newdata);
                          // console.log(JSON.parse(newdata));

                          if(storage.getItem("service") != null)
                          {
                             input.setAttribute('onclick', "fn.radioServiceShipping('"+j+"' , "+storage.getItem("service")+")");
                          }
                          else
                          {
                              input.setAttribute('onclick', "fn.radioServiceShipping('"+j+"' , "+JSON.parse(newdata)+")");
                          }

                          span.appendChild(input);

                          var div_border      = document.createElement('div');
                          div_border.setAttribute('class', 'custom-border');

                          var nomor_service        = document.createElement('p');
                          nomor_service.innerHTML  = "Jasa "+(j+1)+" : "+data[i]["costs"][j]["description"]+" ("+data[i]["costs"][j]["service"]+")";

                          div2.appendChild(span);
                          div_border.appendChild(nomor_service);

                          for (var k = 0; k < data[i]["costs"][j]["cost"].length; k++) {
                            var estimasi          = document.createElement('p');

                            if(data[i]["costs"][j]["cost"][k]["etd"] == "")
                            {
                              estimasi.innerHTML  = "Estimasi : hari yang sama";
                            }
                            else
                            {
                              estimasi.innerHTML  = "Estimasi : "+data[i]["costs"][j]["cost"][k]["etd"]+" hari";
                            }

                            var harga             = document.createElement('p');
                            moneyFormat(data[i]["costs"][j]["cost"][k]["value"]);
                            harga.innerHTML       = "Harga : "+formattedtotal+",-";

                            var note              = document.createElement('p');
                            if(data[i]["costs"][j]["cost"][k]["note"] == "")
                            {
                              note.innerHTML      = "Note : -";
                            }
                            else
                            {
                              note.innerHTML      = "Note : "+data[i]["costs"][j]["cost"][k]["note"];
                            }
                            div_border.appendChild(estimasi);
                            div_border.appendChild(harga);
                            div_border.appendChild(note);
                          }
                          div2.appendChild(div_border);

                          div.appendChild(div2);
                          service.appendChild(div);
                        }
                      }
                      else
                      {
                        console.log("masuk");
                        var nama_service        = document.createElement('p');
                        nama_service.setAttribute('style', 'color:red');
                        nama_service.innerHTML  = "Mohon maaf service tidak dapat menjangkau kota anda saat ini";
                        nama_service.innerHTML  += "<br>";

                        service.appendChild(nama_service);
                      }

                      var hr2                   = document.createElement('hr');

                      var next_button           = document.createElement('ons-button');
                      next_button.innerHTML     = "Lanjutkan";
                      next_button.setAttribute('id', 'shipping_next_button');
                      next_button.setAttribute('modifier', 'large');
                      next_button.setAttribute('disabled', 'true');

                      service.appendChild(hr2);
                      service.appendChild(next_button);
                  }

                    //   service.innerHTML += "Jasa"+(j+1)+" : "+data[i]["costs"][j]["description"]+" ("+data[i]["costs"][j]["service"]+")";
                    //   service.innerHTML += "<br>";

                    //     service.innerHTML += "<br>";
                    //     service.innerHTML += "Harga : Rp. "+data[i]["costs"][j]["cost"][k]["value"];
                    //     service.innerHTML += "<br>";

                    //     if(data[i]["costs"][j]["cost"][k]["note"] == "")
                    //     {
                    //       service.innerHTML += "Note : -";
                    //     }
                    //     else
                    //     {
                    //       service.innerHTML += "Note : "+data[i]["costs"][j]["cost"][k]["note"];
                    //     }

                    //   service.innerHTML += "<br>";
                    //   service.innerHTML += "<br>";

                }, 10);
              }
              else if(page == "pembayaran.html")
              {
                var content = document.getElementById('content');
                var menu    = document.getElementById('menu');
                content.load(page)
                  .then(menu.close.bind(menu));


                var arrCart                     = new Array();
                arrCart                         = JSON.parse(storage.getItem("cart"));
                var biaya_transaksi_temp        = 0;

                for(i = 0; i<arrCart.length; i++){
                  biaya_transaksi_temp         += arrCart[i][2]*arrCart[i][1];
                }

                //untuk sementara
                // console.log(JSON.parse(JSON.stringify(newdata)));

                var biaya_kurir_temp            = JSON.parse(JSON.stringify(newdata))["harga"];
                var total_temp                  = biaya_transaksi_temp + biaya_kurir_temp;

                setTimeout(function() {

                  //Bagian Transfer Bank

                  var panel_veritrans           = document.getElementById('panel_veritrans');
                  panel_veritrans.setAttribute('style', 'display:none');

                  var metode                    = document.getElementById('metode');
                  metode.setAttribute('onchange', "fn.metodeDropdownChange("+JSON.stringify(newdata)+")");

                  var biaya_transaksi           = document.getElementById("biaya_transaksi_bank");
                  moneyFormat(biaya_transaksi_temp);
                  biaya_transaksi.innerHTML     = formattedtotal+",-";
                  var biaya_kurir               = document.getElementById("biaya_kurir_bank");
                  moneyFormat(biaya_kurir_temp);
                  biaya_kurir.innerHTML         = formattedtotal+",-";
                  var total                     = document.getElementById("total_bank");
                  moneyFormat(total_temp);
                  total.innerHTML               = formattedtotal+",-";

                  var biaya_transaksi           = document.getElementById("biaya_transaksi_veritrans");
                  moneyFormat(biaya_transaksi_temp);
                  biaya_transaksi.innerHTML     = formattedtotal+",-";
                  var biaya_kurir               = document.getElementById("biaya_kurir_veritrans");
                  moneyFormat(biaya_kurir_temp);
                  biaya_kurir.innerHTML         = formattedtotal+",-";
                  var total                     = document.getElementById("total_veritrans");
                  moneyFormat(total_temp);
                  total.innerHTML               = formattedtotal+",-";
                  var button_lanjutkan_pembayaran = document.getElementById("button_lanjutkan_pembayaran");
                  button_lanjutkan_pembayaran.setAttribute('onclick', "fn.proceedSummary("+JSON.stringify(newdata)+")");

                }, 10);
              }
              else if(page == "summary1.html")
              {
                var content                         = document.getElementById('content');
                var menu                            = document.getElementById('menu');
                content.load(page)
                  .then(menu.close.bind(menu));

                setTimeout(function() {
                  var biaya_total                   = 0;
                  var arrCart                       = JSON.parse(storage.getItem("cart"));
                  var customer                      = JSON.parse(JSON.parse(newdata)["customer_data"]);

                  console.log(customer);
                  // console.log(JSON.parse(JSON.parse(newdata)["customer_data"]));
                  // console.log(JSON.parse(JSON.stringify(newdata)));
                  var data_customer                 = document.getElementById('data_customer');

                  var nama_customer                 = document.createElement('p');
                  nama_customer.innerHTML           = customer["first_name"]+" "+customer["last_name"];
                  var nomor_telepon_customer        = document.createElement('p');
                  nomor_telepon_customer.innerHTML  = customer["phone"];
                  var alamat_customer               = document.createElement('p');
                  alamat_customer.innerHTML         = customer["alamat"];
                  var kota_customer                 = document.createElement('p');
                  kota_customer.innerHTML           = customer["kota"];

                  data_customer.appendChild(nama_customer);
                  data_customer.appendChild(nomor_telepon_customer);
                  data_customer.appendChild(alamat_customer);
                  data_customer.appendChild(kota_customer);

                  var barang_belanja                = document.getElementById('barang_belanja');

                  var panel_heading                 = document.createElement('div');
                  panel_heading.setAttribute('class', "panel-heading panel-style");
                  panel_heading.innerHTML           = "Barang Belanja";

                  var panel_body                    = document.createElement('div');
                  panel_body.setAttribute('class', "panel-body bodypanel");

                  var item_confirm                  = document.createElement('div');
                  item_confirm.setAttribute('class', "item-confirm");
                  // console.log(arrCart);

                  for (var i = 0; i < arrCart.length; i++) {
                    var ons_row                     = document.createElement('ons-row');
                    ons_row.setAttribute('style', "margin-bottom:5px;");

                    var ons_col_img                 = document.createElement('ons-col');
                    ons_col_img.setAttribute('style', "width:20%;");
                    var img                         = document.createElement('img');
                    img.setAttribute('src', arrCart[i][3]);
                    ons_col_img.appendChild(img);

                    var ons_col_detil               = document.createElement('ons-col');
                    ons_col_detil.setAttribute('style', "width:50%;padding-left:10px;");

                    var nama_produk                 = document.createElement('p');
                    nama_produk.innerHTML           = arrCart[i][4];

                    var quantity_produk             = document.createElement('span');
                    quantity_produk.innerHTML       = "Quantity : "+arrCart[i][2];
                    quantity_produk.setAttribute('style', "color:grey;");

                    var br                          = document.createElement('br');

                    ons_col_detil.appendChild(nama_produk);
                    ons_col_detil.appendChild(quantity_produk);
                    ons_col_detil.appendChild(br);

                    if(arrCart[i][6] != null)
                    {
                      for (var j = 0; j < arrCart[i][6].length; j++) {
                        var variasi_produk            = document.createElement('span');
                        variasi_produk.innerHTML      = arrCart[i][6][j]+" : "+arrCart[i][7][j];
                        variasi_produk.setAttribute('style', "color:grey;");

                        var br1                       = document.createElement('br');

                        ons_col_detil.appendChild(variasi_produk);
                        ons_col_detil.appendChild(br1);
                      }
                    }


                    var ons_col_harga               = document.createElement('ons-col');
                    moneyFormat(arrCart[i][1]*arrCart[i][2]);
                    ons_col_harga.innerHTML         = "<p><b>"+formattedtotal+",-</b></p>";
                    ons_col_harga.setAttribute('style', "width:30%;");

                    ons_row.appendChild(ons_col_img);
                    ons_row.appendChild(ons_col_detil);
                    ons_row.appendChild(ons_col_harga);

                    biaya_total         += arrCart[i][2]*arrCart[i][1];

                    item_confirm.appendChild(ons_row);
                  }


                  //Shipping item =====================================================================
                  // console.log(JSON.parse(JSON.stringify(newdata)));

                  var data = JSON.parse(newdata);

                  // console.log(data);

                  var ons_row                     = document.createElement('ons-row');
                  ons_row.setAttribute('style', "margin-bottom:5px;");

                  var ons_col_img                 = document.createElement('ons-col');
                  ons_col_img.setAttribute('style', "width:20%;");
                  var img                         = document.createElement('img');
                  img.setAttribute('src', "img/shipping.png");
                  ons_col_img.appendChild(img);

                  var ons_col_detil               = document.createElement('ons-col');
                  ons_col_detil.setAttribute('style', "width:50%;padding-left:10px;");

                  var nama_kurir                  = document.createElement('p');
                  nama_kurir.innerHTML            = data["kurir"];

                  var nama_service                = document.createElement('p');
                  nama_service.innerHTML          = data["service"];
                  nama_service.setAttribute('style', "color:grey;");
                  nama_service.setAttribute('style', "font-size:10px;");

                  var ship_origin                 = document.createElement('p');
                  ship_origin.innerHTML           = "dari :"+data["city_origin"];
                  ship_origin.setAttribute('style', "color:grey;");
                  ship_origin.setAttribute('style', "font-size:10px;");

                  var ship_destination            = document.createElement('p');
                  ship_destination.innerHTML      = "ke :"+data["city_destination"];
                  ship_destination.setAttribute('style', "color:grey;");
                  ship_destination.setAttribute('style', "font-size:10px;");

                  var br                          = document.createElement('br');

                  ons_col_detil.appendChild(nama_kurir);
                  ons_col_detil.appendChild(nama_service);
                  ons_col_detil.appendChild(ship_origin);
                  ons_col_detil.appendChild(ship_destination);
                  ons_col_detil.appendChild(br);

                  var ons_col_harga               = document.createElement('ons-col');
                  moneyFormat(data["harga"]);
                  ons_col_harga.innerHTML         = "<p><b>"+formattedtotal+",-</b></p>";
                  ons_col_harga.setAttribute('style', "width:30%;");

                  ons_row.appendChild(ons_col_img);
                  ons_row.appendChild(ons_col_detil);
                  ons_row.appendChild(ons_col_harga);

                  item_confirm.appendChild(ons_row);

                  biaya_total += data["harga"];

                  //===================================================================================

                  var garis                         = document.createElement('hr');
                  garis.setAttribute('style', "margin:10px;");

                  var ons_row_total                 = document.createElement('ons-row');
                  ons_row_total.setAttribute('style', "margin-bottom:5px;");

                  var ons_col_1                     = document.createElement('ons-col');
                  ons_col_1.setAttribute('style', "width:20%;");
                  var ons_col_2                     = document.createElement('ons-col');
                  ons_col_2.innerHTML               = "<b>Grand Total</b>";
                  ons_col_2.setAttribute('style', "width:50%;");
                  var ons_col_3                     = document.createElement('ons-col');
                  moneyFormat(biaya_total);
                  ons_col_3.innerHTML               = "<b>"+formattedtotal+",-</b>";
                  ons_col_3.setAttribute('style', "width:30%;");

                  ons_row_total.appendChild(ons_col_1);
                  ons_row_total.appendChild(ons_col_2);
                  ons_row_total.appendChild(ons_col_3);

                  item_confirm.appendChild(garis);
                  item_confirm.appendChild(ons_row_total);
                  panel_body.appendChild(item_confirm);
                  barang_belanja.appendChild(panel_heading);
                  barang_belanja.appendChild(panel_body);

                  var total_transaksi               = document.getElementById('total_transaksi');
                  moneyFormat(biaya_total);
                  total_transaksi.innerHTML         = formattedtotal+",-";

                  var checkout_button               = document.getElementById('checkout');

                  if(cek == "veritrans")
                  {
                    checkout_button.setAttribute('onclick', "showDialog('dialog-2' , "+newdata+", 'veritrans')");
                  }
                  else
                  {
                    checkout_button.setAttribute('onclick', "showDialog('dialog-2' , "+newdata+")");
                  }

                  console.log(JSON.parse(newdata));

                  var back_button_summary1 = document.getElementById("back_button_summary1");
                  back_button_summary1.setAttribute('onclick', "fn.load('pembayaran.html' , "+newdata+")");


                }, 10);
              }
              else if(page == "checkout.html")
              {
                hideDialog('dialog-2');

                setTimeout(function(){
                  var id_order = fn.proceedOrder(newdata, cek);
                }, 15);

              }
              else if(page == "confirmation.html")
              {
                var content = document.getElementById('content');
                var menu    = document.getElementById('menu');
                content.load(page)
                  .then(menu.close.bind(menu));
                    setTimeout(function() {

                      console.log(newdata);

                      if(newdata == 'konfirmasi')
                      {
                        $.notify("Konfirmasi telah dikirim", {position :"bottom center", className: 'success'});
                      }
                      // if(newdata == 'order')
                      // {
                      //   $.notify("Resi telah dikirim ke email anda, harap melakukan konfirmasi", {position :"bottom center", className: 'success'});
                      // }

                      var arrOrder = JSON.parse(storage.getItem("proceed"));
                      var arrCart;

                      var main_div = document.getElementById("confirm_container");

                      console.log(arrOrder);

                      if(arrOrder != null)
                      {
                        if(arrOrder.length != 0)
                        {
                           // console.log(arrOrder.length);
                          for(i=0;i<arrOrder.length;i++){
                            var orderid = arrOrder[i][0];
                            arrCart     = arrOrder[i][1];

                            // console.log(orderid);
                            // console.log(arrCart);

                            var div_order = document.createElement("div");  

                            div_order.setAttribute('id', 'div_order'.concat(i.toString()));
                            div_order.setAttribute('class', 'process panel panel-default');

                            var h5 = document.createElement("h5");
                            h5.setAttribute('style', 'text-align:center;');
                            h5.innerHTML = "Kode Transaksi";

                            var p = document.createElement("p");
                            p.setAttribute('style', 'text-align:center; font-size:12pt;');

                            p.innerHTML = "<b><i> #"+orderid+"</i></b>";

                            div_order.appendChild(h5);
                            div_order.appendChild(p);

                            var total = 0;

                            for(j=0;j<arrCart.length;j++)
                            {
                              var ons_row = document.createElement("ons-row");
                              ons_row.setAttribute('id', 'ons_row'.concat(j.toString()));
                              ons_row.setAttribute('style', "margin-bottom:5px;");

                              var ons_col = document.createElement("ons-col");
                              ons_col.setAttribute('style',"padding-left: 10px; -webkit-box-flex: 0; flex: 0 0 70%; max-width: 70%;");
                              ons_col.setAttribute('width',"70%;");

                              var p1 = document.createElement("p");
                              p1.setAttribute('style',"margin:0px;")
                              p1.innerHTML = arrCart[j][4];

                              var span = document.createElement("span");
                              span.setAttribute('style','color:grey;');
                              span.innerHTML = "Quantity: "+arrCart[j][2];
                                
                              var ons_col0 = document.createElement("ons-col");
                              ons_col0.setAttribute("style", "-webkit-box-flex: 0; flex: 0 0 30%; max-width: 30%;")
                              ons_col0.setAttribute('width',"30%");

                              var p2 = document.createElement("p");
                              moneyFormat(arrCart[j][1]*arrCart[j][2]);
                              p2.innerHTML = "<b>"+formattedtotal+",-</b>";
                              total+=arrCart[j][1]*arrCart[j][2];

                              ons_col.appendChild(p1);
                              ons_col.appendChild(span);
                              ons_col0.appendChild(p2);

                              ons_row.appendChild(ons_col);
                              ons_row.appendChild(ons_col0);

                              div_order.appendChild(ons_row);

                              if(j == arrCart.length-1)
                              {
                                var ons_row = document.createElement("ons-row");
                                ons_row.setAttribute('id', 'ons_row'.concat(j.toString()));
                                ons_row.setAttribute('style', "margin-bottom:5px;");

                                var ons_col = document.createElement("ons-col");
                                ons_col.setAttribute('style',"padding-left: 10px; -webkit-box-flex: 0; flex: 0 0 70%; max-width: 70%;");
                                ons_col.setAttribute('width',"70%;");

                                var p1 = document.createElement("p");
                                p1.setAttribute('style',"margin:0px;")
                                p1.innerHTML = arrOrder[i][2]["service"]+"("+arrOrder[i][2]["city_origin"]+"-"+arrOrder[i][2]["city_destination"]+")";
                                  
                                var ons_col0 = document.createElement("ons-col");
                                ons_col0.setAttribute("style", "-webkit-box-flex: 0; flex: 0 0 30%; max-width: 30%;")
                                ons_col0.setAttribute('width',"30%");

                                var p2 = document.createElement("p");
                                moneyFormat(arrOrder[i][2]["harga"]);
                                p2.innerHTML = "<b>"+formattedtotal+",-</b>";
                                total+=arrOrder[i][2]["harga"];

                                ons_col.appendChild(p1);
                                ons_col0.appendChild(p2);

                                ons_row.appendChild(ons_col);
                                ons_row.appendChild(ons_col0);

                                div_order.appendChild(ons_row);
                              }

                            }

                            var hr       = document.createElement("hr");
                            hr.setAttribute("style","margin:10px;");

                            div_order.appendChild(hr);

                            var ons_row0 = document.createElement("ons-row");
                            ons_row0.setAttribute("style","margin-bottom:10px;");
                            var ons_col1 = document.createElement("ons-col");
                            ons_col1.setAttribute("width","20%");
                            var ons_col2 = document.createElement("ons-col");
                            ons_col2.setAttribute("width","50%");
                            ons_col2.innerHTML = "<b>Grand Total: </b>";
                            var ons_col3 = document.createElement("ons-col");
                            ons_col3.setAttribute("width","30%");
                            moneyFormat(total);
                            ons_col3.innerHTML = "<b>"+formattedtotal+",-</b>";

                            ons_row0.appendChild(ons_col1);
                            ons_row0.appendChild(ons_col2);
                            ons_row0.appendChild(ons_col3);

                            div_order.appendChild(ons_row0);

                            ons_button = document.createElement("ons-button");
                            ons_button.setAttribute("modifier","large");
                            ons_button.setAttribute("onclick","fn.load('form.html', "+orderid+")");
                            ons_button.innerHTML = "Konfirmasi";

                            div_order.appendChild(ons_button);

                            main_div.appendChild(div_order);
                          }
                        }
                        else{
                          var order_none    = document.createElement("div");
                          order_none.setAttribute("class","panel-confirmation");

                          var order_nonemsg = document.createElement("div");
                          order_nonemsg.setAttribute("class","ion-android-done");
                          order_nonemsg.setAttribute("style","font-size: 90px; color:green;");
                          
                          var noorder       = document.createTextNode("Tidak ada Konfirmasi Pembayaran");

                          order_none.appendChild(order_nonemsg);
                          order_none.appendChild(noorder);

                          main_div.appendChild(order_none);
                        }                      
                      }
                      else{
                        var order_none      = document.createElement("div");
                        order_none.setAttribute("class","panel-confirmation");

                        var order_nonemsg   = document.createElement("div");
                        order_nonemsg.setAttribute("class","ion-android-done");
                        order_nonemsg.setAttribute("style","font-size: 90px; color:green;");
                        
                        var noorder         = document.createTextNode("Tidak ada Konfirmasi Pembayaran");

                        order_none.appendChild(order_nonemsg);
                        order_none.appendChild(noorder);

                        main_div.appendChild(order_none);
                      }
                    });
              }
              else if(page == "daftarbank.html")
              {
                var content = document.getElementById('content');
                var menu    = document.getElementById('menu');
                content.load(page)
                  .then(menu.close.bind(menu));
              }
              else if(page == "form.html")
              {
                //Button Konfirmasi ditekan
                var content = document.getElementById('content');
                var menu    = document.getElementById('menu');
                content.load(page)
                  .then(menu.close.bind(menu));

                setTimeout(function(){
                  if(newdata != null)
                  {
                    var form_kode_konfirmasi      = document.getElementById('kode_konfirmasi');
                    form_kode_konfirmasi.value    = newdata;
                    form_kode_konfirmasi.disabled = true;
                  }

                  var tahun                       = document.getElementById('tahun');
                  var currentTime                 = new Date();
                  var year                        = currentTime.getFullYear();
                  for (var i = year-4; i <= year; i++) {
                    var option                    = document.createElement('option');
                    option.setAttribute('value', i);
                    option.innerHTML              = i;
                    tahun.appendChild(option);
                  }

                  var tanggal                   = document.getElementById('tanggal');
                  var bulan                     = document.getElementById('bulan');

                  bulan.addEventListener("change", function(e) {                  
                    var jumlahHari = checkDate(bulan, tahun);
                    populateDate(jumlahHari);
                  }, false);

                  tahun.addEventListener("change", function(e) {
                    var jumlahHari = checkDate(bulan, tahun);
                    populateDate(jumlahHari);
                  }, false)

                  var input                       = document.getElementById("nilai_transfer_konfirmasi");
                  input.addEventListener("keypress", function (evt) {
                    if (evt.which < 48 || evt.which > 57)
                    {
                        evt.preventDefault();
                    }
                  });

                }, 10);
              }
            };

            window.fn.buttonClick = function(produk, newdata) {
              storage.removeItem("produk");
              storage.setItem("produk", JSON.stringify(produk));
              storage.removeItem("filter");
              fn.load('detail.html',JSON.stringify(newdata));
            };

            window.fn.proceed = function(arrProduk){
              fn.addToCart(arrProduk, true);
              fn.load('proceed.html');
            }

            window.fn.proceedDataDiri = function(){
              // console.log(JSON.parse(storage.getItem('rajaongkir')));

              var status              = false;
              var first_name          = document.getElementById('nama_depan').value;
              var last_name           = document.getElementById('nama_belakang').value;
              var perusahaan          = document.getElementById('perusahaan').value;
              var alamat              = document.getElementById('alamat_pengiriman').value;
              var kota                = document.getElementById('kota_data_diri').value;
              var kode_pos            = document.getElementById('kode_pos_data_diri').value;
              var provinsi            = document.getElementById('provinsi_data_diri').value;
              var email               = document.getElementById('email');
              var phone               = document.getElementById('nomor_telepon').value;

                if(first_name == "" || alamat == "" || kota == "" ||
                   kode_pos == "" || email.value == "" || !ValidateForm(email) || phone == "")
                {
                  fn.load("proceed.html");

                setTimeout(function(){
                  if(first_name == "")
                  {
                    var span_nama_depan           = document.getElementById('nama_depan_error');
                    span_nama_depan.innerHTML     = " *nama depan harus diisi";
                  }
                  if(alamat == "")
                  {
                    var span_alamat               = document.getElementById('alamat_error');
                    span_alamat.innerHTML         = " *alamat harus diisi";
                  }
                  if(kota == "")
                  {
                    var span_kota                 = document.getElementById('kota_error');
                    span_kota.innerHTML           = " *kota harus diisi";
                  }
                  if(kode_pos == "")
                  {
                    var span_kode_pos             = document.getElementById('kode_pos_error');
                    span_kode_pos.innerHTML       = " *kode pos harus diisi";
                  }
                  if(email.value == "")
                  {
                    var span_email                = document.getElementById('email_error');
                    span_email.innerHTML          = " *email harus diisi";
                  }
                  else if(!ValidateForm(email))
                  {
                    var span_email                = document.getElementById('email_error');
                    span_email.innerHTML          = " *email tidak valid";
                  }
                  if(phone == "")
                  {
                    var span_nomor_telepon        = document.getElementById('nomor_telepon_error');
                    span_nomor_telepon.innerHTML  = " *nomor telepon harus diisi";
                  }

                  //Kalau sudah ada isinya dan tidak error
                  if(first_name != "")
                    {document.getElementById('nama_depan').value = first_name;}
                  if(last_name != "")
                    {document.getElementById('nama_belakang').value = last_name;}
                  if(perusahaan != "")
                    {document.getElementById('perusahaan').value = perusahaan;}
                  if(alamat != "")
                    {document.getElementById('alamat_pengiriman').value = alamat;}
                  if(kota != "")
                    {document.getElementById('kota_data_diri').value = kota;}
                  if(kode_pos != "")
                    {document.getElementById('kode_pos_data_diri').value = kode_pos;}
                  if(provinsi != "")
                    {document.getElementById('provinsi_data_diri').value = provinsi;}
                  if(phone != "")
                    {document.getElementById('nomor_telepon').value = phone;}
                  if(ValidateForm(email))
                    {document.getElementById('email').value = email.value;}
                }, 10);

                }
                else
                {
                  var customer = {
                    "first_name"          : first_name,
                    "last_name"           : last_name,
                    "perusahaan"          : perusahaan,
                    "alamat"              : alamat,
                    "kota"                : kota,
                    "kode_pos"            : kode_pos,
                    "provinsi"            : provinsi,
                    "email"               : email.value,
                    "phone"               : phone,
                  };

                  //customer sebagai parameter newdata
                  fn.load('shipping.html', JSON.stringify(customer));
                  return;
                }
            } 

            function ValidateForm(email){
              if ((email.value==null)||(email.value=="")){
                console.log("disini");
                return false;
              }
              if (checkEmail(email.value)==false){
                console.log("nope, disini");
                return false;
              }
              return true;
            }

            function checkDate(bulan, tahun){
              console.log(bulan.value);
              if(bulan.value == "2"){
                var checkKabisat = parseInt(tahun.value);
                if(checkKabisat%4 == 0){
                  if(checkKabisat%100 == 0){
                    if(checkKabisat%400 == 0){
                      return 29;
                    }
                    else{
                      return 28;
                    }
                  }
                  else{
                    return 29;
                  }
                }
                else{
                  return 28;
                }
              }
              else if(bulan.value == "1" || bulan.value == "3"|| bulan.value == "5" 
                || bulan.value == "7" || bulan.value == "8" || bulan.value == "10" || bulan.value == "12"){
                  return 31;
              }
              else{
                return 30;
              }
            }

            function populateDate(status){
              var tanggal = document.getElementById("tanggal");
              while (tanggal.firstChild) {
                tanggal.removeChild(tanggal.firstChild);
              }

              for(i=0;i<status;i++){
                var child = document.createElement('option');
                child.setAttribute('value', (i+1).toString());
                child.innerHTML = (i+1).toString();
                tanggal.appendChild(child);
              }
            }

            function moneyFormat(price){
              formattedtotal = "";
              if(price === parseInt(price,10)){
                formattedtotal += price.toString();
              }
              else{
                formattedtotal += parseInt(price).toString();
              }
              
              var counterdot=0;
              
              for(z=formattedtotal.length-1;z>=0;z--){
                
                counterdot++
                if(counterdot == 3 && z!=0){
    
                  formattedtotal = formattedtotal.substring(0, z)+"."+formattedtotal.substring(z,formattedtotal.length);
              
                  // console.log(formattedtotal);
                  counterdot=0;
                }
              }
              formattedtotal = "Rp. "+formattedtotal.substring(0,formattedtotal.length);

              // console.log(formattedtotal);
            }

            function checkEmail(emailAddress) {
              var at      = "@";
              var dot     = ".";
              var lat     = emailAddress.indexOf(at);
              var lstr    = emailAddress.length;
              var ldot    = emailAddress.indexOf(dot);
              if (emailAddress.indexOf(at)==-1){
                 return false;
              }

              if (emailAddress.indexOf(at)==-1 || emailAddress.indexOf(at)==0 || emailAddress.indexOf(at)==lstr){
                 return false;
              }

              if (emailAddress.indexOf(dot)==-1 || emailAddress.indexOf(dot)==0 || emailAddress.indexOf(dot)==lstr){
                  return false;
              }

               if (emailAddress.indexOf(at,(lat+1))!=-1){
                  return false;
               }

               if (emailAddress.substring(lat-1,lat)==dot || emailAddress.substring(lat+1,lat+2)==dot){
                  return false;
               }

               // if (emailAddress.substring(emailAddress.substring(lat, lstr).indexOf(dot) + lat + 1, lstr).indexOf(dot)!= -1){ 
               //    console.log("salah");
               //    return false;
               // }

               if (emailAddress.indexOf(dot,(lat+2))==-1){
                  return false;
               }
              
               if (emailAddress.indexOf(" ")!=-1){
                  return false;
               }

               return true;          
            }


            window.fn.proceedSummary = function(customer){

              //ambil data pembayaran (bank atau veritrans)
              console.log(customer);
              fn.load('summary1.html', JSON.stringify(customer));
            }

            window.fn.proceedOrder = function(customer, payment_method){

              console.log(customer);
              console.log(JSON.parse(storage.getItem("cart")));

                var customer_data = JSON.parse(customer["customer_data"]);

                var id_order;
                var status              = false;
                var customer_id         = JSON.parse(storage.getItem("user"))["customer"]["id"];
                var first_name          = customer_data["first_name"];
                var last_name           = customer_data["last_name"];
                var perusahaan          = customer_data["perusahaan"];
                var alamat              = customer_data["alamat"];
                var kota                = customer_data["kota"];
                var kode_pos            = customer_data["kode_pos"];
                var provinsi            = customer_data["provinsi"];
                var email               = customer_data["email"];
                var phone               = customer_data["phone"];
                var kurir               = customer["kurir"];
                var service             = customer["service"];
                var city_origin         = customer["city_origin"];
                var city_destination    = customer["city_destination"];
                var harga               = customer["harga"];

                var customer = {
                        "customer_id"         : customer_id,
                        "first_name"          : first_name,
                        "last_name"           : last_name,
                        "perusahaan"          : perusahaan,
                        "alamat"              : alamat,
                        "kota"                : kota,
                        "kode_pos"            : kode_pos,
                        "provinsi"            : provinsi,
                        "email"               : email,
                        "phone"               : phone,
                        "kurir"               : kurir,
                        "service"             : service,
                        "city_origin"         : city_origin,
                        "city_destination"    : city_destination,
                        "harga"               : harga,
                      };

                 ActivityIndicator.show("Sending data...");

                 var data = {
                        "action"              : "order",
                        "customer"            : customer,
                        "item"                : JSON.parse(storage.getItem("cart")),
                      };

                      var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                      var xhr = new XMLHttpRequest();
                      if ("withCredentials" in xhr){
                        xhr.open("POST", url, true);
                      } else if (typeof XDomainRequest != "undefined"){
                        xhr = new XDomainRequest();
                        xhr.open(method, url);
                      } else {
                        xhr = null;
                      }

                      xhr.setRequestHeader(
                        'X-Requested-With', 'XMLHttpRequest');
                      xhr.send();

                      data = $(this).serialize() + "&" + $.param(data);
                      $.ajax
                      ({
                            url: url, //Relative or absolute path to response.php file
                            type: "POST",
                            crossDomain: true,
                            data: data,
                            dataType: "text", 
                            async: false,

                            success: function(data) {
                              if(data != "" && data != null)
                              {
                                  // console.log(data);
                                  id_order = JSON.parse(data)["order"]["id"];

                                  status = true;
                              }
                            },
                            error: function( jqXhr, textStatus, errorThrown ) {
                                console.log( errorThrown );
                                ActivityIndicator.hide();
                            } 
                      });

                   if(status)
                    {
                      ActivityIndicator.hide();
                      setTimeout(function() 
                      {
                        var content = document.getElementById('content');
                        var menu = document.getElementById('menu');

                        var arrCart;
                        arrCart  = JSON.parse(storage.getItem("cart"));

                        var arrOrder;

                        var order = new Array();
                        order[0]  = id_order;
                        order[1]  = arrCart;
                        order[2]  = customer;

                        if(JSON.parse(storage.getItem("proceed")) == null){
                         arrOrder  = new Array();
                        }
                        else{
                         arrOrder = JSON.parse(storage.getItem("proceed"));
                        }
    
                        arrOrder.push(order);
                        if(payment_method != "veritrans")
                        {
                          storage.setItem("proceed", JSON.stringify(arrOrder)); 
                        }
                        storage.setItem("cart", JSON.stringify(arrCart));

                        content.load("checkout.html");

                        setTimeout(function(){

                          var biaya_total                   = 0;
                          var arrCart                       = JSON.parse(storage.getItem("cart"));
                          for (var i = 0; i < arrCart.length; i++) {
                            biaya_total         += arrCart[i][2]*arrCart[i][1];
                          }

                          biaya_total           += customer["harga"];

                          var kode_transaksi_checkout           = document.getElementById('kode_transaksi_checkout');
                          kode_transaksi_checkout.innerHTML     = "#"+id_order;

                          var email_checkout                    = document.getElementById('email_checkout');
                          email_checkout.innerHTML              = "Email resi telah dikirimkan ke : <b>"+customer["email"]+"</b>";

                          var harga_checkout                    = document.getElementById('harga_checkout');
                          moneyFormat(biaya_total);
                          harga_checkout.innerHTML              = "<b>"+formattedtotal+",-</b>";

                          if(payment_method == "veritrans")
                          {
                            var text_harga_checkout             = document.getElementById('text_harga_checkout');
                            text_harga_checkout.innerHTML       = "Jumlah yang telah dibayar :";

                            var text_rekening_checkout          = document.getElementById('text_rekening_checkout');
                            text_rekening_checkout.innerHTML    = "Pembayaran dilakukan melalui :";

                            var bank_checkout                   = document.getElementById('bank_checkout');

                            while (bank_checkout.firstChild) {
                                bank_checkout.removeChild(bank_checkout.firstChild);
                            }

                            var ons_row                         = document.createElement('ons-row');
                            ons_row.setAttribute('style', 'text-align:center;margin-bottom:5px;');

                            var ons_col1                        = document.createElement('ons-col');
                            ons_col1.setAttribute('width', '25%');

                            var ons_col2                        = document.createElement('ons-col');
                            var img                             = document.createElement('img');
                            img.setAttribute('src', 'img/veritrans.png');
                            ons_col2.appendChild(img);

                            var ons_col3                        = document.createElement('ons-col');
                            ons_col3.setAttribute('width', '25%');

                            ons_row.appendChild(ons_col1);
                            ons_row.appendChild(ons_col2);
                            ons_row.appendChild(ons_col3);

                            bank_checkout.appendChild(ons_row);

                            var text_harga2_checkout            = document.getElementById('text_harga2_checkout');
                            text_harga2_checkout.setAttribute('style', 'display:none');
                            var harga2_checkout                 = document.getElementById('harga2_checkout');
                            harga2_checkout.setAttribute('style', 'display:none');

                            var info_checkout                   = document.getElementById('info_checkout');

                            while (info_checkout.firstChild) {
                                info_checkout.removeChild(info_checkout.firstChild);
                            }

                            var li                              = document.createElement('li');
                            li.innerHTML                        = "Pembayaran anda akan segera di verifikasi";
                            info_checkout.appendChild(li);

                            var li2                             = document.createElement('li');
                            li2.innerHTML                       = "Pembayaran dengan angka yang tidak tepat akan menyebabkan verifikasi pembayaran menjadi terhambat";
                            info_checkout.appendChild(li2);
                          }
                          else
                          {
                            var harga2_checkout               = document.getElementById('harga2_checkout');
                            moneyFormat(biaya_total);
                            harga2_checkout.innerHTML         = "<b>"+formattedtotal+",-</b>";

                            fn.sendEmail(order, email, customer);
                          }
                        }, 10);
                      }, 20);
                    }

                return id_order;
            }

            window.fn.sendEmail = function(order_data, email_customer, customer_data){

              var proceed = order_data;
              console.log(proceed);

              var html;
              var total = 0;

              //TEMPLATE EMAIL

              html = "";
              html += "<p>Dear Customer, berikut resi dari pembelian anda<p>";
              html += "<p>Jangan lupa mengkonfirmasi pembayaran anda di halaman konfirmasi, atau jika resi tidak ada di halaman konfirmasi silahkan langsung mengisi form baru di menu yang telah disediakan<p>";
              html += "<p>Terima kasih atas pembelian yang telah anda lakukan :D<p>";
              html += "<br>";
              html += "<br>";

              html += "<div style='width: 50%; margin: auto;'>";
              html += "<table style='width:100%'>";
              // for (var k = 0; k < proceed.length; k++) {

                html += "<tr><th colspan='2' style='text-align: center;'>Kode Transaksi</th></tr>";
                html += "<tr><th colspan='2'>#"+proceed[0]+"</th></tr>";
                for (var i = 0; i < proceed[1].length; i++) 
                {
                  //Loop
                  html += "<tr><td style='font-size: 15px; padding-top: 10px;'><b>"+proceed[1][i][4]+"</b></td>";
                  if(proceed[1][i][6] != null)
                  {
                     html += "<td rowspan='"+(2 + proceed[1][i][6].length)+"' ";
                  }
                  else
                  {
                     html += "<td rowspan='2' ";
                  }
                  moneyFormat(proceed[1][i][2]*proceed[1][i][1]);
                  html += "style='font-size: 15px; text-align: right; padding: 10px;'><b>"+formattedtotal+",- </b></td></tr>";
                  html += "<tr><td style='font-size: 10px;'>Quantity : "+proceed[1][i][2]+"</td></tr>";

                  if(proceed[1][i][6] != null)
                  {
                    for (var j = 0; j < proceed[1][i][6].length; j++) {
                      html += "<tr><td style='font-size: 10px;'>"+proceed[1][i][6][j]+" : "+proceed[1][i][7][j]+"</td></tr>";
                    }
                  }

                  total += proceed[1][i][2]*proceed[1][i][1];

                }

                if(storage.getItem('service') != null)
                {
                  moneyFormat(customer_data["harga"]);
                  html += "<tr><td style='font-size:15px; padding-top: 10px;'><b>Shipping</b></td>";
                  html += "<td rowspan='4' style='font-size:15px; text-align:right; padding: 10px;'><b>"+formattedtotal+",- </b></td></tr>";
                  html += "<tr><td style='font-size:10px;'>"+customer_data["kurir"]+"</td></tr>";
                  html += "<tr><td style='font-size:10px;'>"+customer_data["service"]+"</td></tr>";
                  html += "<tr><td style='font-size:10px; padding-bottom: 10px;'>dari : "+customer_data["city_origin"]+"<br> ke : "+customer_data["city_destination"]+"</td></tr>";
                }
                html += "<tr><td style='border-top: 1px solid #ddd; font-size: 15px;'><b>Grand Total</b></td>";

                //Hitung total
                total += customer_data["harga"];

                moneyFormat(total);

                html += "<td style='border-top: 1px solid #ddd; text-align: right; font-size: 15px; padding: 10px;'><b>"+formattedtotal+",- </b></td></tr>";

              // }
              html += "</table>";
              html += "</div>";
              html += "<br>";
              html += "<p>*Abaikan email ini jika sudah pernah melakukan konfirmasi<p>";

              ActivityIndicator.show("Sending email...");

              var data = {
                "action"              : "email",
                "target"              : "client",
                "html"                : html,
                "email"               : email_customer,
              };

              var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
              var xhr = new XMLHttpRequest();
              if ("withCredentials" in xhr){
                xhr.open("POST", url, true);
              } else if (typeof XDomainRequest != "undefined"){
                xhr = new XDomainRequest();
                xhr.open(method, url);
              } else {
                xhr = null;
              }

              xhr.setRequestHeader(
                'X-Requested-With', 'XMLHttpRequest');
              xhr.send();

              data = $(this).serialize() + "&" + $.param(data);
              $.ajax
              ({
                    url: url, //Relative or absolute path to response.php file
                    type: "POST",
                    crossDomain: true,
                    data: data,
                    dataType: "text", 
                    async: false,

                    success: function(data) {
                      if(data != "" && data != null)
                      {
                        console.log(data);
                        ActivityIndicator.hide();
                      }
                    },
                    error: function( jqXhr, textStatus, errorThrown ) {
                        console.log( errorThrown );
                        ActivityIndicator.hide();
                    } 
              });
            }

            window.fn.paymentConfirmation = function() { 

              var html                        = "";
              var kode_konfirmasi             = document.getElementById('kode_konfirmasi').value;
              var nama_konfirmasi             = document.getElementById('nama_konfirmasi').value;
              var email_konfirmasi            = document.getElementById('email_konfirmasi');
              var bank_konfirmasi             = document.getElementById('bank_konfirmasi').value;
              var tanggal                     = document.getElementById('tanggal').value;
              var bulan                       = document.getElementById('bulan').value;
              var tahun                       = document.getElementById('tahun').value;
              var nilai_transfer_konfirmasi   = document.getElementById('nilai_transfer_konfirmasi').value;
              var foto_konfirmasi             = document.getElementById('foto_konfirmasi').getAttribute('src');
              var catatan_konfirmasi          = document.getElementById('catatan_konfirmasi').value;


              if(nama_konfirmasi == "" || email_konfirmasi == "" || !ValidateForm(email_konfirmasi) ||   nilai_transfer_konfirmasi == "")
              {
                  fn.load("form.html", kode_konfirmasi);

                  setTimeout(function(){
                    if(nama_konfirmasi == "")
                    {
                      var span_nama_depan           = document.getElementById('nama_depan_form_error');
                      span_nama_depan.innerHTML     = " *nama depan harus diisi";
                    }
                    if(email_konfirmasi.value == "")
                    {
                      var span_email                = document.getElementById('email_form_error');
                      span_email.innerHTML          = " *email harus diisi";
                    }
                    else if(!ValidateForm(email_konfirmasi))
                    {
                      var span_email                = document.getElementById('email_form_error');
                      span_email.innerHTML          = " *email tidak valid";
                    }
                    if(nilai_transfer_konfirmasi == "")
                    {
                      var span_nilai_transfer       = document.getElementById('nilai_transfer_form_error');
                      span_nilai_transfer.innerHTML = " *nilai transfer harus diisi";
                    }

                    //Kalau sudah ada isinya dan tidak error
                    if(nama_konfirmasi != "")
                    {document.getElementById('nama_konfirmasi').value = nama_konfirmasi;}
                    if(nilai_transfer_konfirmasi != "")
                    {document.getElementById('nilai_transfer_konfirmasi').value = nilai_transfer_konfirmasi;}
                    if(ValidateForm(email_konfirmasi))
                    {document.getElementById('email_konfirmasi').value = email_konfirmasi.value;}

                  }, 10);
                }
                else
                {
                  moneyFormat(nilai_transfer_konfirmasi);

                  html = "<p>Dear Admin,<p>";
                  html += "<p>Berikut pembayaran yang perlu dikonfirmasi : <p>";
                  html += "<br>";

                  html += "<div style='width:70%; margin:auto;'>";
                  html += "<table style='width:100%;'>";
                  html += "<tr><th colspan='3' style='text-align:center;'>Kode Transaksi</th></tr>";
                  html += "<tr><th colspan='3'>#"+kode_konfirmasi+"</th></tr>";
                  html += "<tr><td colspan='3' style='padding-top: 20px;'></td></tr>";
                  html += "<tr> <td style='font-size:15px; padding-top: 10px;width: 40%;'><b>Nama</b></td>";
                  html += "<td><b>:</b></td>";
                  html += "<td style='font-size:15px;'><b>"+nama_konfirmasi+"</b></td> </tr>";
                  html += "<tr> <td style='font-size:15px; padding-top: 10px;width: 40%;'><b>Email</b></td>";
                  html += "<td><b>:</b></td>";
                  html += "<td style='font-size:15px;'><b>"+email_konfirmasi.value+"</b></td> </tr>";
                  html += "<tr> <td style='font-size:15px; padding-top: 10px;width: 40%;'><b>Bank</b></td>";
                  html += "<td><b>:</b></td>";
                  html += "<td style='font-size:15px;'><b>"+bank_konfirmasi+"</b></td> </tr>";
                  html += "<tr> <td style='font-size:15px; padding-top: 10px;width: 40%;'><b>Tanggal transfer</b></td>";
                  html += "<td><b>:</b></td>";
                  html += "<td style='font-size:15px;'><b>"+tanggal+" - "+bulan+" - "+tahun+" (d - m - y)</b></td> </tr>";
                  html += "<tr> <td style='font-size:15px; padding-top: 10px;width: 40%;'><b>Nilai transfer</b></td>";
                  html += "<td><b>:</b></td>";
                  html += "<td style='font-size:15px;'><b>"+formattedtotal+",- </b></td> </tr>";
                  html += "<tr><td style='vertical-align:top; font-size:15px; padding-top: 10px;width: 40%;'><b>Catatan tambahan</b></td>";
                  html += "<td style='vertical-align:top'><b>:</b></td>";
                  html += "<td style='font-size:14px; padding-top:5px; word-break: break-all; overflow: hidden;'>"+catatan_konfirmasi+"</td></tr>";
                  html += "</table>";
                  html += "</div>";

                  ActivityIndicator.show("Sending email...");

                   var data = {
                      "action"          : "email",
                      "target"          : "admin",
                      "html"            : html,
                      "attachment"      : foto_konfirmasi,
                    };

                    var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                    var xhr = new XMLHttpRequest();
                    if ("withCredentials" in xhr){
                      xhr.open("POST", url, true);
                    } else if (typeof XDomainRequest != "undefined"){
                      xhr = new XDomainRequest();
                      xhr.open(method, url);
                    } else {
                      xhr = null;
                    }

                    xhr.setRequestHeader(
                      'X-Requested-With', 'XMLHttpRequest');
                    xhr.send();

                    data = $(this).serialize() + "&" + $.param(data);
                    $.ajax
                    ({
                        url: url, //Relative or absolute path to response.php file
                        type: "POST",
                        crossDomain: true,
                        data: data,
                        dataType: "text", 
                        async: false,

                        success: function(data) {
                          if(data != "" && data != null)
                          {
                            var arrOrder = JSON.parse(storage.getItem("proceed"));
                            for (var i = 0; i < arrOrder.length; i++) {
                              if(kode_konfirmasi == arrOrder[i][0])
                              {
                                 arrOrder.splice(i, 1);
                              }
                              storage.setItem("proceed", JSON.stringify(arrOrder));
                            }
                            ActivityIndicator.hide();
                            fn.load('confirmation.html', 'konfirmasi');
                          }
                        },
                        error: function( jqXhr, textStatus, errorThrown ) {
                            console.log( errorThrown );
                            ActivityIndicator.hide();
                        } 
                    });
                }

            };

            window.fn.addToCart = function(arrProduk, cek){
              arrProduk         = JSON.parse(arrProduk);

              if(storage.getItem("variasi") != null)
              {
                var arr         = new Array();
                arr             = JSON.parse(storage.getItem("variasi"));
                arrProduk[1]    = arr[3];
                arrProduk[5]    = arr[0];
                arrProduk[6]    = arr[1];
                arrProduk[7]    = arr[2];
              }
               
              var arrCart;
  
              if(JSON.parse(storage.getItem("cart")) == null){
               arrCart  = new Array();
              }
              else{
               arrCart  = JSON.parse(storage.getItem("cart"));
              }
              if(arrCart.length == 0)
              {
                 arrCart.push(arrProduk);
                 storage.setItem("cart", JSON.stringify(arrCart)); 
              }
              else{
               for (i = 0; i < arrCart.length; i++) {
                if(arrProduk[0] == arrCart[i][0] && arrProduk[5] == arrCart[i][5])
                {
                  arrCart[i][2] += 1;
                  break;
                }

                if(i == arrCart.length-1)
                {
                  arrCart.push(arrProduk);
                  break;
                }
               }
               storage.setItem("cart", JSON.stringify(arrCart));
             }

             $.notify("Berhasil memasukkan ke cart", {position :"bottom center", className: 'success'});

              var cart = JSON.parse(storage.getItem("cart"));
              if(cart != null)
              {
                var cart_length = cart.length;
                storage.setItem("cart", JSON.stringify(cart));

                var icon = document.getElementById("cart_icon2");
                icon.innerHTML = cart_length;
              }
            }

            window.fn.deleteItem = function(arrProduk, id_div){
             
              var arrProduk = JSON.parse(arrProduk);
              var idProduk  = arrProduk[0];

              var arrCart;
              
              arrCart       = JSON.parse(storage.getItem("cart"));
              
              if(arrCart.length != 0){
                for(i=0; i < arrCart.length; i++)
                {
                  if(arrProduk[0] == arrCart[i][0] && arrProduk[5] == arrCart[i][5]){
                    arrCart.splice(i , 1);
                    break;
                  }
                }
                storage.setItem("cart", JSON.stringify(arrCart));
                
                var cart_main         = document.getElementById('cart_main');
                var child             = document.getElementById(id_div);
                cart_main.removeChild(child);

                var cart_main         = document.getElementById('cart_main');
                var child             = document.getElementById('div_process');
                cart_main.removeChild(child);

                var div_process       = document.createElement('div');
                div_process.setAttribute("class", 'process-item');
                div_process.setAttribute("id", 'div_process');

                var ons_rowitem       = document.createElement('ons-row');

                var ons_processitem   = document.createElement('ons-col');
                ons_processitem.setAttribute("class", 'sub-process-item');
                var processbutton     = document.createElement('ons-button');
                processbutton.setAttribute("id", 'proceed');
                processbutton.setAttribute("class", 'tombol-proceed ion-ios-cart-outline button button--tappable');
                processbutton.setAttribute("onclick", "fn.load('proceed.html')");
                var proceed           = document.createTextNode('Proceed');
            
                var ons_processdetail = document.createElement('ons-col');
                ons_processdetail.setAttribute("class", 'sub-process-detail');

                totalvalue=0;

                for(i = 0; i<arrCart.length; i++){
                  totalvalue+=arrCart[i][2]*arrCart[i][1]
                }

                var total       = document.createElement('p');
                total.innerHTML =  " Total: <b>"+totalvalue+",-</b>";

                //Append Process
                processbutton.appendChild(proceed);

                ons_processitem.appendChild(processbutton);
                ons_processdetail.appendChild(total);

                ons_rowitem.appendChild(ons_processitem);
                ons_rowitem.appendChild(ons_processdetail);

                div_process.appendChild(ons_rowitem);

                cart_main.appendChild(div_process);
              }
              if(arrCart.length == 0)
              {
                var cart_main           = document.getElementById('cart_main');
                var child               = document.getElementById('div_process');
                cart_main.removeChild(child);

                var div_empty           = document.createElement('div');
                div_empty.setAttribute('class', "panel-confirmation");

                var div_emptycontent    = document.createElement('div');
                div_emptycontent.setAttribute('class', 'ion-ios-cart');
                div_emptycontent.setAttribute('style', 'font-size: 90px; color:gray;');

                var text                = document.createElement('p');
                text.setAttribute('style', 'font-size: 17px;');
                text.innerHTML          = "Tidak Ada Item di Cart Anda";

                div_emptycontent.appendChild(text);
                div_empty.appendChild(div_emptycontent);
                cart_main.appendChild(div_empty);
              }

              fn.load('cart.html');
            }

            window.fn.buttonClick = function(produk, newdata) {
              storage.removeItem("produk");
              storage.setItem("produk", JSON.stringify(produk));
              storage.removeItem("filter");
              fn.load('detail.html',JSON.stringify(newdata));
            };

            window.fn.dropdownChange = function(id_dropdown) {
              var produk            = JSON.parse(storage.getItem("produk"));
              var counter           = 0;

              if(storage.getItem("filter") == null)
              {
                storage.removeItem("filter");
                var arrFilter       = new Array();

                for (var i = 0; i < produk["atribut"].length; i++) {
                  var arr           = new Array();
                  arrFilter.push(arr);
                }
                storage.setItem("filter", JSON.stringify(arrFilter));
              }
              if(storage.getItem("filter") != null)
              {
                var arrFilter       = JSON.parse(storage.getItem("filter"));

                var filter          = arrFilter[id_dropdown];
                var select          = document.getElementById('dropdown'+id_dropdown);
                if(select.value != "blank")
                {
                  arrFilter[id_dropdown] = new Array();
                  var smallest = 0;
                  for (var w = 0; w < arrFilter.length; w++) {
                    if(arrFilter[w].length < arrFilter[smallest].length && arrFilter[w].length != 0 || 
                        arrFilter[smallest].length == 0 && arrFilter[w].length != 0)
                    {
                      if(w != id_dropdown)
                      {
                        smallest = w;
                      }
                    }
                  }
                    var size    = produk[produk["atribut"][id_dropdown]].length;
                    for (var j = 0; j < size; j++) {
                       att      = produk[produk["atribut"][id_dropdown]];
                       if(select.value == att[j]["pilihan_variasi"])
                       {
                          arrFilter[id_dropdown].push(j);
                       }
                    }
                  var size    = produk[produk["atribut"][id_dropdown]].length;

                  storage.setItem("filter", JSON.stringify(arrFilter));
                }
                else
                {
                  arrFilter[id_dropdown] = new Array();
                  storage.setItem("filter", JSON.stringify(arrFilter));
                }
                for (var i = 0; i < produk["atribut"].length; i++) {
                  var select       = document.getElementById('dropdown'+i);
                  
                  for (var k = 0; k < produk["atribut"].length; k++) {
                    //dropdown selain i
                    //cari yang filter paling kecil dan bukan 0
                    var smallest = 0;
                    for (var w = 0; w < arrFilter.length; w++) {
                      if(arrFilter[w].length < arrFilter[smallest].length && arrFilter[w].length != 0 || 
                          arrFilter[smallest].length == 0 && arrFilter[w].length != 0)
                      {
                        smallest = w;
                      }
                    }

                    if(k != i)
                    {
                      for (var j = 1; j <= produk[produk["atribut"][k]].length; j++) {
                        select.options[j].style.display = "none";
                      }
                      if(arrFilter[smallest].length != 0)
                      {
                        for (var j = 0; j < arrFilter[smallest].length; j++) {
                          select.options[arrFilter[smallest][j]+1].style.display = "block";
                        }
                      }
                      if(arrFilter[k].length == 0)
                      {
                        counter++;
                      }
                    }
                    //dropdown selain dia kosong semua
                    if(counter == produk["atribut"].length-1)
                    {
                      for (var j = 1; j <= produk[produk["atribut"][k]].length; j++) {
                        select.options[j].style.display = "block";
                      }
                    }
                  }
                  counter = 0;
                }
              }

              //Ganti harga produk
              var count = 0;
              var small = 0;

              for (var i = 0; i < produk["atribut"].length; i++) {
                var select                    = document.getElementById('dropdown'+i);
                if(select.value != "blank")
                {
                  count++;
                }
              }

              //Variasi sudah lengkap, button cart dan proceed sudah dapat dijalankan
              if(count == produk["atribut"].length)
              {
                for (var i = 0; i < arrFilter.length; i++) {
                  if(arrFilter[i].length < arrFilter[small].length && arrFilter[i].length != 0 || 
                      arrFilter[small].length == 0 && arrFilter[i].length != 0)
                  {
                    small = i;
                  }
                }
                var harga_produk        = document.getElementById("harga_produk");
                var arrFinal            = new Array();

                if(arrFilter[small].length > 1)
                {
                  console.log("y u du dis");
                  var harga             = produk[produk["atribut"][small]][arrFilter[small][0]]["harga_variasi"];

                  var arr_nama_atribut  = new Array();
                  var arr_atribut       = new Array();
                  for (var i = 0; i < produk["atribut"].length; i++) {
                    arr_nama_atribut[i] = produk["atribut"][i];
                    arr_atribut[i]      = produk[produk["atribut"][i]][arrFilter[small][0]]["pilihan_variasi"];
                    arrFinal[0]         = arrFilter[small][0];
                  }
                }
                else
                {
                  var harga             = produk[produk["atribut"][small]][arrFilter[small]]["harga_variasi"];

                  var arr_nama_atribut  = new Array();
                  var arr_atribut       = new Array();
                  for (var i = 0; i < produk["atribut"].length; i++) {
                    arr_nama_atribut[i] = produk["atribut"][i];
                    arr_atribut[i]      = produk[produk["atribut"][i]][arrFilter[small]]["pilihan_variasi"];
                    arrFinal[0]         = arrFilter[small][0];
                  }
                }
                moneyFormat(harga);
                harga_produk.innerHTML  = "<b>"+formattedtotal+",-</b>";

                arrFinal[1]             = arr_nama_atribut;
                arrFinal[2]             = arr_atribut;
                arrFinal[3]             = harga;
                storage.setItem("variasi", JSON.stringify(arrFinal));

                //Button cart enabled
                var button_proceed            = document.getElementById('button_add_to_cart');
                button_proceed.disabled       = false;
                var button_cart               = document.getElementById('button_proceed');
                button_cart.disabled          = false;
              }
              else if(count != produk["atribut"].length)
              {
                //Button cart disabled
                var harga_produk  = document.getElementById("harga_produk");
                moneyFormat(produk["harga"]);
                harga_produk.innerHTML        = "<b>"+formattedtotal+",-</b>";

                var button_proceed            = document.getElementById('button_add_to_cart');
                button_proceed.disabled       = true;
                var button_cart               = document.getElementById('button_proceed');
                button_cart.disabled          = true;

                storage.removeItem("variasi");
              }

            };

            window.fn.shippingDropdownChange = function(id_dropdown, id_ship, customer_data) 
            {
              var store_location    = JSON.parse(storage.getItem('store_location'));
              console.log(customer_data);
              var status            = false;

              if(store_location.length == 1 && store_location[0]["daftar_kota"].length == 1)
              {
                status              = true;
              }

              if(id_dropdown == "kurir")
              {
                if(!status)
                {
                  var provinsi_dropdown_origin      = document.getElementById('provinsi_shipping_origin');
                  var kota_dropdown_origin          = document.getElementById('kota_shipping_origin');
                }
                var provinsi_dropdown_destination = document.getElementById('provinsi_shipping_destination');
                var kota_dropdown_destination     = document.getElementById('kota_shipping_destination');
                var kurir_dropdown                = document.getElementById('kurir_shipping');

                if(status)
                {
                  if(kota_dropdown_destination.value != "blank" && kurir_dropdown.value != "blank")
                  {
                    var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                    cek_ongkir_button.disabled    = false;
                    cek_ongkir_button.setAttribute('onclick', "fn.cekOngkir('"+store_location[0]["province_id"]+"', '"+provinsi_dropdown_destination.value+"', '"+store_location[0]["daftar_kota"][0]["city_id"]+"', '"+kota_dropdown_destination.value+"', '"+kurir_dropdown.value+"', '"+customer_data+"')");
                  }
                  else
                  {
                    var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                    cek_ongkir_button.disabled    = true;
                  }
                }
                else
                {
                  if(kota_dropdown_origin.value != "blank" && kota_dropdown_destination.value != "blank" && kurir_dropdown.value != "blank")
                  {
                    var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                    cek_ongkir_button.disabled    = false;
                    cek_ongkir_button.setAttribute('onclick', "fn.cekOngkir('"+provinsi_dropdown_origin.value+"', '"+provinsi_dropdown_destination.value+"', '"+kota_dropdown_origin.value+"', '"+kota_dropdown_destination.value+"', '"+kurir_dropdown.value+"', '"+customer_data+"')");
                  }
                  else
                  {
                    var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                    cek_ongkir_button.disabled    = true;
                  }
                }
              }

              if(id_dropdown == "provinsi")
              {
                var provinsi          = JSON.parse(storage.getItem("rajaongkir"));

                if(id_ship == "origin")
                {
                  var provinsi_dropdown = document.getElementById('provinsi_shipping_origin');
                  var kota_dropdown     = document.getElementById('kota_shipping_origin');
                }
                else if(id_ship == "destination")
                {
                  var provinsi_dropdown = document.getElementById('provinsi_shipping_destination');
                  var kota_dropdown     = document.getElementById('kota_shipping_destination');
                }
                else if(id_ship == "register")
                {
                  var provinsi_dropdown = document.getElementById('provinsi-register');
                  var kota_dropdown     = document.getElementById('kota-register');
                }
                else if(id_ship == "data_diri")
                {
                  var provinsi_dropdown = document.getElementById('provinsi_data_diri');
                  var kota_dropdown     = document.getElementById('kota_data_diri');
                }
                else if(id_ship == "profile")
                {
                  var provinsi_dropdown = document.getElementById('provinsi_profile');
                  var kota_dropdown     = document.getElementById('kota_profile');
                }

                if(provinsi_dropdown.value != "blank")
                {
                  if(id_ship == "register")
                  {
                    var provinsi_register_error       = document.getElementById('provinsi_register_error');
                    provinsi_register_error.innerHTML = "";
                  }

                  while (kota_dropdown.firstChild) {
                      kota_dropdown.removeChild(kota_dropdown.firstChild);
                  }

                  if(id_ship == "origin")
                  {
                    for (var i = 0; i < store_location.length; i++) {
                      if(provinsi_dropdown.value == store_location[i]["province_id"])
                      {
                        for (var j = 0; j < store_location[i]["daftar_kota"].length; j++) {
                          if(j == 0)
                          {
                            var option              = document.createElement('option');
                            option.innerHTML        = "Choose one option";
                            option.setAttribute('value', "blank");
                            kota_dropdown.appendChild(option);
                          }

                          var option              = document.createElement('option');
                          option.setAttribute('value', store_location[i]["daftar_kota"][j]["city_id"]);
                          option.innerHTML        = store_location[i]["daftar_kota"][j]["city_name"];
                          kota_dropdown.appendChild(option);
                        }
                      }
                    }
                  }
                  else
                  {
                    for (var i = 0; i < provinsi.length; i++) {
                      if(provinsi_dropdown.value == provinsi[i]["province_id"] || provinsi_dropdown.value == provinsi[i]["province"])
                      {
                        if(provinsi[i]["daftar_kota"] != null)
                        {
                          for (var j = 0; j < provinsi[i]["daftar_kota"].length; j++) {

                            if(j == 0)
                            {
                              var option              = document.createElement('option');
                              option.innerHTML        = "Choose one option";
                              option.setAttribute('value', "blank");
                              kota_dropdown.appendChild(option);
                            }

                            var option              = document.createElement('option');
                            if(id_ship == "register" || id_ship == "data_diri" || id_ship == "profile")
                            {
                              option.setAttribute('value', provinsi[i]["daftar_kota"][j]["city_name"]);
                              option.innerHTML        = provinsi[i]["daftar_kota"][j]["city_name"];
                            }
                            else
                            {
                              option.setAttribute('value', provinsi[i]["daftar_kota"][j]["city_id"]);
                              option.innerHTML        = provinsi[i]["daftar_kota"][j]["city_name"];
                            }
                            kota_dropdown.appendChild(option);
                          }
                        }
                      }
                    }
                  }
                }
                else
                {
                  if(id_ship == "register")
                  {
                    var provinsi_register_error       = document.getElementById('provinsi_register_error');
                    provinsi_register_error.innerHTML = "*pilih salah satu";

                    var kode_pos          = document.getElementById('kode-pos-register');
                    kode_pos.value        = "";
                  }
                  else if(id_ship == "data_diri")
                  {
                    var kode_pos          = document.getElementById('kode_pos_data_diri');
                    kode_pos.value        = "";
                  }
                  else if(id_ship == "profile")
                  {
                    var kode_pos          = document.getElementById('kode_pos_profile');
                    kode_pos.value        = "";
                  }

                  while (kota_dropdown.firstChild) {
                      kota_dropdown.removeChild(kota_dropdown.firstChild);
                  }

                  var option              = document.createElement('option');
                  option.setAttribute('value', "blank");
                  option.innerHTML        = "Choose province first";
                  kota_dropdown.appendChild(option);
                }

                if(id_ship == "origin" || id_ship == "destination")
                {
                  var provinsi_dropdown_destination = document.getElementById('provinsi_shipping_destination');
                  var kota_dropdown_destination     = document.getElementById('kota_shipping_destination');
                  var kurir_dropdown                = document.getElementById('kurir_shipping');

                  if(status)
                  {
                    if(kota_dropdown_destination.value != "blank" && kurir_dropdown.value != "blank")
                    {
                      var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled    = false;
                      cek_ongkir_button.setAttribute('onclick', "fn.cekOngkir('"+store_location[0]["province_id"]+"', '"+provinsi_dropdown_destination.value+"', '"+store_location[0]["daftar_kota"][0]["city_id"]+"', '"+kota_dropdown_destination.value+"', '"+kurir_dropdown.value+"', '"+customer_data+"')");
                    }
                    else
                    {
                      var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled    = true;
                    }
                  }
                  else
                  {
                    var provinsi_dropdown_origin      = document.getElementById('provinsi_shipping_origin');
                    var kota_dropdown_origin          = document.getElementById('kota_shipping_origin');

                    if(kota_dropdown_origin.value != "blank" && kota_dropdown_destination.value != "blank" && kurir_dropdown.value != "blank")
                    {
                      var cek_ongkir_button      = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled = false;
                      cek_ongkir_button.setAttribute('onclick', "fn.cekOngkir('"+provinsi_dropdown_origin.value+"', '"+provinsi_dropdown_destination.value+"', '"+kota_dropdown_origin.value+"', '"+kota_dropdown_destination.value+"', '"+kurir_dropdown.value+"', '"+customer_data+"')");
                    }
                    else
                    {
                      var cek_ongkir_button      = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled = true;
                    }
                  }
                }
                else if(id_ship == "register")
                {
                  var kota_dropdown     = document.getElementById('kota-register');
                  if(kota_dropdown.value == "blank")
                  {
                    var kode_pos    = document.getElementById('kode-pos-register');
                    kode_pos.value  = "";

                    var kode_pos_register_error       = document.getElementById('kode_pos_register_error');
                    kode_pos_register_error.innerHTML = "*pilih kota terlebih dahulu";

                    var kota_register_error       = document.getElementById('kota_register_error');
                    kota_register_error.innerHTML = "*pilih provinsi terlebih dahulu";
                  } 
                }
              }
              else if(id_dropdown == "kota")
              {
                if(id_ship == "origin" || id_ship == "destination")
                {
                  var provinsi_dropdown_origin      = document.getElementById('provinsi_shipping_origin');
                  var provinsi_dropdown_destination = document.getElementById('provinsi_shipping_destination');
                  var kota_dropdown_origin      = document.getElementById('kota_shipping_origin');
                  var kota_dropdown_destination = document.getElementById('kota_shipping_destination');
                  var kurir_dropdown            = document.getElementById('kurir_shipping');

                  if(status)
                  {
                    if(kota_dropdown_destination.value != "blank" && kurir_dropdown.value != "blank")
                    {
                      var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled    = false;
                      cek_ongkir_button.setAttribute('onclick', "fn.cekOngkir('"+store_location[0]["province_id"]+"', '"+provinsi_dropdown_destination.value+"', '"+store_location[0]["daftar_kota"][0]["city_id"]+"', '"+kota_dropdown_destination.value+"', '"+kurir_dropdown.value+"', '"+customer_data+"')");
                    }
                    else
                    {
                      var cek_ongkir_button         = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled    = true;
                    }
                  }
                  else
                  {
                    if(kota_dropdown_origin.value != "blank" && kota_dropdown_destination.value != "blank" && kurir_dropdown.value != "blank")
                    {
                      var cek_ongkir_button      = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled = false;
                      cek_ongkir_button.setAttribute('onclick', "fn.cekOngkir('"+provinsi_dropdown_origin.value+"', '"+provinsi_dropdown_destination.value+"', '"+kota_dropdown_origin.value+"', '"+kota_dropdown_destination.value+"', '"+kurir_dropdown.value+"', '"+customer_data+"')");
                    }
                    else
                    {
                      var cek_ongkir_button      = document.getElementById('cek_ongkir_button');
                      cek_ongkir_button.disabled = true;
                    }
                  }

                }
                else if(id_ship == "register")
                {
                  //Isi kode pos
                  var provinsi          = JSON.parse(storage.getItem("rajaongkir"));

                  var provinsi_dropdown = document.getElementById('provinsi-register');
                  var kota_dropdown     = document.getElementById('kota-register');
                  if(kota_dropdown.value != "blank")
                  {
                    var kota_register_error       = document.getElementById('kota_register_error');
                    kota_register_error.innerHTML = "";

                    var kode_pos_register_error       = document.getElementById('kode_pos_register_error');
                    kode_pos_register_error.innerHTML = "";

                    for (var i = 0; i < provinsi.length; i++) {
                      if(provinsi_dropdown.value == provinsi[i]["province"])
                      {
                        if(provinsi[i]["daftar_kota"] != null)
                        {
                          for (var j = 0; j < provinsi[i]["daftar_kota"].length; j++) {
                            if(kota_dropdown.value == provinsi[i]["daftar_kota"][j]["city_name"])
                            {
                              console.log(provinsi[i]["daftar_kota"][j]);
                              var kode_pos    = document.getElementById('kode-pos-register');
                              kode_pos.value  = provinsi[i]["daftar_kota"][j]["postal_code"]; 
                            }
                          }
                        }
                      }
                    }
                  }
                  else
                  {
                    var kode_pos    = document.getElementById('kode-pos-register');
                    kode_pos.value  = ""; 

                    var kode_pos_register_error       = document.getElementById('kode_pos_register_error');
                    kode_pos_register_error.innerHTML = "*pilih kota terlebih dahulu";

                    var kota_register_error       = document.getElementById('kota_register_error');
                    kota_register_error.innerHTML = "*pilih provinsi terlebih dahulu";
                  }
                }
                else if(id_ship == "data_diri")
                {
                  //Isi kode pos
                  var provinsi          = JSON.parse(storage.getItem("rajaongkir"));

                  var provinsi_dropdown = document.getElementById('provinsi_data_diri');
                  var kota_dropdown     = document.getElementById('kota_data_diri');
                  if(kota_dropdown.value != "blank")
                  {
                    for (var i = 0; i < provinsi.length; i++) {
                      if(provinsi_dropdown.value == provinsi[i]["province"])
                      {
                        if(provinsi[i]["daftar_kota"] != null)
                        {
                          for (var j = 0; j < provinsi[i]["daftar_kota"].length; j++) {
                            if(kota_dropdown.value == provinsi[i]["daftar_kota"][j]["city_name"])
                            {
                              console.log(provinsi[i]["daftar_kota"][j]);
                              var kode_pos    = document.getElementById('kode_pos_data_diri');
                              kode_pos.value  = provinsi[i]["daftar_kota"][j]["postal_code"]; 
                            }
                          }
                        }
                      }
                    }
                  }
                  else
                  {
                    var kode_pos    = document.getElementById('kode_pos_data_diri');
                    kode_pos.value  = "";
                  }
                }
                else if(id_ship == "profile")
                {
                  //Isi kode pos
                  var provinsi          = JSON.parse(storage.getItem("rajaongkir"));

                  var provinsi_dropdown = document.getElementById('provinsi_profile');
                  var kota_dropdown     = document.getElementById('kota_profile');
                  if(kota_dropdown.value != "blank")
                  {
                    for (var i = 0; i < provinsi.length; i++) {
                      if(provinsi_dropdown.value == provinsi[i]["province"])
                      {
                        if(provinsi[i]["daftar_kota"] != null)
                        {
                          for (var j = 0; j < provinsi[i]["daftar_kota"].length; j++) {
                            if(kota_dropdown.value == provinsi[i]["daftar_kota"][j]["city_name"])
                            {
                              console.log(provinsi[i]["daftar_kota"][j]);
                              var kode_pos    = document.getElementById('kode_pos_profile');
                              kode_pos.value  = provinsi[i]["daftar_kota"][j]["postal_code"]; 
                            }
                          }
                        }
                      }
                    }
                  }
                  else
                  {
                    var kode_pos    = document.getElementById('kode_pos_profile');
                    kode_pos.value  = "";
                  }
                }
              }
            }

            window.fn.metodeDropdownChange = function(customer_data)
            {
              // var customer          = JSON.parse(customer_data);
              var metode            = document.getElementById('metode');

              if(metode.value == "transfer")
              {
                var panel_veritrans             = document.getElementById('panel_veritrans');
                panel_veritrans.setAttribute('style', 'display:none');

                var panel_transfer_bank         = document.getElementById('panel_transfer_bank');
                panel_transfer_bank.setAttribute('style', 'display:block');

                var button_lanjutkan_pembayaran = document.getElementById('button_lanjutkan_pembayaran');
                button_lanjutkan_pembayaran.setAttribute('onclick', "fn.proceedSummary("+JSON.stringify(customer_data)+")");

                console.log("transfer");
              }
              else if(metode.value == "veritrans")
              {
                var panel_transfer_bank         = document.getElementById('panel_transfer_bank');
                panel_transfer_bank.setAttribute('style', 'display:none');

                var panel_veritrans             = document.getElementById('panel_veritrans');
                panel_veritrans.setAttribute('style', 'display:block');

                var button_lanjutkan_pembayaran = document.getElementById('button_lanjutkan_pembayaran');
                button_lanjutkan_pembayaran.setAttribute('onclick', "openBrowser("+JSON.stringify(customer_data)+")");

                console.log("veritrans");
              }
            }

            window.fn.cekOngkir = function(province_id_origin, province_id_destination, city_id_origin, city_id_destination, courier, customer_data) {

              ActivityIndicator.show("Loading data...");

              var data = {
                  "action"                : "shipping",
                  "request"               : "cost",
                  "province_origin"       : province_id_origin,
                  "province_destination"  : province_id_destination,
                  "city_origin"           : city_id_origin,
                  "city_destination"      : city_id_destination,
                  "courier"               : courier,
                };

                var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                var xhr = new XMLHttpRequest();
                if ("withCredentials" in xhr){
                  xhr.open("POST", url, true);
                } else if (typeof XDomainRequest != "undefined"){
                  xhr = new XDomainRequest();
                  xhr.open(method, url);
                } else {
                  xhr = null;
                }

                xhr.setRequestHeader(
                  'X-Requested-With', 'XMLHttpRequest');
                xhr.send();

                data = $(this).serialize() + "&" + $.param(data);
                $.ajax
                ({
                    url: url, //Relative or absolute path to response.php file
                    type: "POST",
                    crossDomain: true,
                    data: data,
                    dataType: "json", 
                    async: false,

                    success: function(data) {
                      if(data != "" && data != null)
                      {
                        // console.log(data);
                        var arr = {
                          "customer_data"         : customer_data,
                          "service"               : data,
                          "province_origin"       : province_id_origin,
                          "province_destination"  : province_id_destination,
                          "city_origin"           : city_id_origin,
                          "city_destination"      : city_id_destination,
                          };

                        
                        storage.setItem("service", JSON.stringify(arr));
                        // console.log(storage.getItem("service"));

                        ActivityIndicator.hide();
                        fn.load("shipping2.html", JSON.stringify(arr));
                      }
                    },
                    error: function( jqXhr, textStatus, errorThrown ) {
                        console.log( errorThrown );
                        ActivityIndicator.hide();
                    } 
                });
            }

            window.fn.radioServiceShipping = function(id_radio_button, shipping_data) {
              // console.log("radio clicked"+id_radio_button);
              // console.log(shipping_data);

              var next_button           = document.getElementById('shipping_next_button');
              next_button.disabled      = false;

              //customer data
              //serang ke banten
              //jne
              //paket yes
              //harga 50000
              var province              = JSON.parse(storage.getItem("rajaongkir"));
              // console.log(province);

              var temp;
              for (var i = 0; i < province[shipping_data["province_origin"]-1]["daftar_kota"].length; i++) {
                // console.log(province[shipping_data["province_origin"]-1]["daftar_kota"][i]["city_id"]);
                if(province[shipping_data["province_origin"]-1]["daftar_kota"][i]["city_id"] == shipping_data["city_origin"])
                {
                  temp = province[shipping_data["province_origin"]-1]["daftar_kota"][i]["city_name"];
                }
              }

              var temp2;
              for (var i = 0; i < province[shipping_data["province_destination"]-1]["daftar_kota"].length; i++) {
                // console.log(province[shipping_data["province_destination"]-1]["daftar_kota"][i]["city_id"]);
                if(province[shipping_data["province_destination"]-1]["daftar_kota"][i]["city_id"] == shipping_data["city_destination"])
                {
                  temp2 = province[shipping_data["province_destination"]-1]["daftar_kota"][i]["city_name"];
                }
              }

              var arr = {
                "customer_data"         : shipping_data["customer_data"],
                "kurir"                 : shipping_data["service"][0]["code"],
                "province_origin"       : province[shipping_data["province_origin"]-1]["province"],
                "province_destination"  : province[shipping_data["province_destination"]-1]["province"],
                "city_origin"           : temp,
                "city_destination"      : temp2,
                "service"               : shipping_data["service"][0]["costs"][id_radio_button]["description"]+" ("+
                                          shipping_data["service"][0]["costs"][id_radio_button]["service"]+")",
                "harga"                 : shipping_data["service"][0]["costs"][id_radio_button]["cost"][0]["value"],
                };

              next_button.setAttribute('onclick', "fn.load('pembayaran.html', "+JSON.stringify(arr)+")");
            }

            window.fn.login = function() { 
              
              var username            = document.getElementById('username-login').value;
              var password            = document.getElementById('password-login').value;

              ActivityIndicator.show("Sending data...");

              var data = {
                  "action": "login",
                  "username": username,
                  "password": password,
                };

                var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                var xhr = new XMLHttpRequest();
                if ("withCredentials" in xhr){
                  xhr.open("POST", url, true);
                } else if (typeof XDomainRequest != "undefined"){
                  xhr = new XDomainRequest();
                  xhr.open(method, url);
                } else {
                  xhr = null;
                }

                xhr.setRequestHeader(
                  'X-Requested-With', 'XMLHttpRequest');
                xhr.send();

                data = $(this).serialize() + "&" + $.param(data);
                $.ajax
                ({
                    url: url, //Relative or absolute path to response.php file
                    type: "POST",
                    crossDomain: true,
                    data: data,
                    dataType: "json", 
                    async: false,

                    success: function(data) {
                      if(data["user"] != 0 && data != null)
                      {
                        document.getElementById('login-error').innerHTML = "";
                        // console.log(data["ID"]);

                        ActivityIndicator.hide();

                        fn.load("home.html");

                        $.notify("Login berhasil", {position :"bottom center", className: 'success'});

                        setTimeout(function(){
                          fn.getUserData(data["ID"]);
                        }, 10);
                      }
                      else
                      {
                        ActivityIndicator.hide();

                        var password      = document.getElementById('password-login');
                        password.value    = "";
                        document.getElementById('login-error').innerHTML = "*username atau password salah";
                      }
                    },
                    error: function( jqXhr, textStatus, errorThrown ) {
                        console.log( errorThrown );
                        ActivityIndicator.hide();
                    } 
                });
            };

            window.fn.getUserData = function(user_id) {

              ActivityIndicator.show("Loading user data...");
              
              var data = {
                  "action": "user",
                  "user_id": user_id,
                };

                var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                var xhr = new XMLHttpRequest();
                if ("withCredentials" in xhr){
                  xhr.open("GET", url, true);
                } else if (typeof XDomainRequest != "undefined"){
                  xhr = new XDomainRequest();
                  xhr.open(method, url);
                } else {
                  xhr = null;
                }

                xhr.setRequestHeader(
                  'X-Requested-With', 'XMLHttpRequest');
                xhr.send();

                data = $(this).serialize() + "&" + $.param(data);
                $.ajax
                ({
                    url: url, //Relative or absolute path to response.php file
                    type: "GET",
                    crossDomain: true,
                    data: data,
                    dataType: "json", 
                    async: false,

                    success: function(data) {
                      storage.setItem("user", JSON.stringify(data));

                      ActivityIndicator.hide();
                      // console.log("user set");
                    },
                    error: function( jqXhr, textStatus, errorThrown ) {
                        console.log( errorThrown );
                        ActivityIndicator.hide();
                    } 
                });
            };

            window.fn.editProfile = function() {
              var username_profile        = document.getElementById('username_profile');
              var nama_depan_profile      = document.getElementById('nama_depan_profile');
              var nama_belakang_profile   = document.getElementById('nama_belakang_profile');
              var nohp_profile            = document.getElementById('nohp_profile');
              var email_profile           = document.getElementById('email_profile');
              var alamat_profile          = document.getElementById('alamat_profile');
              var perusahaan_profile      = document.getElementById('perusahaan_profile');
              var kota_profile            = document.getElementById('kota_profile');
              var kode_pos_profile        = document.getElementById('kode_pos_profile');
              var provinsi_profile        = document.getElementById('provinsi_profile');

              var user_data               = new Array();
              user_data[0]                = username_profile.value;
              user_data[1]                = nama_depan_profile.value;
              user_data[2]                = nama_belakang_profile.value;
              user_data[3]                = nohp_profile.value;
              user_data[4]                = email_profile.value; 
              user_data[5]                = alamat_profile.value;
              user_data[6]                = perusahaan_profile.value;
              user_data[7]                = kota_profile.value;
              user_data[8]                = kode_pos_profile.value;
              user_data[9]                = provinsi_profile.value;

              ActivityIndicator.show("Sending user data...");

              var data = {
                  "action"    : "edit_profile",
                  "user_id"   : JSON.parse(storage.getItem("user"))["customer"]["id"],
                  "user_data" : user_data,
                };

                var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                var xhr = new XMLHttpRequest();
                if ("withCredentials" in xhr){
                  xhr.open("POST", url, true);
                } else if (typeof XDomainRequest != "undefined"){
                  xhr = new XDomainRequest();
                  xhr.open(method, url);  
                } else {
                  xhr = null;
                }

                xhr.setRequestHeader(
                  'X-Requested-With', 'XMLHttpRequest');
                xhr.send();

                data = $(this).serialize() + "&" + $.param(data);
                $.ajax
                ({
                    url: url, //Relative or absolute path to response.php file
                    type: "POST",
                    crossDomain: true,
                    data: data,
                    dataType: "json", 
                    async: false,

                    success: function(data) {
                      storage.setItem("user", JSON.stringify(data));
                      ActivityIndicator.hide();
                      fn.load('home.html');
                      $.notify("Edit profile berhasil", {position :"bottom center", className: 'success'});
                    },
                    error: function( jqXhr, textStatus, errorThrown ) {
                        console.log( errorThrown );
                        ActivityIndicator.hide();
                    } 
                });
            };

            window.fn.register = function(cek) {

              var first_name          = document.getElementById('first-name-register').value;
              var last_name           = document.getElementById('last-name-register').value;
              var username            = document.getElementById('username-register').value;
              var password            = document.getElementById('password-register').value;
              var confirm_password    = document.getElementById('confirm-password-register').value;
              var perusahaan          = document.getElementById('perusahaan-register').value;
              var alamat              = document.getElementById('alamat-register').value;
              var kota                = document.getElementById('kota-register').value;
              var kode_pos            = document.getElementById('kode-pos-register').value;
              var email               = document.getElementById('email-register');
              var phone               = document.getElementById('nomor-telepon-register').value;
              var provinsi            = document.getElementById('provinsi-register').value;

              // console.log("Username : "+username);

              if(first_name == "" || username == "" || password == "" ||password != confirm_password || email.value == "" || !ValidateForm(email) || provinsi == "blank" || kota == "blank" || kode_pos == "" || phone == "")
              {
                  if(cek != "reload")
                  {
                    fn.load("register.html");

                        setTimeout(function(){

                          if(first_name == "")
                          {
                            var nama_depan_register_error       = document.getElementById('nama_depan_register_error');
                            nama_depan_register_error.innerHTML = " *harus diisi";
                          }
                          if(username == "")
                          {
                            var username_register_error         = document.getElementById('username_register_error');
                            username_register_error.innerHTML   = " *harus diisi";
                          }
                          // console.log(password);
                          if(password == "")
                          {
                            var password_register_error         = document.getElementById('password_register_error');
                            password_register_error.innerHTML   = " *harus diisi";
                          }
                          if(password != confirm_password)
                          {
                            var password_register_error         = document.getElementById('password_register_error');
                            password_register_error.innerHTML   = " *password dan confirm tidak sesuai";
                          }
                          if(alamat == "")
                          {
                            var alamat_register_error           = document.getElementById('alamat_register_error');
                            alamat_register_error.innerHTML     = " *harus diisi";
                          }
                          if(provinsi == "blank")
                          {
                            var provinsi_register_error         = document.getElementById('provinsi_register_error');
                            provinsi_register_error.innerHTML   = " *pilih salah satu";
                          }
                          if(kota == "blank")
                          {
                            var kota_register_error             = document.getElementById('kota_register_error');
                            kota_register_error.innerHTML       = " *pilih provinsi terlebih dahulu";
                          }
                          if(kode_pos == "")
                          {
                            var kode_pos_register_error         = document.getElementById('kode_pos_register_error');
                            kode_pos_register_error.innerHTML   = " *pilih kota terlebih dahulu";
                          }
                          if(email.value == "")
                          {
                            var email_register_error            = document.getElementById('email_register_error');
                            email_register_error.innerHTML      = " *email harus diisi";
                          }
                          else if(!ValidateForm(email))
                          {
                            var email_register_error            = document.getElementById('email_register_error');
                            email_register_error.innerHTML      = " *email tidak valid";
                          }
                          if(phone == "")
                          {
                            var phone_register_error            = document.getElementById('phone_register_error');
                            phone_register_error.innerHTML      = " *harus diisi";
                          }
                      }, 10);
                    }
                  

                      //Kalau sudah ada isinya dan tidak error

                    setTimeout(function() {

                      if(first_name != "")
                      {
                        var first = document.getElementById('first-name-register')
                        first.value = first_name;

                        var nama_depan_register_error       = document.getElementById('nama_depan_register_error');
                        nama_depan_register_error.innerHTML = "";
                      }
                      if(last_name != "")
                      {
                        document.getElementById('last-name-register').value = last_name;
                      }
                      if(username != "")
                      {
                        document.getElementById('username-register').value = username;
                        var username_register_error         = document.getElementById('username_register_error');
                        username_register_error.innerHTML   = "";
                      }
                      if(password != "" && password == confirm_password)
                      {
                        var password_register_error         = document.getElementById('password_register_error');
                        password_register_error.innerHTML   = "";
                      }
                      if(perusahaan != "")
                      {
                        document.getElementById('perusahaan-register').value = perusahaan;
                      }
                      if(alamat != "")
                      {
                        document.getElementById('alamat-register').value = alamat;
                        var alamat_register_error           = document.getElementById('alamat_register_error');
                        alamat_register_error.innerHTML     = "";
                      }
                      if(provinsi != "blank")
                      {
                        document.getElementById('provinsi-register').value = provinsi;
                        var provinsi_register_error         = document.getElementById('provinsi_register_error');
                        provinsi_register_error.innerHTML   = "";

                        fn.shippingDropdownChange('provinsi', 'register');
                      }
                      if(kota != "blank")
                      {
                        // console.log(kota);
                        document.getElementById('kota-register').value = kota;
                        var kota_register_error             = document.getElementById('kota_register_error');
                        kota_register_error.innerHTML       = "";
                      }
                      if(kode_pos != "")
                      {
                        document.getElementById('kode-pos-register').value = kode_pos;
                        var kode_pos_register_error         = document.getElementById('kode_pos_register_error');
                        kode_pos_register_error.innerHTML   = "";
                      }
                      if(ValidateForm(email))
                      {
                        document.getElementById('email-register').value = email.value;
                        var email_register_error            = document.getElementById('email_register_error');
                        email_register_error.innerHTML      = "";
                      }
                      if(phone != "")
                      {
                        document.getElementById('nomor-telepon-register').value = phone;
                        var phone_register_error            = document.getElementById('phone_register_error');
                        phone_register_error.innerHTML      = "";
                      }
                    }, 10);
                }
                else
                {
                  // if(cek != "reload")
                  // {


                    var customer = {
                            "first_name"          : first_name,
                            "last_name"           : last_name,
                            "username"            : username,
                            "password"            : password,
                            "confirm_password"    : confirm_password,
                            "perusahaan"          : perusahaan,
                            "alamat"              : alamat,
                            "kota"                : kota,
                            "kode_pos"            : kode_pos,
                            "email"               : email.value,
                            "phone"               : phone,
                            "provinsi"            : provinsi,
                          };

                     ActivityIndicator.show("Sending user data...");

                     var data = {
                            "action"              : "register",
                            "customer"            : customer,
                          };

                          var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
                          var xhr = new XMLHttpRequest();
                          if ("withCredentials" in xhr){
                            xhr.open("POST", url, true);
                          } else if (typeof XDomainRequest != "undefined"){
                            xhr = new XDomainRequest();
                            xhr.open(method, url);
                          } else {
                            xhr = null;
                          }

                          xhr.setRequestHeader(
                            'X-Requested-With', 'XMLHttpRequest');
                          xhr.send();

                          data = $(this).serialize() + "&" + $.param(data);
                          $.ajax
                          ({
                                url: url, //Relative or absolute path to response.php file
                                type: "POST",
                                crossDomain: true,
                                data: data,
                                dataType: "text", 
                                async: false,

                                success: function(data) {
                                  if(data != "" && data != null)
                                  {
                                      console.log(data);

                                      if(data.includes("registration-error-email-exists"))
                                      {
                                        var password                        = document.getElementById('password-register');
                                        var confirm_password                = document.getElementById('confirm-password-register');
                                        password.value                      = "";
                                        confirm_password.value              = "";

                                        email.value                         = "";

                                        var email_register_error            = document.getElementById('email_register_error');
                                        email_register_error.innerHTML      = " *email sudah digunakan";
                                        fn.register("reload");
                                      }
                                      else if(data.includes("registration-error-invalid-email"))
                                      {
                                        var password                        = document.getElementById('password-register');
                                        var confirm_password                = document.getElementById('confirm-password-register');
                                        password.value                      = "";
                                        confirm_password.value              = "";

                                        email.value                         = "";
                                        var email_register_error            = document.getElementById('email_register_error');
                                        email_register_error.innerHTML      = " *email tidak valid";
                                        fn.register("reload");
                                      }
                                      else if(data.includes("registration-error-username-exists"))
                                      {
                                        var password                        = document.getElementById('password-register');
                                        var confirm_password                = document.getElementById('confirm-password-register');
                                        password.value                      = "";
                                        confirm_password.value              = "";

                                        var username                        = document.getElementById('username-register');
                                        username.value                      = "";

                                        var username_register_error         = document.getElementById('username_register_error');
                                        username_register_error.innerHTML   = " *username sudah digunakan";
                                        fn.register("reload");
                                      }
                                      else
                                      {
                                        cek = "";
                                        ActivityIndicator.hide();
                                        var content = document.getElementById('content');
                                        var menu = document.getElementById('menu');
                                           content.load('login.html')
                                          .then(menu.close.bind(menu));

                                        $.notify("Daftar berhasil", {position :"bottom center", className: 'success'});
                                      }
                                  }
                                },
                                error: function( jqXhr, textStatus, errorThrown ) {
                                    console.log( errorThrown );
                                    ActivityIndicator.hide();
                                } 
                          });
                  // }
                }
            };


            // window.fn.login = function(page) {
            //   var username = document.getElementById('username').value;
            //   var password = document.getElementById('password').value;
            //   var content = document.getElementById('content');

            //   if (username === 'bob' && password === 'secret') {
            //     content.load(page);
            //   }
            //   else {
            //     ons.notification.alert('Incorrect username or password.');
            //   }
            
            // };

            
          });
        </script>
        
    </head>
    
    <body id="deviceready">

<ons-navigator id="mainNavigator" page="splitter.html" var="myNavigator">
</ons-navigator>


<ons-template id="splitter.html">
    <ons-splitter>
      <ons-splitter-side id="menu" side="left" width="220px" collapse>
        <ons-page>
          <ons-list>
          <div class="login-user" style="background:url('img/brick.jpg') repeat;">
            <ons-row>
            <ons-col width="40%">
            <img class="img-profile" src="img/profile.png">
            </ons-col>
            <ons-col width="60%" style="text-transform: none; padding-top:2.25em;">
              Halo,<br>
              <span id="nama_user" style="font-size:11pt;">Guest</span>
            </ons-col>
            </ons-row>
          </div>
            <hr style="margin-top:0px; margin-bottom:0px;">
            <ons-list-item style="font-size:18px;" onclick="fn.load('home.html')" tappable>
               <div class="left ion-home" style="margin-right:20px;"></div>
               Beranda
            </ons-list-item>
            <ons-list-item id="menu_daftar" style="font-size:18px;" onclick="fn.load('register.html')" tappable>
               <div class="left ion-android-open" style="margin-right:20px;"></div>
               Daftar
            </ons-list-item>
            <ons-list-item id="menu_masuk" style="font-size:18px;" onclick="fn.load('login.html')" tappable>
               <div class="left ion-android-open" style="margin-right:20px;"></div>
               Masuk
            </ons-list-item>
            <ons-list-item  style="font-size:18px;" onclick="fn.load('cart.html')" tappable>
               <div class="left ion-ios-cart" style="margin-right:20px;"></div>
               Keranjang Belanja
            </ons-list-item>
            <ons-list-item  style="font-size:18px;" onclick="fn.load('confirmation.html')" tappable>
               <div class="left ion-social-usd" style="margin-right:20px;"></div>
               Konfirmasi
            </ons-list-item>
            <ons-list-item id="menu_profile" style="font-size:18px;" onclick="fn.load('akun.html')" tappable>
               <div class="left ion-person" style="margin-right:20px;"></div>
               Profil
            </ons-list-item>
            <div id="extra_page">
            </div>
            <ons-list-item id="menu_keluar" style="font-size:18px;" onclick="showDialog('dialog-3')" tappable>
               <div class="left ion-power" style="margin-right:20px;"></div>
               Keluar
            </ons-list-item>
          </ons-list>
        </ons-page>
      </ons-splitter-side>
      <ons-splitter-content id="content" page="home.html"></ons-splitter-content>
    </ons-splitter>
      <!-- <div id="splash_parent">
        <div id="splash">
        </div>
      </div> -->
    </ons-template>

    <ons-template id="home.html">
      <ons-page >
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.open()">
              <ons-icon icon="md-menu"></ons-icon>
            </ons-toolbar-button>
          </div>

          <div class="center" style="text-align:center;">
            <ons-if platform="android">
              <img src="img/logo_revo.png" style="width:35%; display: inline-block; margin:0 auto">
            </ons-if>
            <ons-if platform="ios other">
              <img src="img/logo_revo_black.png" style="width:35%; display: inline-block; margin:0 auto">
            </ons-if>
          </div>
          <div class="right">
            <ons-toolbar-button onclick="fn.load('cart.html')">
              <ons-icon icon="ion-ios-cart"><span id=cart_icon3 style="margin-left:-5px;" class="badge">0</span></ons-icon>
            </ons-toolbar-button>
          </div>


        </ons-toolbar>

        <div id="home_container">
        
        </div>
              
      </ons-page>
    </ons-template>

    <ons-template id="akun.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.open()">
              <ons-icon icon="md-menu"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Profile
          </div>
          
        </ons-toolbar>

        <div class="process panel panel-default">
            <h4 style="text-align:center;"><b>Biodata Diri</b></h4>
                <hr style="margin:0px 50px;">
            <form class="form-profile">
             <div class="form-group">
                    <label for="username_profile">Username <span>*</span></label>
                    <input type="text" class="form-control" id="username_profile" placeholder="" disabled="true">
                </div>
                <div class="form-group">
                    <label for="nama_depan_profile">Nama Depan</label>
                    <input type="text" class="form-control" id="nama_depan_profile" placeholder="">
                </div>
                <div class="form-group">
                    <label for="nama_belakang_profile">Nama Belakang</label>
                    <input type="text" class="form-control" id="nama_belakang_profile" placeholder="">
                </div>
                <div class="form-group">
                    <label for="nohp_profile">Nomor Telepon</label>
                    <input type="number" class="form-control" id="nohp_profile" placeholder="">
                </div>
                <div class="form-group">
                    <label for="email_profile">Email <span>*</span></label>
                    <input type="email" class="form-control" id="email_profile" placeholder="" disabled="true">
                </div>
                <div class="form-group">
                    <label for="alamat_profile">Alamat</label>
                    <input type="text" class="form-control" id="alamat_profile" placeholder="">
                </div>
                <div class="form-group">
                    <label for="perusahaan_profile">Perusahaan</label>
                    <input type="text" class="form-control" id="perusahaan_profile" placeholder="">
                </div>
                
                <!-- <div class="form-group">
                    <ons-row>
                        <ons-col width="20%">
                            <label for="tanggal">Tanggal</label>
                            <input type="number" class="form-control" id="tanggal">
                        </ons-col>
                        <ons-col>
                        </ons-col>
                        <ons-col width="40%">
                            <label for="bulan">Bulan</label>
                            <div class="dropdown">
                                <select class="form-control" id="bulan" name="Bulan">
                                    <option value="januari">Januari</option>
                                    <option value="februari">Februari</option>
                                    <option value="maret">Maret</option>
                                    <option value="april">April</option>
                                    <option value="mei">Mei</option>
                                    <option value="juni">Juni</option>
                                    <option value="juli">Juli</option>
                                    <option value="agustus">Agustus</option>
                                    <option value="september">September</option>
                                    <option value="oktober">Oktober</option>
                                    <option value="november">November</option>
                                    <option value="desember">Desember</option>
                                </select>
                            </div>
                        </ons-col>
                        <ons-col>
                        </ons-col>
                        <ons-col width="30%">
                            <label for="tahun">Tahun</label>
                            <div class="dropdown">
                                <select class="form-control" id="tahun" name="Tahun">
                                    <option value="1960">1960</option>
                                    <option value="1961">1961</option>
                                    <option value="1962">1962</option>
                                    <option value="1963">1963</option>
                                    <option value="1964">1964</option>
                                    <option value="1965">1965</option>
                                    <option value="1966">1966</option>
                                    <option value="1967">1967</option>
                                    <option value="1968">1968</option>
                                    <option value="1969">1969</option>
                                    <option value="1970">1970</option>
                                    <option value="1971">1971</option>
                                    <option value="1972">1972</option>
                                    <option value="1973">1973</option>
                                    <option value="1974">1974</option>
                                    <option value="1975">1975</option>
                                    <option value="1976">1976</option>
                                    <option value="1977">1977</option>
                                    <option value="1978">1978</option>
                                    <option value="1979">1979</option>
                                    <option value="1980">1980</option>
                                    <option value="1981">1981</option>
                                    <option value="1982">1982</option>
                                    <option value="1983">1983</option>
                                    <option value="1984">1984</option>
                                    <option value="1985">1985</option>
                                    <option value="1986">1986</option>
                                    <option value="1987">1987</option>
                                    <option value="1988">1988</option>
                                    <option value="1989">1989</option>
                                    <option value="1990">1990</option>
                                    <option value="1991">1991</option>
                                    <option value="1992">1992</option>
                                    <option value="1993">1993</option>
                                    <option value="1994">1994</option>
                                    <option value="1995">1995</option>
                                    <option value="1996">1996</option>
                                    <option value="1997">1997</option>
                                    <option value="1998">1998</option>
                                    <option value="1999">1999</option>
                                    <option value="2000">2000</option>
                                    <option value="2001">2001</option>
                                    <option value="2002">2002</option>
                                    <option value="2003">2003</option>
                                </select>
                            </div>
                        </ons-col>
                    </ons-row>
                </div> -->
                <div class="form-group">
                  <label for="provinsi_profile">Provinsi</label>
                  <div class="dropdown">
                      <select class="form-control" id="provinsi_profile" name="Provinsi">
                      </select>
                  </div>
              </div>
              <div class="form-group">
                  <label for="kota_profile">Kota</label>
                  <div class="dropdown">
                    <select class="form-control" id="kota_profile" name="Kota">
                    </select>
                  </div>
              </div>
              <div class="form-group">
                  <label for="kode_pos_profile">Kode Pos</label>
                  <input type="number" class="form-control" id="kode_pos_profile" placeholder="" disabled="true">
              </div>
            <ons-row style="margin-bottom:1em;">
                <ons-col>
                    <span style="color:red;"> * tidak dapat diubah</span>
                </ons-col>
            </ons-row>  
            <ons-row>
                <ons-col width="30%">
                </ons-col>
                <ons-col>
                    <ons-button id="edit_profile_submit" type="submit" modifier="large" onclick="fn.editProfile()" >Submit</ons-button>
                </ons-col>
                <ons-col width="30%">
                </ons-col>
            </ons-row>  
            </form>
            
        </div>
        
      </ons-page>
    </ons-template>

    <ons-template id="wanita.html">
      <ons-page>

        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.open()">
              <ons-icon icon="md-menu"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div id="title" class="center"></div>
          <div class="right">
            <ons-toolbar-button onclick="fn.load('cart.html')">
              <ons-icon icon="ion-ios-cart"><span id=cart_icon style="margin-left:-5px;" class="badge">0</span></ons-icon>
            </ons-toolbar-button>
          </div>
        </ons-toolbar>
        
        <ons-row>
            <ons-col style="text-align:center;">
            <h4>Product</h4>
            <hr style="width:80%;margin-top:0px; margin-bottom:10px;">
            </ons-col>
        </ons-row>
        <div id="product"></div>
      </ons-page>
    </ons-template>

    <ons-template id="detail.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button id="back_button" onclick="fn.load('wanita.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Detail
          </div>
          <div class="right">
            <ons-toolbar-button onclick="fn.load('cart.html')">
              <ons-icon icon="ion-ios-cart"><span id=cart_icon2 style="margin-left:-5px;" class="badge">0</span></ons-icon>
            </ons-toolbar-button>
          </div>
        </ons-toolbar>
        
        <ons-carousel id="carousel" style=" margin-top:10px; margin-bottom:20px;height: 60%; width: 100%" swipeable overscrollable auto-scroll>
        
        </ons-carousel>
        
        <div class="detail-item col-xs-12">
            
        </div>
        
      </ons-page>
    </ons-template>

    <ons-template id="register.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.open()">
              <ons-icon icon="md-menu"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Register
          </div>
          
        </ons-toolbar>

        <div class="process panel panel-default">
            <h4 style="text-align:center;"><b>Biodata Diri</b></h4>
                <hr style="margin:0px 50px;">
            <form class="form-profile">
                <div class="form-group">
                  <label for="first-name-register">Nama Depan <span id="nama_depan_register_error">*harus diisi</span></label>
                  <input type="text" class="form-control" id="first-name-register" placeholder="">
                </div>
                <div class="form-group">
                  <label for="last-name-register">Nama Belakang </label>
                  <input type="text" class="form-control" id="last-name-register" placeholder="">
                </div>
                <div class="form-group">
                    <label for="username-register">Username <span id="username_register_error">*harus diisi</span></label>
                    <input type="text" class="form-control" id="username-register" placeholder="">
                </div>
                <div class="form-group">
                    <label for="password-register">Password <span id="password_register_error">*harus diisi</span></label>
                    <input type="password" class="form-control" id="password-register" placeholder="">
                </div>
                <div class="form-group">
                    <label for="confirm-password-register">Confirm Password</label>
                    <input type="password" class="form-control" id="confirm-password-register" placeholder="">
                </div>
                <div class="form-group">
                    <label for="perusahaan-register">Nama Perusahaan</label>
                    <input type="text" class="form-control" id="perusahaan-register" placeholder="">
                </div>
                <div class="form-group">
                    <label for="alamat-register">Alamat Lengkap <span id="alamat_register_error">*harus diisi</span></label>
                    <input type="text" class="form-control" id="alamat-register" placeholder="">
                </div>
                <div class="form-group">
                  <label for="provinsi-register">Provinsi <span id="provinsi_register_error">*pilih salah satu</span></label>
                    <div class="dropdown">
                      <select class="form-control" id="provinsi-register" name="Provinsi">
                      </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="kota-register">Kota <span id="kota_register_error">*pilih provinsi terlebih dahulu</span></label>
                      <div class="dropdown">
                        <select class="form-control" id="kota-register" name="Kota">
                        </select>
                      </div>
                </div>
                <div class="form-group">
                    <label for="kode-pos-register">Kode Pos <span id="kode_pos_register_error">*pilih kota terlebih dahulu</span></label>
                    <input type="text" class="form-control" id="kode-pos-register" placeholder="" disabled="true">
                </div>
                <div class="form-group">
                    <label for="email-register">Email <span id="email_register_error">*harus diisi</span></label>
                    <input type="text" class="form-control" id="email-register" placeholder="">
                </div>
                <div class="form-group">
                    <label for="nomor-telepon-register">Nomor Telepon <span id="phone_register_error">*harus diisi</span></label>
                    <input type="number" class="form-control" id="nomor-telepon-register" placeholder="">
                </div>
                
            <ons-row style="margin-bottom:1em;">
                <!-- <ons-col>
                    <span style="color:red;"> * harus diisi</span>
                </ons-col> -->
                
            </ons-row>  
            <ons-row>
                <ons-col width="30%">
                </ons-col>
                
                <ons-col>
                    <ons-button type="submit" modifier="large" onclick="fn.register('')">Submit</ons-button>
                </ons-col>
                
                <ons-col width="30%">
                </ons-col>
            </ons-row>  
            </form>
            
        </div>
        
      </ons-page>
    </ons-template>

    <ons-template id="login.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.open()">
              <ons-icon icon="md-menu"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Login
          </div>
        </ons-toolbar>

        <div class="login-box panel panel-default">
          <h4 style="text-align:center;">Masuk</h4>
          <hr>
          <form>
              <div class="form-group">
                  <ons-input id="username-login" modifier="underbar" placeholder="Username" float></ons-input>
              </div>
              <div class="form-group">
                  <ons-input id="password-login" modifier="underbar" placeholder="Password  "  type="password" float></ons-input>
              </div>
            
            <div class="form-group">
                <ons-row>
                  <ons-col id="login-error" style="color:red; font-size:12px;">
                    <!-- *username atau password salah -->
                  </ons-col>
                </ons-row>
            </div>
            <div class="form-group">
                <ons-button modifier="large" onclick="fn.login()">Sign in</ons-button>
            </div>
          </form>
          
        </div>

      </ons-page>
    </ons-template>

     <ons-template id="cart.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.load('home.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Cart
          </div>
        </ons-toolbar>
        
        <div id="cart_main">
            
               
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="extra_page.html">
     <ons-page id="extra_page_background">
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.load('home.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div id="extra_page_title" class="center">
            
          </div>
        </ons-toolbar>
        <div class="process panel panel-default"> 
          <div id="extra_page_main">
            
          </div>
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="proceed.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button id="back_button_proceed" onclick="fn.load('cart.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Biodata Penerima
          </div>
        </ons-toolbar>
        <div class="row bs-wizard" style="border-bottom:0;">
                
                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled"><!-- complete -->
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled"><!-- complete -->
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled"><!-- active -->
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>

                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div>
        </div>
        <div>
        <form class="process-pemesan panel panel-default">
        <h4>Biodata Pemesan</h4>
        <hr>

            <div class="form-group">
                <label for="nama_depan">Nama Depan <span id="nama_depan_error"></span></label>
                <input type="text" class="form-control" id="nama_depan" placeholder="">
            </div>
            <div class="form-group">
                <label for="nama_belakang">Nama Belakang</label>
                <input type="text" class="form-control" id="nama_belakang" placeholder="">
            </div>
            <div class="form-group">
                <label for="perusahaan">Perusahaan</label>
                <input type="text" class="form-control" id="perusahaan" placeholder="">
            </div>
            <div class="form-group">
                <label for="alamat_pengiriman">Alamat Pengiriman <span id="alamat_error"></span></label>
                <input type="text" class="form-control" id="alamat_pengiriman" placeholder="">
            </div>
            <div class="form-group">
                <label for="provinsi">Provinsi</label>
                <div class="dropdown">
                    <select class="form-control" id="provinsi_data_diri" name="Provinsi">
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="kota_pengiriman">Kota <span id="kota_error"></label>
                <div class="dropdown">
                    <select class="form-control" id="kota_data_diri" name="Kota">
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="kode_pos">Kode Pos <span id="kode_pos_error"></label>
                <input type="number" class="form-control" id="kode_pos_data_diri" value="" disabled="true">
            </div>
            <div class="form-group">
                <label for="email">Email <span id="email_error"></span> <br> <span style="color:grey; font-size:12px">(Resi pembelian akan dikirim ke email ini)</span></label>
                <input type="text" class="form-control" id="email" placeholder="">
            </div>
            <div class="form-group">
                <label for="nomor_telepon">Nomor Telepon <span id="nomor_telepon_error"></label>
                <input type="number" class="form-control" id="nomor_telepon" placeholder="">
            </div>
        <hr>
        <ons-button modifier="large" onclick="fn.proceedDataDiri()">Lanjutkan</ons-button>
          
        </form>
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="shipping.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button id="back_button_proceed" onclick="fn.load('proceed.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Pilih Tujuan
          </div>
        </ons-toolbar>
        <div class="row bs-wizard" style="border-bottom:0;">
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>

                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>

                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div>

                
        </div>
        <div>
        <form class="process-pemesan panel panel-default">
        <h4>Pilih Tujuan</h4>
        <hr>
            <ons-row id="shipping_origin">
                <ons-col>
                    <div class="form-group">
                        <label for="provinsiasal">Provinsi Pengirim</label>
                        <div class="dropdown">
                            <select class="form-control" id="provinsi_shipping_origin" name="Provinsiasal">
                            </select>
                        </div>
                    </div>
                </ons-col>
                <ons-col width="5%">
                </ons-col>
                <ons-col>
                    <div class="form-group">
                        <label for="kotaasal">Kota Pengirim</label>
                         <!--  <input type="text" class="form-control" id="kota_shipping_origin" name="Kotaasal" disabled="true"> -->
                        <div class="dropdown">
                            <select class="form-control" id="kota_shipping_origin" name="Kotaasal">
                            </select>
                        </div>
                    </div>
                </ons-col>
            </ons-row>
            <ons-row>
                <ons-col>
                    <div class="form-group">
                        <label for="provinsitujuan">Provinsi Tujuan</label>
                        <div class="dropdown">
                            <select class="form-control" id="provinsi_shipping_destination" name="Provinsitujuan">
                            </select>
                        </div>
                    </div>
                </ons-col>
                <ons-col width="5%">
                </ons-col>
                <ons-col>
                    <div class="form-group">
                        <label for="kota">Kota Tujuan</label>
                        <div class="dropdown">
                            <select class="form-control" id="kota_shipping_destination" name="Kotatujuan">
                            </select>
                        </div>
                    </div>
                </ons-col>
            </ons-row>
            <div class="form-group">
                <label for="kurir">Kurir</label>
                <div class="dropdown">
                    <select class="form-control" id="kurir_shipping" name="Kurir">
                        <option value="blank">Pilih Jasa Pengiriman</option>
                        <option value="jne">JNE</option>
                        <option value="pos">POS INDONESIA</option>
                        <option value="tiki">TIKI</option>
                    </select>
                </div>
            </div>
        <hr>
        <ons-button id="cek_ongkir_button" modifier="large" disabled="true">Lanjutkan</ons-button>
          
        </form>
        </div>
      </ons-page>
    </ons-template>


                <!-- <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>

                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>

                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div> -->

    <ons-template id="shipping2.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button id="back_button_shipping"">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Pilih Jasa
          </div>
        </ons-toolbar>
        <div class="row bs-wizard" style="border-bottom:0;">
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>

                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>

                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div>

                
        </div>
        <div>
        <form id="shipping_service" class="process-pemesan panel panel-default">
        <!-- <h4>Pilih Jasa</h4>
        <hr>
            <div class="col-lg-6">
              <div class="input-group kurir">
                <span class="input-group-addon">
                  <input type="radio" name="optradio">
                </span>
                <div class="custom-border">
                <p>Service 2 : Ongkos  Kirim Ekomonis (OKE)</p>
                <p>Estimasi : 3-5 hari</p>
                <p>Harga : Rp. 23000</p>
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <div class="input-group kurir">
                <span class="input-group-addon">
                  <input type="radio" name="optradio">
                </span>
                <div class="custom-border">
                    <p>Service 2 : Layangan Reguler (REG)</p>
                    <p>Estimasi : 1-2 hari</p>
                    <p>Harga : Rp. 27000</p>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="input-group kurir">
                <span class="input-group-addon">
                  <input type="radio" name="optradio">
                </span>
                <div class="custom-border">
                <p>Service 1 : Layangan Reguler (REG)</p>
                <p>Estimasi : 1-2 hari</p>
                <p>Harga : Rp. 27000</p>
                </div>
              </div>
            </div>
                
            
            
        <hr>
        <ons-button modifier="large" onclick="fn.proceedDataDiri()">Lanjutkan</ons-button> -->
          
        </form>
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="pembayaran.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button id="back_button_pembayaran" onclick="fn.load('shipping2.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Pembayaran
          </div>
        </ons-toolbar>
        <div class="row bs-wizard" style="border-bottom:0;">
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>

                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div>
        </div>
        <div>
        <form class="process panel panel-default">
        <h4>Metode Pembayaran</h4>
        <hr>
        <div class="form-group">
            <label for="metode">Metode pembayaran yang digunakan :</label>
            <ons-row>
                <ons-col width="60%">
                    <div class="dropdown">
                        <select class="form-control" id="metode" name="metode">
                            <option value="transfer">Transfer Bank</option>
                            <option value="veritrans">Veri Trans</option>
                        </select>
                    </div>
                </ons-col>
            </ons-row>
        </div>

            <!-- <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"> -->

              <div id="panel_transfer_bank" class="panel panel-default">
                <a class="collapsed panel-title" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">

                    <div class="heading-panel panel-heading" role="tab" id="headingOne">
                      
                      <h4 class="panel-title">
                          Rincian (Transfer Bank)
                      </h4>
                    </div>
                </a>
                <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                  <div class="panel-body">
                      <ons-row style="text-align:center; margin-bottom:5px;">
                              <ons-col width='10%'>
                              </ons-col>
                              <ons-col>
                               <img src="img/bank.png">
                              </ons-col>
                              <ons-col width='10%'>
                              </ons-col>
                      </ons-row> 
                      <ons-row width="100%">
                          <ons-col style="text-align:left;" width="70%">
                              Biaya Transaksi
                          </ons-col>
                              
                          <ons-col id="biaya_transaksi_bank" style="text-align:right;" width="30%">
                              Rp 39.900
                          </ons-col>
                      </ons-row>
                      <ons-row width="100%">
                          <ons-col style="text-align:left;" width="70%">
                              Biaya Kurir
                          </ons-col>
                          <ons-col id="biaya_kurir_bank" style="text-align:right;" width="30%">
                              Rp 15.000
                          </ons-col>
                      </ons-row>
                      
                    <ons-row style="text-align:center; margin-bottom:5px;">
                      <ons-col style="color:grey; text-align:left;">
                        <p>Total</p>
                      </ons-col>
                      <ons-col id="total_bank"style="text-align:right;">
                       <b>Rp 54.900</b>
                      </ons-col>
                    </ons-row> 
                    <br>
                    <ons-row style="margin-bottom:5px;">
                        <ons-col width="5%">
                        </ons-col>
                        <ons-col style="color:grey;">
                        <ul class="pembayaran-info">
                        <li>Total belanja Anda <b>belum termasuk</b> kode pembayaran.</li>
                        <li>Transaksi dengan menggunakan metode pembayaran transfer akan ditambahan kode pembayaran.</li>
                        <li>Pembayaran dengan angka yang tidak tepat akan menyebabkan verifikasi pembayaran menjadi terhambat.</li>
                        </ul>
                        </ons-col>
                    </ons-row>
                  </div>
                </div>
              </div>

              <div id="panel_veritrans" class="panel panel-default">
                <a class="collapsed panel-title" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                    <div class="heading-panel panel-heading" role="tab" id="headingThree">
                      <h4 class="panel-title">
                          Rincian (Veritrans)
                      </h4>
                    </div>
                </a>
                <div id="collapseThree" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingThree">
                  <div class="panel-body">
                      <ons-row style="text-align:center; margin-bottom:5px;">
                          <ons-col width='25%'>
                          </ons-col>
                          <ons-col>
                           <img src="img/veritrans.png">
                          </ons-col>
                          <ons-col width='25%'>
                          </ons-col>
                      </ons-row> 
                      <ons-row width="100%">
                          <ons-col style="text-align:left;" width="70%">
                              Biaya Transaksi
                          </ons-col>
                              
                          <ons-col id="biaya_transaksi_veritrans" style="text-align:right;" width="30%">
                              Rp 39.900
                          </ons-col>
                      </ons-row>
                      <ons-row width="100%">
                          <ons-col style="text-align:left;" width="70%">
                              Biaya Kurir
                          </ons-col>
                          <ons-col id="biaya_kurir_veritrans" style="text-align:right;" width="30%">
                              Rp 15.000
                          </ons-col>
                      </ons-row>
                      <ons-row width="100%">
                          <ons-col style="text-align:left;" width="70%">
                              Total Belanja
                          </ons-col>
                          <ons-col id="total_veritrans" style="text-align:right;" width="30%">
                              <b>Rp 54.900</b>
                          </ons-col>
                      </ons-row>
                      <ons-row style="margin-bottom:5px;">
                        <ons-col width="5%">
                        </ons-col>
                        <ons-col style="color:grey;">
                        <ul class="pembayaran-info">
                        <li>Pembayaran dengan angka yang tidak tepat akan menyebabkan verifikasi pembayaran menjadi terhambat.</li>
                        </ul>
                        </ons-col>
                    </ons-row>
                      <!-- <ons-row style="margin-top:1em;">
                          <ons-col class="panel panel-default bank-cart" style="text-align:center;" width="45%">
                              <img src="img/mandiri.png" class="img-bank">
                              <h6><b>Bank Mandiri</b></h6>
                              <p> Cabang Citraland <br>
                                  165 003 0073122 <br>
                                  a/n Myme International</p>
                          </ons-col>
                          <ons-col class="panel panel-default bank-cart" style="text-align:center; margin-top: 0px;" width="45%">
                              <img src="img/bca.png" class="img-bank">
                              <h6><b>Bank BCA</b></h6>
                              <p> Cabang Citraland <br>
                                  372 178 5061 <br>
                                  a/n Myme International</p>
                          </ons-col>
                          
                      </ons-row>
                      <ons-row style="margin-top:1em;">
                          <ons-col class="panel panel-default bank-cart" style="text-align:center; margin-top: 0px;" width="45%">
                              <img src="img/bni.png" class="img-bank">
                              <h6><b>Bank BNI</b></h6>
                              <p> Cabang Lontar <br>
                                  800 600 6007 <br>
                                  a/n Myme International</p>
                          </ons-col>
                          <ons-col class="panel panel-default bank-cart" style="text-align:center; margin-top: 0px;" width="45%">
                              <img src="img/bri.png" class="img-bank">
                              <h6><b>Bank BRI</b></h6>
                              <p> Cabang G-walk <br>
                                  037 701 000435302 <br>
                                  a/n Myme International</p>
                          </ons-col>
                      </ons-row> -->
                        
                  </div>
                </div>
              </div>
            <!-- </div> -->
<!-- 
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
              <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingOne">
                  <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      Transfer Bank
                    </a>
                  </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                  <div class="panel-body">
                    blablabla
                  </div>
                </div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingTwo">
                  <h4 class="panel-title">
                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                      Mandiri Clickpay
                    </a>
                  </h4>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                  <div class="panel-body">
                      blablabla
                  </div>
                </div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingThree">
                  <h4 class="panel-title">
                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                      Mandiri E-Cash
                    </a>
                  </h4>
                </div>
                <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                  <div class="panel-body">
                    blablabla
                  </div>
                </div>
              </div>
            </div> -->
            
        <hr>
        <ons-button modifier="large" id="button_lanjutkan_pembayaran">Lanjutkan</ons-button>
          
        </form>
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="summary1.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button id="back_button_summary1">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>
          <div class="center">
            Ringkasan Transaksi
          </div>
        </ons-toolbar>
        <div class="row bs-wizard" style="border-bottom:0;">
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>

                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>

                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step disabled">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div>
        </div>
        <div class="process panel panel-default">
             <div class="panel panel-default">
                  <div class="panel-heading panel-style">Informasi Pembeli</div>
                  <div id="data_customer" class="panel-body">
                    <!-- <p>Andra Agusta</p>
                    <p>085349981161</p>
                    <p>Taman Puspa Raya B9/17 Citraland</p>
                    <p>Surabaya</p> -->
                  </div>
              </div> 

              <div id="barang_belanja" class="panel panel-default">
              
               </div>

              <div class="panel panel-default">
                  <div class="panel-heading panel-style">Metode Pembayaran</div>
                  <div class="panel-body">
                    <ons-row style="text-align:center; margin-bottom:5px;">
                      
                      <ons-col style="color:grey; text-align:left;">
                        <p id="metode_pembayaran">Pembayaran Melalui <b>Transfer Bank</b></p>
                      </ons-col>
                      <ons-col>
                       <img id="metode_pembayaran_img" src="img/bank.png">
                      </ons-col>
                    </ons-row> 

                    <ons-row style="text-align:center; margin-bottom:5px;">
                      <ons-col style="color:grey; text-align:left;">
                        <p>Total</p>
                      </ons-col>
                      <ons-col id="total_transaksi" style="text-align:right;">
                       <b>Rp 54.900</b>
                      </ons-col>
                    </ons-row> 
                    <br>
                    <ons-row id="metode_pembayaran_note" style="text-align:center; margin-bottom:5px;">
                        <ons-col width="5%">
                        </ons-col>
                        <ons-col style="color:grey; text-align:center;">
                        <i>Intruksi Pembayaran akan diberikan di halaman selanjutnya</i>
                        </ons-col>
                    </ons-row>  
                  </div>
              </div>

            <ons-button id="checkout" modifier="large" onclick="showDialog('dialog-2')">Check Out</ons-button>

            <ons-alert-dialog id="dialog-2">
              <div class="alert-dialog-title">Confirm</div>
              <div class="alert-dialog-content">
                Lanjut ke pembayaran?
              </div>
              <div class="alert-dialog-footer">
                <button id="checkout_c_button" name="checkout_c_button" class="alert-dialog-button" onclick="hideDialog('dialog-2')">Cancel</button>
                <button id="checkout_button" class="alert-dialog-button" onclick="fn.load('checkout.html')">OK</button>
              </div>
            </ons-alert-dialog>


        </div>
      </ons-page>
    </ons-template>

    <ons-template id="checkout.html">
      <ons-page>
        <ons-toolbar>
          
          <div class="center">
            Konfirmasi Pembayaran
          </div>

        </ons-toolbar>
        <div class="row bs-wizard" style="border-bottom:0;">
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 1</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Data Diri</div>
                </div>

                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 2</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Tujuan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 3</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Pilih Jasa</div>
                </div>

                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 4</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Metode Pembayaran</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step complete">
                  <div class="text-center bs-wizard-stepnum">Step 5</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Ringkasan</div>
                </div>
                
                <div class="col-xs-2 bs-wizard-step active">
                  <div class="text-center bs-wizard-stepnum">Step 6</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <div class="bs-wizard-dot"></div>
                  <div class="bs-wizard-info text-center">Konfirmasi</div>
                </div>
        </div>

        <div class="process panel panel-default">
        <h5 style="text-align:center;">Kode Transaksi</h5>
        <p id="kode_transaksi_checkout" style="text-align:center;"><b><i></i></b></p>
        <p style="text-align:center;"><span id="email_checkout"></span></p>
            <hr>

        <ons-row style="text-align:center; margin-bottom:5px;">
            <ons-col width="5%">
            </ons-col>
            <ons-col id="text_harga_checkout" style="color:grey; text-align:left;">
            Jumlah yang harus dilunaskan:
            </ons-col>
            <ons-col id="harga_checkout">
              <b>Rp. </b>
            </ons-col>
            
        </ons-row>  
        <ons-row style="text-align:center;">
          <ons-col width="5%">
            </ons-col>
            <ons-col id="text_rekening_checkout" style="text-align:left;">
                Silahkan lakukan pembayaran ke salah satu nomor rekening berikut:
            </ons-col>
            <ons-col width="5%">
            </ons-col>
        </ons-row>
        <div id="bank_checkout">
          <ons-row class="panel panel-default rekening" style="margin-top:0.5em;">
            <ons-col width="30%">
            <div style="padding-top:40%">
                <img src="img/bni.png" style="margin: 0 auto;">
            </div>
            </ons-col>
            <ons-col>
                <h6><b>Bank BNI</b></h6>
                <p> Cabang Lontar <br>
                800 600 6007 <br>
                a/n Myme International</p>
            </ons-col>
            
          </ons-row>

          <ons-row class="panel panel-default rekening" style="margin-top:0.5em;">
            <ons-col width="30%">
            <div style="padding-top:40%">
            <img src="img/mandiri.png" style="margin: 0 auto;">
            </div>
            </ons-col>
            <ons-col>
                <h6><b>Bank Mandiri</b></h6>
                              <p> Cabang Citraland <br>
                                  165 003 0073122 <br>
                                  a/n Myme International</p>
            </ons-col>
            
          </ons-row>
          

          <ons-row class="panel panel-default rekening" style="margin-top:0.5em;">
            <ons-col width="30%">
            <div style="padding-top:40%">
                <img src="img/bca.png" style="margin: 0 auto;">
            </div>
            </ons-col>
            <ons-col>
                <h6><b>Bank BCA</b></h6>
                              <p> Cabang Citraland <br>
                                  372 178 5061 <br>
                                  a/n Myme International</p>
            </ons-col>
            
          </ons-row>

          <ons-row class="panel panel-default rekening" style="margin-top:0.5em;">
            <ons-col width="30%">
            <div style="padding-top:40%">
                <img src="img/bri.png" style="margin: 0 auto;">
            </div>
            </ons-col>
            <ons-col>
                <h6><b>Bank BRI</b></h6>
                              <p> Cabang G-walk <br>
                                  037 701 000435302 <br>
                                  a/n Myme International</p>
            </ons-col>
          </ons-row>
        </div>

          <ons-row id="text_harga2_checkout" style="text-align:center; margin-bottom:5px; margin-top:1em;">
          <ons-col width="5%">
            </ons-col>
              <ons-col style="color:grey; text-align:left;">
              Jumlah yang harus dilunaskan:
              </ons-col>
              <ons-col id="harga2_checkout">
                <b>Rp. </b>
              </ons-col>
          </ons-row> 

          <ons-row style="text-align:center; margin-bottom:5px;">
          <ons-col width="5%">
            </ons-col>
              <ons-col style="color:grey; text-align:left;">
                <ul id="info_checkout" class="pembayaran-info" style="color:grey;">
                    <li>Pastikan Anda membayar sama dengan angka total yang tertera diatas</li>
                    <li>Pembayaran dengan angka yang tidak tepat akan menyebabkan verifikasi pembayaran menjadi terhambat</li>
                </ul>
              </ons-col>
              <ons-col width="5%">
            </ons-col>
          </ons-row> 
          <div id="tes"></div>
           
            <ons-button modifier="large" onclick="fn.load('home.html')">home</ons-button>

        </div>

      </ons-page>
    </ons-template>
    <ons-template id="confirmation.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.load('home.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>

          <div class="center">
            Konfirmasi Pembayaran
          </div>
          <div class="right">
            <ons-toolbar-button onclick="fn.load('form.html')">
              <ons-icon icon="ion-document-text"></ons-icon>
            </ons-toolbar-button>
            <ons-toolbar-button onclick="fn.load('daftarbank.html')">
              <ons-icon icon="ion-help"></ons-icon>
            </ons-toolbar-button>
          </div>
        </ons-toolbar>

        <div id="confirm_container">
       <!--  <div class="process panel panel-default">
          <h5 style="text-align:center;">Kode Transaksi</h5>
          <p style="text-align:center; font-size:12pt;"><b><i>#1434529142</i></b></p>
          
          <ons-row style="margin-bottom:5px;">
                  
                  <ons-col width="70%" style="padding-left:10px;">
                      <p style="margin:0px;">RIVER ISLAND | Leopard Print T-Shirt</p>
                      <span style="color:grey;">Quantity : 3</span>
                  </ons-col>
                  <ons-col width="30%">
                      <p><b>Rp 120.000,-</b></p>
                  </ons-col>
          </ons-row>

          <ons-row>
                  
                  <ons-col width="70%" style="padding-left:10px;">
                      <p style="margin:0px;">RIVER ISLAND | Leopard Print T-Shirt</p>
                      <span style="color:grey;">Quantity : 2</span>
                  </ons-col>
                  <ons-col width="30%">
                      <p><b>Rp 120.000,-</b></p>
                  </ons-col>
          </ons-row>
            <hr style="margin:10px;">
          <ons-row style="margin-bottom:10px;">
                <ons-col width="20%">
                </ons-col>
                <ons-col width="50%">
                <b>Grand Total</b>
                </ons-col>
                <ons-col width="30%">
                    <b>Rp 360.000,-</b>
                </ons-col>
          </ons-row>        
          <p style="text-align:justify; font-size:10pt; color:red; margin-left: 20px; margin-right: 20px;">* Pastikan sudah membayar sesuai Grand Total yang tercantum diatas. Setelah itu silahkan tekan tombol "Konfirmasi" dibawah ini  <br>
             * Tombol "Konfirmasi" hanya dapat di tekan 1 kali saja</p>


              <ons-button modifier="large" onclick="fn.load('home.html')">Konfirmasi</ons-button>
        </div>

        <div class="panel-confirmation">
          <div class="ion-android-done" style="font-size: 90px; color:green;"></div>
          Tidak ada Konfirmasi Pembelian
        </div> -->
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="form.html">
      <ons-page>
        <ons-toolbar>
          <div class="left">
            <ons-toolbar-button onclick="fn.load('confirmation.html')">
              <ons-icon icon="ion-arrow-left-c"></ons-icon>
            </ons-toolbar-button>
          </div>

          <div class="center">
            Form Konfirmasi
          </div>
          
        </ons-toolbar>

        <div class="process panel panel-default">
            <h4 style="text-align:center;"><b>Form Konfirmasi Pembayaran</b></h4>
                <hr style="margin:0px 50px;">
            <form class="form-profile">
                <div class="form-group">
                    <label for="kode_konfirmasi">Kode Transaksi</label>
                    <input type="number" class="form-control" id="kode_konfirmasi" placeholder="">
                </div>
                <div class="form-group">
                    <label for="nama_konfirmasi">Nama <span id="nama_depan_form_error"></span></label>
                    <input type="text" class="form-control" id="nama_konfirmasi" placeholder="">
                </div>
                <div class="form-group">
                    <label for="email_konfirmasi">Email <span id="email_form_error"></span></label>
                    <input type="text" class="form-control" id="email_konfirmasi" placeholder="">
                </div>
                <div class="form-group">
                    <label for="provinsi-register">Bank</label>
                    <div class="dropdown">
                        <select class="form-control" id="bank_konfirmasi" name="bank">
                            <option value="bca">BCA</option>
                            <option value="mandiri">Mandiri</option>
                            <option value="bni">BNI</option>
                            <option value="bri">BRI</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Tanggal Transfer</label>
                    <ons-row>
                        <ons-col width="25%">
                            <div class="dropdown">
                                <select class="form-control" id="tanggal" name="Tanggal">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                    <option value="24">24</option>
                                    <option value="25">25</option>
                                    <option value="26">26</option>
                                    <option value="27">27</option>
                                    <option value="28">28</option>
                                    <option value="29">29</option>
                                    <option value="30">30</option>
                                    <option value="31">31</option>
                                </select>
                            </div>
                        </ons-col>
                        <ons-col width="1%">
                        </ons-col>
                        <ons-col width="43%">
                            <div class="dropdown">
                                <select class="form-control" id="bulan" name="Bulan">
                                    <option value="1">Januari</option>
                                    <option value="2">Februari</option>
                                    <option value="3">Maret</option>
                                    <option value="4">April</option>
                                    <option value="5">Mei</option>
                                    <option value="6">Juni</option>
                                    <option value="7">Juli</option>
                                    <option value="8">Agustus</option>
                                    <option value="9">September</option>
                                    <option value="10">Oktober</option>
                                    <option value="11">November</option>
                                    <option value="12">Desember</option>
                                </select>
                            </div>
                        </ons-col>
                        <ons-col width="1%">
                        </ons-col>
                        <ons-col width="30%">
                            <div class="dropdown">
                                <select class="form-control" id="tahun" name="Tahun">
                                    <!-- <option value="2016">2016</option> -->
                                </select>
                            </div>
                        </ons-col>
                    </ons-row>
                </div>
                <div class="form-group">
                    <label for="nilai_transfer_konfirmasi">Nilai Transfer <span id="nilai_transfer_form_error"></span></label>
                    <input type="number" class="form-control" id="nilai_transfer_konfirmasi" placeholder="">
                </div>
                <div class="form-group">
                    <label for="foto_konfirmasi">Foto Bukti Pembayaran</label>
                    <input type='file' max-size=30000 onchange="readURL(this);" />
                    <img style="margin:0 auto; display:none;" class="image-konfirmasi" id="foto_konfirmasi" src="#" alt="your image" />
                </div>
                <div class="form-group">
                    <label for="catatan_konfirmasi">Catatan</label>
                    <textarea class="form-control" rows="5" id="catatan_konfirmasi" placeholder=""></textarea>
                </div>
            <ons-row>
                <ons-col width="30%">
                </ons-col>
                <ons-col>
                    <ons-button type="submit" modifier="large" onclick="fn.paymentConfirmation()">Submit</ons-button>
                </ons-col>
                <ons-col width="30%">
                </ons-col>
            </ons-row>  
            </form>
        </div>
      </ons-page>
    </ons-template>

    <ons-template id="daftarbank.html">
      <ons-page>
          <ons-toolbar>
            <div class="left">
              <ons-toolbar-button onclick="fn.load('confirmation.html')">
                <ons-icon icon="ion-arrow-left-c"></ons-icon>
              </ons-toolbar-button>
            </div>
            <div class="center">
              DAFTAR BANK
            </div>
          </ons-toolbar>
          <div class="bank-transfer">
              <ons-row class="panel panel-default detail-bank">
                  <ons-col width="35%" class="img-bank-parent">
                      <img src="img/mandiri.png" class="img-bank-konfirmasi">
                  </ons-col>
                  <ons-col class="detail-bank-konfirmasi">
                      <h6><b>Bank Mandiri</b></h6>
                      <p> Cabang Citraland <br>
                          165 003 0073122 <br>
                          a/n Myme International</p>
                  </ons-col>
              </ons-row>    
              <ons-row class="panel panel-default detail-bank">
                  <ons-col width="35%" class="img-bank-parent">
                  <img src="img/bca.png" class="img-bank-konfirmasi">
                  </ons-col>
                  <ons-col class="detail-bank-konfirmasi">
                      <h6><b>Bank BCA</b></h6>
                      <p> Cabang Citraland <br>
                          372 178 5061 <br>
                          a/n Myme International</p>
                  </ons-col>
              </ons-row>
              <ons-row class="panel panel-default detail-bank">
                  <ons-col width="35%" class="img-bank-parent">
                      <img src="img/bri.png" class="img-bank-konfirmasi">
                  </ons-col>
                  <ons-col class="detail-bank-konfirmasi">
                      
                      <h6><b>Bank BRI</b></h6>
                      <p> Cabang G-walk <br>
                          037 701 000435302 <br>
                          a/n Myme International</p>
                  </ons-col>
              </ons-row>
              <ons-row class="panel panel-default detail-bank">
                  <ons-col width="35%" class="img-bank-parent">
                      <img src="img/bni.png" class="img-bank-konfirmasi">
                  </ons-col>
                  <ons-col class="detail-bank-konfirmasi">
                      <h6><b>Bank BNI</b></h6>
                      <p> Cabang Lontar <br>
                          800 600 6007 <br>
                          a/n Myme International</p>
                  </ons-col>
              </ons-row>
          </div>
      </ons-page>
    </ons-template>

    <!-- Dialog untuk logout -->
    <ons-alert-dialog id="dialog-3">
      <div class="alert-dialog-title">Logout</div>
      <div class="alert-dialog-content">
        Apakah anda yakin ingin keluar ?
      </div>
      <div class="alert-dialog-footer">
        <button class="alert-dialog-button" onclick="fn.load('logout.html')">OK</button>
        <button class="alert-dialog-button" onclick="hideDialog('dialog-3')">Cancel</button>
      </div>
    </ons-alert-dialog>

    <style type="text/css">
      .notifyjs-corner {
            left: 0 !important;
            margin-right: 19%;
            margin-left: 19%;
            margin-top: 5em;
            position: relative;
            text-transform: none; b
        }
    </style>
  </body>

  <script>
    function openBrowser(customer_data) {

      var url;
      var harga   = 0;
      var item    = new Array();
      var cart    = JSON.parse(storage.getItem("cart"));

      for (var i = 0; i < cart.length; i++) {
        var item_detail = {
          'id'        : "produk"+i,
          'price'     : parseInt(cart[i][1]),
          'quantity'  : cart[i][2],
          'name'      : cart[i][4],
          };

        item.push(item_detail);
        harga += parseInt(cart[i][1]);

        if(cart.length-1 == i)
        {
          var item_detail = {
            'id'        : "shipping",
            'price'     : customer_data["harga"],
            'quantity'  : 1,
            'name'      : customer_data["service"]+"("+customer_data["city_origin"]+"-"+
                          customer_data["city_destination"]+")",
            };
          item.push(item_detail);
          harga += customer_data["harga"];
        }

      }

      var transacion_detail = harga;  
      var customer          = JSON.parse(customer_data["customer_data"]);

      var billing_address = {
        'first_name'        : customer["first_name"],
        'last_name'         : customer["last_name"],
        'address'           : customer["alamat"],
        'city'              : customer["kota"],
        'postal_code'       : customer["kode_pos"],
        'phone'             : customer["phone"],
        'country_code'      : "IDN",
        };

      var shipping_address = {
        'first_name'        : customer["first_name"],
        'last_name'         : customer["last_name"],
        'address'           : customer["alamat"],
        'city'              : customer["kota"],
        'postal_code'       : customer["kode_pos"],
        'phone'             : customer["phone"],
        'country_code'      : "IDN",
        };

      var customer_details = {
        'first_name'        : customer["first_name"],
        'last_name'         : customer["last_name"],
        'email'             : customer["email"],
        'phone'             : customer["phone"],
        'billing_address'   : billing_address,
        'shipping_address'  : shipping_address,
        };

      var data = {
        "action"            : "payment",
        "transacion_detail" : transacion_detail,
        "item_details"      : item,
        "customer_details"  : customer_details,      
      };

      var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
      var xhr = new XMLHttpRequest();
      if ("withCredentials" in xhr){
        xhr.open("GET", url, true);
      } else if (typeof XDomainRequest != "undefined"){
        xhr = new XDomainRequest();
        xhr.open(method, url);
      } else {
        xhr = null;
      }

      xhr.setRequestHeader(
        'X-Requested-With', 'XMLHttpRequest');
      xhr.send();

      data = $(this).serialize() + "&" + $.param(data);
      $.ajax
      ({
          url: url, //Relative or absolute path to response.php file
          type: "GET",
          crossDomain: true,
          data: data,
          dataType: "text", 
          async: false,

          success: function(data) {
            if(data != "" && data != null)
            {
              console.log(data);
              url = data;
            }
          },
          error: function( jqXhr, textStatus, errorThrown ) {
              console.log( errorThrown );
          } 
      });

      window.open    = cordova.InAppBrowser.open;
      var ref        = cordova.InAppBrowser.open(url, '_blank', 'location=yes');

      ref.addEventListener( "loadstop", function(event) {
        if(event.url.includes("revo.webmurahbagus.com"))
        { 
            var data = {
              "action": "a"
            };

            var url = event.url;
            var xhr = new XMLHttpRequest();
            if ("withCredentials" in xhr){
              xhr.open("GET", url, true);
            } else if (typeof XDomainRequest != "undefined"){
              xhr = new XDomainRequest();
              xhr.open(method, url);
            } else {
              xhr = null;
            }

            xhr.setRequestHeader(
              'X-Requested-With', 'XMLHttpRequest');
            xhr.send();

            data = $(this).serialize() + "&" + $.param(data);
            $.ajax
            ({
                url: url, //Relative or absolute path to response.php file
                type: "GET",
                crossDomain: true,
                data: data,
                dataType: "json", 
                async: false,

                success: function(data) {
                  if(data != "" && data != null)
                  {
                    ref.close();

                    if(data["status_message"] == "Success, transaction is found")
                    {
                      $.notify("Transaksi berhasil", {position :"bottom center", className: 'success'});
                      fn.load('summary1.html', JSON.stringify(customer_data), "veritrans");

                      setTimeout(function() {
                        var metode_pembayaran       = document.getElementById('metode_pembayaran');
                        metode_pembayaran.innerHTML = "Pembayaran Melalui <b>Veritrans</b>"

                        var metode_pembayaran_img   = document.getElementById('metode_pembayaran_img');
                        metode_pembayaran_img.setAttribute('src', 'img/veritrans2.png');

                        var metode_pembayaran_note  = document.getElementById('metode_pembayaran_note');
                        metode_pembayaran_note.setAttribute('style', 'display:none');
                      }, 10);
                    }
                    else
                    {
                      $.notify("Transaksi gagal", {position :"bottom center", className: 'error'});
                      fn.load('pembayaran.html', JSON.stringify(customer_data));

                    }
                  }
                },
                error: function( jqXhr, textStatus, errorThrown ) {
                    alert( errorThrown );
                } 
            });
          }
      });
    }

    $(document).ready(function(){
      setTimeout(function(){
        // var splash = document.getElementById("splash");
        navigator.splashscreen.show();

        loadNotification();

          storage.removeItem("menu");
          storage.removeItem("rajaongkir");
          storage.removeItem("store_location");

          setTimeout(function(){
            fn.load("home.html");
          }, 10); 

          setTimeout(function(){
            // splash.style.opacity = 0;
            // var parent = document.getElementById("splash_parent");
            // parent.removeChild(splash);
          }, 300);
      }, 300);
    });

    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#foto_konfirmasi')
                .attr('src', e.target.result)
                .attr('style', 'display:content');
        };

        reader.readAsDataURL(input.files[0]);
      }
    }
    function loadNotification(){
      var cart = JSON.parse(storage.getItem("cart"));
      if(cart != null)
      {
        var cart_length = cart.length;
        storage.setItem("cart", JSON.stringify(cart));

        var icon = document.getElementById("cart_icon3");

        if(icon != null)
        {
          icon.innerHTML = cart_length;
          }
      }
    }

    function loadData(){

      storage = window.localStorage;

      //Load Data Provinsi dan Kota di Indonesia
      // var data = {
      //   "action"   : "shipping",
      //   "request"  : "data",
      // };

      // var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
      // var xhr = new XMLHttpRequest();
      // if ("withCredentials" in xhr){
      //   xhr.open("GET", url, true);
      // } else if (typeof XDomainRequest != "undefined"){
      //   xhr = new XDomainRequest();
      //   xhr.open(method, url);
      // } else {
      //   xhr = null;
      // }

      // xhr.setRequestHeader(
      //   'X-Requested-With', 'XMLHttpRequest');
      // xhr.send();

      // data = $(this).serialize() + "&" + $.param(data);
      // $.ajax
      // ({
      //     url: url, //Relative or absolute path to response.php file
      //     type: "GET",
      //     crossDomain: true,
      //     data: data,
      //     dataType: "json", 
      //     async: false,

      //     success: function(data) {
      //       if(data != "" && data != null)
      //       {
      //         // console.log(data);
      //         storage.setItem("rajaongkir", JSON.stringify(data));
      //       }
      //     },
      //     error: function( jqXhr, textStatus, errorThrown ) {
      //         console.log( errorThrown );
      //     } 
      // });

      // //Load store location dari wp admin
      // var data = {
      //   "action"   : "store_location",
      // };

      // var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
      // var xhr = new XMLHttpRequest();
      // if ("withCredentials" in xhr){
      //   xhr.open("GET", url, true);
      // } else if (typeof XDomainRequest != "undefined"){
      //   xhr = new XDomainRequest();
      //   xhr.open(method, url);
      // } else {
      //   xhr = null;
      // }

      // xhr.setRequestHeader(
      //   'X-Requested-With', 'XMLHttpRequest');
      // xhr.send();

      // data = $(this).serialize() + "&" + $.param(data);
      // $.ajax
      // ({
      //     url: url, //Relative or absolute path to response.php file
      //     type: "GET",
      //     crossDomain: true,
      //     data: data,
      //     dataType: "json", 
      //     async: false,

      //     success: function(data) {
      //       if(data != "" && data != null)
      //       {
      //         // console.log(data);
      //         storage.setItem("store_location", JSON.stringify(data));
      //       }
      //     },
      //     error: function( jqXhr, textStatus, errorThrown ) {
      //         console.log( errorThrown );
      //     } 
      // });

      // //Load menu 
      // var data = {
      //   "action": "test1"
      // };

      // var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
      // var xhr = new XMLHttpRequest();
      // if ("withCredentials" in xhr){
      //   xhr.open("GET", url, true);
      // } else if (typeof XDomainRequest != "undefined"){
      //   xhr = new XDomainRequest();
      //   xhr.open(method, url);
      // } else {
      //   xhr = null;
      // }

      // xhr.setRequestHeader(
      //   'X-Requested-With', 'XMLHttpRequest');
      // xhr.send();

      // data = $(this).serialize() + "&" + $.param(data);
      // $.ajax
      // ({
      //     url: url, //Relative or absolute path to response.php file
      //     type: "GET",
      //     crossDomain: true,
      //     data: data,
      //     dataType: "json", 
      //     async: false,

      //     success: function(data) {
      //       if(data != "" && data != null)
      //       {
      //         console.log(data);
      //           storage.setItem("menu", JSON.stringify(data));
      //           status = true;
      //       }
      //     },
      //     error: function( jqXhr, textStatus, errorThrown ) {
      //         console.log( errorThrown );
      //     } 
      // });

      // var data = {
      //   "action": "page"
      // };

      // var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
      // var xhr = new XMLHttpRequest();
      // if ("withCredentials" in xhr){
      //   xhr.open("GET", url, true);
      // } else if (typeof XDomainRequest != "undefined"){
      //   xhr = new XDomainRequest();
      //   xhr.open(method, url);
      // } else {
      //   xhr = null;
      // }

      // xhr.setRequestHeader(
      //   'X-Requested-With', 'XMLHttpRequest');
      // xhr.send();

      // data = $(this).serialize() + "&" + $.param(data);
      // $.ajax
      // ({
      //     url: url, //Relative or absolute path to response.php file
      //     type: "GET",
      //     crossDomain: true,
      //     data: data,
      //     dataType: "json", 
      //     async: false,

      //     success: function(data) {
      //       if(data != "" && data != null)
      //       {
      //         console.log(data);
      //         storage.setItem('extra_page', JSON.stringify(data));
      //         for (var i = 0; i < data.length; i++) {
      //           var ons_list        = document.createElement('ons-list');
      //           ons_list.setAttribute('id', 'menu_profile');
      //           ons_list.setAttribute('class', 'list__item list__item--material');
      //           ons_list.setAttribute('style', 'font-size:18px;');
      //           ons_list.setAttribute('onclick', "fn.load('extra_page.html', '"+data[i]["post_title"]+"')");
      //           ons_list.setAttribute('tappable', true);

      //           var div             = document.createElement('div');
      //           div.setAttribute('class', 'left ion-ios-keypad list__item__left list__item--material__left');
      //           div.setAttribute('style', 'margin-right:20px;');

      //           var div_center_list = document.createElement('div');
      //           div_center_list.setAttribute('class', 'center list__item__center list__item--material__center')
      //           div_center_list.innerHTML      = data[i]["post_title"];

      //           ons_list.appendChild(div);
      //           ons_list.appendChild(div_center_list);

      //           var extra_page      = document.getElementById('extra_page');
      //           extra_page.appendChild(ons_list);

      //         }
      //       }
      //     },
      //     error: function( jqXhr, textStatus, errorThrown ) {
      //         console.log( errorThrown );
      //     } 
      // });

      var data = {
        "action": "data"
      };

      var url = 'http://revo.webmurahbagus.com/woocommerce-mobile/server/test.php';
      var xhr = new XMLHttpRequest();
      if ("withCredentials" in xhr){
        xhr.open("GET", url, true);
      } else if (typeof XDomainRequest != "undefined"){
        xhr = new XDomainRequest();
        xhr.open(method, url);
      } else {
        xhr = null;
      }

      xhr.setRequestHeader(
        'X-Requested-With', 'XMLHttpRequest');
      xhr.send();

      data = $(this).serialize() + "&" + $.param(data);
      $.ajax
      ({
          url: url, //Relative or absolute path to response.php file
          type: "GET",
          crossDomain: true,
          data: data,
          dataType: "json", 
          async: false,

          success: function(data) {
            if(data != "" && data != null)
            {
              storage.setItem("rajaongkir", data["provinsi_kota"]);
              storage.setItem("store_location", data["store_location"]);
              storage.setItem("menu", data["all_categories"]);
              storage.setItem('extra_page', data["page"]);

              extra_page_data = JSON.parse(storage.getItem("extra_page"));

              console.log(extra_page_data);
              for (var i = 0; i < extra_page_data.length; i++) {
                var ons_list        = document.createElement('ons-list');
                ons_list.setAttribute('id', 'menu_profile');
                ons_list.setAttribute('class', 'list__item list__item--material');
                ons_list.setAttribute('style', 'font-size:18px;');
                ons_list.setAttribute('onclick', "fn.load('extra_page.html', '"+extra_page_data[i]["post_title"]+"')");
                ons_list.setAttribute('tappable', true);

                var div             = document.createElement('div');
                div.setAttribute('class', 'left ion-ios-keypad list__item__left list__item--material__left');
                div.setAttribute('style', 'margin-right:20px;');

                var div_center_list = document.createElement('div');
                div_center_list.setAttribute('class', 'center list__item__center list__item--material__center')
                div_center_list.innerHTML      = extra_page_data[i]["post_title"];

                ons_list.appendChild(div);
                ons_list.appendChild(div_center_list);

                var extra_page      = document.getElementById('extra_page');
                extra_page.appendChild(ons_list);

              }
            }
          },
          error: function( jqXhr, textStatus, errorThrown ) {
              console.log( errorThrown );
          } 
      });

      navigator.splashscreen.hide();
    }
  </script>


</html>
